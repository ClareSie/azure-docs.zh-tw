---
title: K 表示群集：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何使用 Azure Machine Learning 中的 K 表示叢集模組來訓練叢集模型。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 08/04/2020
ms.openlocfilehash: 7e0b61c1ca6ae30044e4c9d4705bdce01eac1942
ms.sourcegitcommit: 96918333d87f4029d4d6af7ac44635c833abb3da
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/04/2020
ms.locfileid: "93323686"
---
# <a name="module-k-means-clustering"></a>模組： K-表示群集

本文描述如何在 Azure Machine Learning 設計工具中使用 *K 意指* 叢集模組，以建立未定型的 k 意指叢集模型。 
 
K 表示是最簡單且最知名的 *非監督式* 學習演算法之一。 您可以使用演算法進行各種機器學習工作，例如： 

* 偵測[異常資料](/archive/msdn-magazine/2013/february/data-clustering-detecting-abnormal-data-using-k-means-clustering)。
* 群集文字檔。
* 在使用其他分類或回歸方法之前，先分析資料集。 

若要建立群集模型，您可以：

* 將此模組新增至您的管線。
* 串連資料組。
* 設定參數，例如您預期的群集數目、建立叢集時所使用的距離度量等等。 
  
設定模組超參數之後，您可以將未定型的模型連接到 [定型群集模型](train-clustering-model.md)。 因為 K 表示演算法是非監督式的學習方法，所以標籤資料行是選擇性的。 

+ 如果您的資料包含標籤，您可以使用標籤值來引導選取叢集，並將模型優化。 

+ 如果您的資料沒有標籤，則演算法會根據資料來建立代表可能類別的群集。  

##  <a name="understand-k-means-clustering"></a>瞭解 K-表示群集
 
一般來說，叢集會使用反復的技巧，將資料集中的案例分組成具有類似特性的群集。 這些群組適用于探索資料、識別資料中的異常，最後是為了進行預測。 群集模型也可以協助您識別資料集內的關聯性，您可能不會透過流覽或簡單的觀察來以邏輯方式衍生這些關聯性。 基於這些理由，叢集通常用於機器學習工作的早期階段，以流覽資料並找出非預期的關聯性。  
  
 當您使用 K 意指方法來設定群集模型時，您必須指定目標編號 *K* ，指出您要在模型中使用的 *距心* 數目。 距心是代表每個叢集的點。 K 表示演算法會將每個內送資料點指派給其中一個群集，方法是將內部叢集的平方總和降至最低。 
 
當它處理定型資料時，K 表示演算法會從一組初始隨機播放的距心開始。 距心可作為叢集的起點，並套用羅依的演算法，以反復地調整其位置。 當叢集符合下列一或多個條件時，K 表示演算法會停止建立和調整叢集：  
  
-   距心穩定，表示個別點的叢集指派不再變更，而且演算法已在解決方案上聚合。  
  
-   演算法會完成執行指定的反覆運算次數。  
  
 完成定型階段之後，您可以使用 [ [將資料指派給](assign-data-to-clusters.md) 叢集] 模組，將新案例指派給您使用 K 表示演算法找到的其中一個群集。 您可以計算新案例和每個叢集距心之間的距離，以執行叢集指派。 每個新案例都會指派給具有最接近距心的叢集。  

## <a name="configure-the-k-means-clustering-module"></a>設定 K 表示叢集模組
  
1.  將 **K 意指** 叢集模組新增至您的管線。  
  
2.  若要指定您要如何定型模型，請選取 [ **建立定型模式]** 選項。  
  
    -   **單一參數** ：如果您知道要在群集模型中使用的確切參數，您可以提供一組特定值做為引數。  
  
3.  針對 [ **距心數目** ]，輸入您想要演算法開頭的叢集數目。  
  
     模型不保證會產生確切的叢集數目。 此演算法會以資料點數目為開頭，並逐一查看以找出最佳設定。 您可以參考 sklearn 的 [原始程式碼](https://github.com/scikit-learn/scikit-learn/blob/fd237278e/sklearn/cluster/_kmeans.py#L1069)。
  
4.  屬性 **初始化** 用來指定用來定義初始叢集設定的演算法。  
  
    -   **第一個** 步驟：從資料集選擇一些初始的資料點數目，並做為初始的方式使用。 
    
         這個方法也稱為 *forgy 法方法* 。  
  
    -   **隨機** ：演算法會隨機將資料點放在叢集中，然後計算初始平均值，以成為叢集隨機指派點的距心。 

         這個方法也稱為亂數據 *分割* 方法。  
  
    -   **K-意指 + +** ：這是初始化群集的預設方法。  
  
         **K-意指 + +** 演算法于2007年提議，David Arthur 和 Sergei Vassilvitskii，以避免標準的 K 意指演算法進行不佳的群集。 **K-意指 + +** 會使用不同的方法來選擇初始叢集中心，以改善標準 K 表示。  
  
    
5.  針對 [ **亂數字種子** ]，選擇性地輸入要做為叢集初始化之種子的值。 此值對叢集選取專案可能會有重大影響。  
  
6.  針對 [計量]，選擇要用來測量群集向量之間的距離，或在新的資料點和隨機播放的距心 **之間，使用** 的函數。 Azure Machine Learning 支援下列叢集距離計量：  
  
    -   **Euclidean** ： Euclidean 距離通常是用來做為代表群集的叢集散佈量值。 此為慣用度量，因為它可以將點與距心之間的平均距離縮到最短。
  
7.  在 [反復專案] 中，輸入演算法在完成選取距心 **之前，應該** 逐一查看定型資料的次數。  
  
     您可以調整此參數，以平衡定型時間的精確度。  
  
8.  針對 [ **指派標籤模式]** ，選擇一個選項來指定標籤資料行（如果資料集內有標籤資料行）應該如何處理。  
  
     因為 K 表示叢集是非監督式機器學習方法，所以標籤是選擇性的。 但是，如果您的資料集已經有標籤資料行，您可以使用這些值來引導選取叢集，也可以指定忽略這些值。  
  
    -   **略過標籤資料行** ： [標籤] 資料行中的值會被忽略，且不會用於建立模型。
  
    -   **填滿遺漏值** ：標籤資料行值會用來做為可協助建立群集的功能。 如果有任何資料列遺漏標籤，則會使用其他功能來插補此值。  
  
    -   **從最接近中心覆寫** ：標籤資料行值會以預測的標籤值取代，並使用最接近目前距心的點標籤。  

8.  如果您想要在定型之前將特徵正規化，請選取 [ **標準化功能** ] 選項。
  
     如果您在定型之前套用正規化，資料點會 `[0,1]` 依 MinMaxNormalizer 正規化至。

10. 將模型定型。  
  
    -   如果您將 [ **建立定型模式]** 設定為 [ **單一參數** ]，請加入已加上標籤的資料集，並使用「 [定型群集模型](train-clustering-model.md) 」模組來定型模型  
  
## <a name="results"></a>結果

完成模型的設定和定型之後，您就可以使用模型來產生分數。 不過，有多種方法可以定型模型，以及查看和使用結果的多種方式： 

### <a name="capture-a-snapshot-of-the-model-in-your-workspace"></a>在您的工作區中捕獲模型的快照

如果您使用「 [定型群集模型](train-clustering-model.md) 」模組：

1. 選取 [ **定型群集模型** ] 模組，然後開啟右面板。

2. 選取 [ **輸出** ] 索引標籤。選取 [ **註冊資料集** ] 圖示，以儲存定型模型的複本。

儲存的模型代表您儲存模型時的定型資料。 如果您稍後更新管線中使用的定型資料，則不會更新已儲存的模型。 

### <a name="see-the-clustering-result-dataset"></a>請參閱群集結果資料集 

如果您使用「 [定型群集模型](train-clustering-model.md) 」模組：

1. 以滑鼠右鍵按一下 [ **定型群集模型** ] 模組。

2. 選取 [視覺化]。

### <a name="tips-for-generating-the-best-clustering-model"></a>產生最佳群集模型的秘訣  

您知道在群集期間使用的 *植* 入程式可能會大幅影響模型。 植入表示將點的初始位置放入潛在的距心。
 
例如，如果資料集包含許多極端值，而且選擇了極端值來植入叢集，則沒有其他資料點適合該叢集，且叢集可能是單一的。 也就是說，它可能只有一個點。  
  
您可以透過幾種方式來避免此問題：  
  
-   變更距心數目，然後嘗試多個種子值。  
  
-   建立多個模型、改變度量或反復查看更多模型。  
  
一般而言，使用群集模型時，任何指定的設定都可能會導致一組本機優化的叢集。 換句話說，模型所傳回的一組叢集僅適用于目前的資料點，無法歸納為其他資料。 如果您使用不同的初始設定，則 K 表示方法可能會發現不同、更高階的設定。 

## <a name="next-steps"></a>後續步驟

請參閱 Azure Machine Learning 的[可用模組集](module-reference.md)。