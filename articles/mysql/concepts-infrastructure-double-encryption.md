---
title: 基礎結構雙重加密-適用於 MySQL 的 Azure 資料庫
description: 瞭解如何使用基礎結構雙重加密，利用服務管理的金鑰來新增第二層加密。
author: kummanish
ms.author: manishku
ms.service: mysql
ms.topic: conceptual
ms.date: 6/30/2020
ms.openlocfilehash: 079e3f9219d649d9740d38a8a8452e51b9d84acf
ms.sourcegitcommit: d8b8768d62672e9c287a04f2578383d0eb857950
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2020
ms.locfileid: "88066401"
---
# <a name="azure-database-for-mysql-infrastructure-double-encryption"></a>適用於 MySQL 的 Azure 資料庫基礎結構雙重加密

> [!NOTE]
> 此時，您必須要求存取權限，才能使用此功能。 若要這麼做，請洽詢 AskAzureDBforMySQL@service.microsoft.com 。

適用於 MySQL 的 Azure 資料庫會針對使用 Microsoft 管理的金鑰的資料，使用待用資料的儲存體[加密](concepts-security.md#at-rest)。 包含備份在內的資料會在磁片上加密，而且此加密一律為開啟，且無法停用。 加密使用 FIPS 140-2 驗證的密碼編譯模組，以及適用于 Azure 儲存體加密的 AES 256 位加密。

基礎結構雙重加密會使用服務管理的金鑰來新增第二層加密。 它使用 FIPS 140-2 驗證的密碼編譯模組，但使用不同的加密演算法。 這會為您的待用資料提供額外的保護層。 在基礎結構雙重加密中使用的金鑰也是由適用於 MySQL 的 Azure 資料庫服務所管理。 預設不會啟用基礎結構雙重加密，因為額外的加密層級可能會對效能造成影響。

> [!NOTE]
> 「適用於 MySQL 的 Azure 資料庫」支援「一般用途」和「記憶體最佳化」定價層，其中所有 Azure 區域都可使用此功能。

基礎結構層加密的優點是，在最接近存放裝置或網路線路的層級上執行。 適用於 MySQL 的 Azure 資料庫使用服務管理的金鑰來執行兩層的加密。 雖然在技術上仍然是在服務層中，但它非常接近儲存待用資料的硬體。 您仍然可以使用已布建之 MySQL 伺服器的[客戶管理金鑰](concepts-data-encryption-mysql.md)，選擇性地啟用待用資料加密。 

基礎結構層的執行也支援多樣性的金鑰。 基礎結構必須留意不同的電腦和網路叢集。 因此，不同的金鑰會用來將基礎結構攻擊的衝擊 radius 和各種硬體和網路故障降到最低。 

> [!NOTE]
> 使用基礎結構雙重加密會對適用於 MySQL 的 Azure 資料庫伺服器造成效能上的影響，因為額外的加密程式。

## <a name="benefits"></a>優點

適用於 MySQL 的 Azure 資料庫的基礎結構雙重加密提供下列優點：

1. 密碼編譯的**額外多樣性**-規劃移至以硬體為基礎的加密，除了以軟體為基礎的執行之外，也會提供以硬體為基礎的執行，以進一步 [多樣化實現。
2. **執行錯誤**-基礎結構層的兩層加密會保護在會公開純文字資料的較高層級中，對快取或記憶體管理中的任何錯誤。 此外，這兩個層級也可確保在一般的加密執行中發生錯誤。

結合這些功能可提供強大的保護，以抵禦用來攻擊密碼編譯的常見威脅和弱點。

## <a name="supported-scenarios-with-infrastructure-double-encryption"></a>使用基礎結構雙重加密的支援案例

適用於 MySQL 的 Azure 資料庫所提供的加密功能可以一起使用。 以下是您可以使用之各種案例的摘要：

|  ##   | 預設加密 | 基礎結構雙重加密 | 使用客戶管理的金鑰進行資料加密  |
|:------|:------------------:|:--------------------------------:|:--------------------------------------------:|
| 1     | *是*              | *否*                             | 否                                         |
| 2     | *是*              | *是*                            | *否*                                         |
| 3     | *是*              | *否*                             | *是*                                        |
| 4     | *是*              | *是*                            | *是*                                        |
|       |                    |                                  |                                              |

> [!Important]
> - 案例2和4可能會根據適用於 MySQL 的 Azure 資料庫伺服器的工作負載類型，導致5-10% 的輸送量下降，因為基礎結構加密的額外層級。
> - 只有在伺服器建立期間，才允許設定適用於 MySQL 的 Azure 資料庫的基礎結構雙重加密。 布建伺服器後，您就無法變更儲存體加密。 不過，您仍然可以使用客戶管理的金鑰，針對使用/不具基礎結構雙重加密的伺服器來啟用資料加密。

## <a name="limitations"></a>限制

針對適用於 MySQL 的 Azure 資料庫，使用服務管理的金鑰組基礎結構雙重加密的支援具有下列限制：

* 此功能的支援僅限於**一般用途**和**記憶體優化**定價層。
* * 這項功能僅支援區域和伺服器，最多可支援 16 TB 的儲存體。 如需支援最多 16 TB 儲存體的 Azure 區域清單，請參閱[儲存體檔](concepts-pricing-tiers.md#storage)。

    > [!NOTE]
    > - 以上所欄區域中建立的所有**新**MySQL 伺服器也支援使用客戶管理員金鑰進行資料加密。 在此情況下，透過時間點還原 (PITR) 或讀取複本所建立的伺服器不符合「新增」資格。
    > - 若要驗證您布建的伺服器是否支援高達 16 TB，您可以移至入口網站中的 [定價層] 分頁，並查看 [儲存體] 滑杆是否可以最大為 16 TB。 如果您只能將滑杆移到 4 TB，您的伺服器可能不支援使用客戶管理的金鑰進行加密;不過，資料會隨時使用服務管理的金鑰進行加密。 AskAzureDBforMySQL@service.microsoft.com如果您有任何問題，請聯繫。

## <a name="next-steps"></a>後續步驟

瞭解如何設定適用于[MySQL 的 Azure 資料庫的基礎結構雙重加密](howto-double-encryption.md)。