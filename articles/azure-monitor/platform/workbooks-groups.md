---
title: Azure 監視器活頁簿群組
description: 如何使用 Azure 監視器活頁簿中的群組。
services: azure-monitor
author: lgayhardt
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 05/06/2020
ms.author: lagayhar
ms.openlocfilehash: b6377cdcdb5816426eba62fdbef79eeb42659dcc
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "82892078"
---
# <a name="how-to-use-groups-in-workbooks"></a>如何使用活頁簿中的群組

活頁簿中的群組專案可讓您以邏輯方式將活頁簿中的一組步驟群組在一起。

活頁簿中的群組適用于數個專案：

- Layout
  - 在您想要以垂直方式組織專案的案例中，您可以建立一組全部堆疊的專案，並將群組的樣式設定為百分比寬度，而不是設定所有個別專案的百分比寬度。
- 可見性
  - 在您想要同時隱藏/顯示許多專案的情況下，您可以設定整個專案群組的可見度，而不是在每個個別專案上設定可見度設定。 這在使用索引標籤的範本中很有用，因為您可以使用群組做為索引標籤的內容，而且可以根據選取的索引標籤所設定的參數來隱藏/顯示整個群組。
- 效能
  - 如果您的範本具有許多區段或索引標籤，您可以將每個區段轉換成它自己的子範本，並使用群組來載入最上層範本中的所有子範本。 子範本的內容將不會載入或執行，直到使用者讓這些群組可見為止。 深入瞭解[如何將大型範本分割成多個範本](#how-to-split-a-large-template-into-many-templates)。

## <a name="using-groups"></a>使用群組

若要將群組加入至活頁簿，請選取 [*新增*]，然後按一下 [*新增群組*]。

![依序選取 [新增] 和 [群組]。](./media/workbooks-groups/add-group.png)

以下是讀取模式中有兩個專案的群組螢幕擷取畫面：文字專案和查詢專案。  

![讀取模式中的群組。](./media/workbooks-groups/groups-view.png)

編輯活頁簿時，您可以看到這兩個專案實際上是在群組專案內：

![編輯模式中的群組。 ](./media/workbooks-groups/groups-edit.png)

在上述螢幕擷取畫面中，群組處於編輯模式，顯示包含兩個專案（在虛線區域內）。 每個步驟都可以處於 [編輯] 或 [讀取] 模式，彼此獨立。 例如，當查詢步驟處於讀取模式時，文字步驟會處於編輯模式。

## <a name="scoping"></a>範圍

目前，群組會被視為活頁簿中的新範圍。 在群組中建立的任何參數，只會顯示在群組內。 這也適用于 merge，您只能在其群組或父層級中看到資料。

## <a name="group-types"></a>群組類型

[活頁簿] 群組專案可讓您將專案群組新增至活頁簿。 身為活頁簿的作者，您可以指定所屬的群組類型。 群組有兩種類型：

- Editable
  - 活頁簿中的群組可讓您新增、移除或編輯群組中的專案內容。 這最常用於版面配置和可見度。
- 從範本
  - 活頁簿中的群組會依識別碼從另一個範本的內容載入。 該範本的內容會在執行時間載入併合並至活頁簿。 在編輯模式中，您無法修改群組的任何內容，因為它們只會在下一次載入專案時，從範本再次載入。  

## <a name="load-types"></a>載入類型

有幾種不同的方式可以載入群組的內容。 身為活頁簿的作者，您可以指定群組內容的載入時間和方式。

### <a name="lazy-the-default"></a>延遲（預設值）

只有當專案可見時，群組才會載入。 這可讓索引標籤專案使用群組。 如果從未選取此索引標籤，則該群組永遠不會變成可見，因此不會載入內容。

針對從範本建立的群組，將不會抓取範本的內容，而且在群組變成可見之前，不會建立群組中的專案。 當抓取內容時，使用者會看到整個群組的進度 spinners。

### <a name="explicit"></a>明確

在此模式中，會顯示群組所在的按鈕，而且在使用者明確按一下按鈕以載入內容之前，不會抓取或建立任何內容。 這在內容可能會耗用大量計算或很少使用的案例中很有用。 作者可以指定要顯示在按鈕上的文字。

以下是明確載入設定的螢幕擷取畫面，其中顯示已設定的 [載入更多] 按鈕。

![明確載入設定](./media/workbooks-groups/groups-explicitly-loaded.png)

在活頁簿中載入之前的群組：

![在活頁簿中載入前明確群組](./media/workbooks-groups/groups-explicitly-loaded-before.png)

在活頁簿中載入之後的群組：

![載入活頁簿後的明確群組](./media/workbooks-groups/groups-explicitly-loaded-after.png)

### <a name="always"></a>永遠

在此模式中，群組的內容一律會在活頁簿載入時立即載入並建立。 這最常用於僅供版面配置用途使用的群組，其中內容一律會顯示。

## <a name="using-templates-inside-a-group"></a>使用群組內的範本

當群組設定為從範本載入時，該內容預設會載入 [延遲]，只有在群組可見時才會載入。

當範本載入至群組時，活頁簿會嘗試合併範本中宣告的任何參數，並以已存在於群組中的參數載入。 任何已存在於活頁簿中具有相同名稱的參數，將會與載入的範本合併。 如果參數步驟中的所有參數都已合併，則整個參數步驟將會消失。

### <a name="example-1-all-parameters-have-identical-names"></a>範例1：所有參數都有相同的名稱

假設有一個範本，其頂端有兩個參數。

- `TimeRange`-時間範圍參數。
- `Filter`-文字參數。

![編輯參數專案：「最上層參數」](./media/workbooks-groups/groups-top-level-params.png)

然後，群組專案會載入第二個範本，其中有自己的兩個參數和一個文字步驟，其中參數的名稱相同：

![編輯第二個範本的參數專案](./media/workbooks-groups/groups-merged-away.png)

當第二個範本載入群組時，重複的參數將會合並。因為所有參數都會合並在一起，所以內部參數步驟也會合並出來，因此群組只會包含文字步驟。

### <a name="example-2-one-parameter-has-an-identical-name"></a>範例2：一個參數具有相同的名稱

假設有一個群組的範本，其頂端有兩個參數。

- `TimeRange`-時間範圍參數。
- `FilterB`-文字參數，請注意，它與 `Filter` 頂端範本不一樣。

![編輯群組專案，並將參數的結果合併掉](./media/workbooks-groups/groups-wont-merge-away.png)

載入群組的 item's 範本時， `TimeRange` 參數將會合並到群組外。 然後，活頁簿的初始參數步驟會是 `TimeRange` 和 `Filter` ，而群組的參數步驟只會包含`FilterB`

![不會合並的參數結果](./media/workbooks-groups/groups-wont-merge-away-result.png)

如果載入的範本包含 `TimeRange` 和 `Filter` （而不是 `FilterB` ），則產生的活頁簿會有參數步驟和只包含文字步驟的群組。

## <a name="how-to-split-a-large-template-into-many-templates"></a>如何將大型範本分割成許多範本

若要改善效能，請將大型範本分割成多個較小的範本，以根據使用者的延遲或依需求載入某些內容。 這讓初始載入更快速，因為最上層的範本可能會變得很小。

將範本分割成元件時，您會有效率地將範本分割成多個範本（子範本），以個別工作。 因此，如果頂層範本具有 `TimeRange` 其他步驟所使用的參數，子範本也必須有參數步驟，以定義具有完整名稱的參數。 這可讓子範本獨立工作，並讓它們載入群組中較大的範本內。

若要將較大的範本轉換成多個子範本：

1.  在活頁簿頂端附近的共用參數之後，建立新的空群組。 這個新群組最後會成為子範本。
2. 建立共用參數步驟的複本，然後使用 [*移至群組*] 將複本移至步驟1中建立的群組。 此參數步驟可讓子範本獨立于外部範本之外工作，並且會在外部範本內載入時合併輸出。
    > [!NOTE]
    > 如果您不想要讓子範本自行顯示，子範本在技術上不需要有這些參數會合並出來。 不過，如果您稍後需要這麼做，它會讓他們難以編輯或進行 debug。

3. 將您想要放在子範本中的每個專案，移至步驟1中建立的群組。
4. 如果步驟3中移動的個別步驟具有條件式可視性，則會變成外部群組的可見度（例如在索引標籤中使用）。 將其從群組內的專案中移除，並將該可見度設定新增至群組本身。 儲存此處以避免遺失變更和/或匯出並儲存 json 內容的複本。
5. 如果您想要從範本載入該群組，您可以使用群組中的 [*編輯*] 工具列按鈕。 這只會在新視窗中開啟該群組的內容做為活頁簿。 然後您可以適當地儲存它，並關閉此活頁簿視圖（不要關閉瀏覽器，只是要回到先前編輯的活頁簿）。
6. 接著，您可以將 [群組] 步驟變更為 [從範本載入]，並將 [範本識別碼] 欄位設定為您在步驟5中建立的活頁簿/範本。 若要使用活頁簿識別碼，來源必須是共用的活頁簿資源識別碼。 按下 [*載入*]，該群組的內容現在會從該子範本載入，而不是儲存在此外部活頁簿內。

## <a name="next-steps"></a>後續步驟
- [活頁簿總覽](workbooks-overview.md)
- [使用活頁簿的 JSONPath](workbooks-jsonpath.md)