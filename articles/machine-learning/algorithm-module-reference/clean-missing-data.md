---
title: 清除遺漏的資料：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何使用 Azure Machine Learning 中的 [清除遺漏的資料] 模組來移除、取代或推斷遺漏值。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: 14c3bc968da9d398fbc14eda74378047cf28277b
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "79477692"
---
# <a name="clean-missing-data-module"></a>清除遺漏的資料模組

本文說明 Azure Machine Learning 設計工具 (預覽) 中的模組。

使用此模組來移除、取代或推斷遺漏值。 

資料科學家通常會檢查遺漏值的資料，然後執行各種作業來修正資料或插入新的值。 這類清除作業的目標是要避免因在定型模型時可能發生的資料遺失所造成的問題。 

此模組支援「清理」遺漏值的多種作業類型，包括：

+ 以預留位置、平均值或其他值取代遺漏值
+ 完全移除具有遺漏值的資料列和資料行
+ 根據統計方法推斷值


使用此模組不會變更您的源資料集。 相反地，它會在您的工作區中建立新的資料集，供您在後續的工作流程中使用。 您也可以儲存新的、已清理的資料集以供重複使用。

此模組也會輸出用來清除遺漏值的轉換定義。 您可以使用 [套用[轉換](./apply-transformation.md)] 模組，在具有相同架構的其他資料集上重複使用此轉換。  

## <a name="how-to-use-clean-missing-data"></a>如何使用清除遺漏的資料

此模組可讓您定義清理作業。 您也可以儲存清理作業，讓您稍後可以將它套用至新的資料。 請參閱下列各節，以瞭解如何建立和儲存清理程式： 
 
+ [取代遺漏值](#replace-missing-values)
  
+ [若要將清除轉換套用至新資料](#apply-a-saved-cleaning-operation-to-new-data)
 
> [!IMPORTANT]
> 您用來處理遺漏值的清理方法可能會大幅影響您的結果。 我們建議您試驗不同的方法。 請考慮使用特定方法的理由，以及結果的品質。

### <a name="replace-missing-values"></a>取代遺漏值  

每次您將[清除遺漏的資料](./clean-missing-data.md)模組套用至一組資料時，會將相同的清理作業套用至您選取的所有資料行。 因此，如果您需要使用不同的方法來清除不同的資料行，請使用模組的個別實例。

1.  將[清除遺漏的資料](./clean-missing-data.md)模組新增至您的管線，並連接具有遺漏值的資料集。  
  
2.  針對**要清除**的資料行，選擇包含您想要變更之遺漏值的資料行。 您可以選擇多個資料行，但您必須在所有選取的資料行中使用相同的取代方法。 因此，您通常需要分別清除字串資料行和數值資料行。

    例如，若要檢查所有數值資料行中的遺漏值：

    1. 選取 [**清除遺漏的資料**] 模組，然後按一下模組右面板中的 [**編輯欄位**]。

    3. 針對 [**包含**]，從下拉式清單中選取 [資料**行類型**]，然後選取 [**數值**]。 
  
    您選擇的任何清理或取代方法都必須適用于選取範圍中的**所有**資料行。 如果任何資料行中的資料與指定的作業不相容，此模組會傳回錯誤並停止管線。
  
3.  針對 [**最小遺漏值比率**]，指定要執行作業所需的遺漏值的最小數目。  
  
    您可以將此選項與 [**最大遺漏值比率**] 搭配使用，以定義在資料集上執行清理作業的條件。 如果遺漏值的資料列太多或太少，就無法執行此作業。 
  
    您輸入的數位代表資料行中所有值的遺漏值**比率**。 根據預設，[**最小遺漏值比率**] 屬性會設定為0。 這表示即使只有一個遺漏值，也會清除遺漏值。 

    > [!WARNING]
    > 每個資料行必須符合此條件，才能套用指定的作業。 例如，假設您選取了三個數據行，然後將遺漏值的最小比率設為 .2 （20%），但只有一個資料行實際有20% 的遺漏值。 在此情況下，清除作業只會套用至具有超過20% 遺漏值的資料行。 因此，其他資料行不會變更。
    > 
    > 如果您對遺漏值是否已變更有所疑慮，請選取 **[產生遺漏值指標資料行]** 選項。 資料行會附加至 dataset，以指出每個資料行是否符合最小和最大範圍的指定準則。  
  
4. 針對 [**最大遺漏值比率**]，指定要執行的作業可以存在的最大遺漏值數目。   
  
    例如，您可能只想要在30% 或更少的資料列包含遺漏值時執行遺漏值取代，但如果超過30% 的資料列有遺漏值，則保留值為-is。  
  
    您可以定義數目為遺漏值，以資料行中的所有值的比例。 根據預設，**最大遺漏值比率**會設定為1。 這表示即使資料行中遺漏100% 的值，也會清除遺漏值。  
  
   
  
5. 針對 [**清理模式]**，請選取下列其中一個選項來取代或移除遺漏的值：  
  
  
    + **自訂替代值**：使用此選項可指定套用至所有遺漏值的預留位置值（例如0或 NA）。 您指定為取代的值必須與資料行的資料類型相容。
  
    + **取代為 mean**：計算資料行的平均值，並使用平均值做為資料行中每個遺漏值的取代值。  
  
        只適用於具有整數、 Double、 資料行或 Boolean 資料型別。  
  
    + **取代為中間**值：計算資料行的中位數，並使用中間值做為資料行中遺漏值的取代。  
  
        只適用於具有整數、 Double、 資料行或 Boolean 資料型別。 
  
    + **取代為模式**：計算資料行的模式，並使用模式做為資料行中每個遺漏值的取代值。  
  
        適用於 Integer、 Double、 布林值或 Categorical 資料類型的資料行。 
  
    + **移除整個資料列**：完全移除 dataset 中具有一或多個遺漏值的任何資料列。 如果遺漏值可視為隨機遺漏，此方法非常有用。  
  
    + **移除整個資料行**：完全移除 dataset 中具有一或多個遺漏值的任何資料行。  
  
    
  
6. 如果您已選取 [**自訂替代值**] 選項，就可以使用 [**取代值**] 選項。 輸入新的值，做為資料行中所有遺漏值的取代值。  
  
    請注意，您只能在具有整數、雙精確度、布林值或字串的資料行中使用此選項。
  
7. **產生遺漏值指標資料行**：如果您想要輸出某個指示，指出資料行中的值是否符合遺漏值清除的準則，請選取此選項。 當您要設定新的清理作業，而且想要確定它如設計運作時，這個選項特別有用。
  
8. 提交管線。

### <a name="results"></a>結果

此模組會傳回兩個輸出：  

-   已**清除的資料集**：由選取的資料行所組成的資料集，如果您選取該選項，則會以指定的方式處理遺漏值，以及一個指標資料行。  

    未選取要清除的資料行也會「傳遞」。  
  
-  **清理轉換**：用於清除的資料轉換，可儲存在您的工作區中，並于稍後套用至新的資料。

### <a name="apply-a-saved-cleaning-operation-to-new-data"></a>將已儲存的清理作業套用至新的資料  

如果您需要經常重複清除作業，建議您將資料清理的配方儲存為*轉換*，以重複使用相同的資料集。 如果您必須經常重新匯入，然後清除具有相同架構的資料，則儲存清除轉換會特別有用。  
      
1.  將 [套用[轉換](./apply-transformation.md)] 模組新增至您的管線。  
  
2.  新增您想要清除的資料集，並將資料集連接到右側輸入埠。  
  
3.  在設計工具的左側窗格中，展開 [**轉換**] 群組。 找出已儲存的轉換，並將它拖曳到管線中。  

4.  將儲存的轉換連接到 [套用[轉換](./apply-transformation.md)] 的左側輸入埠。 

    當您套用已儲存的轉換時，您無法選取要套用轉換的資料行。 這是因為轉換已經定義，而且會自動套用至原始作業中指定的資料行。

    不過，假設您在數值資料行的子集上建立了轉換。 您可以將此轉換套用至混合資料行類型的資料集，而不會引發錯誤，因為遺漏值只會在相符的數值資料行中變更。

6.  提交管線。  

## <a name="next-steps"></a>後續步驟

請參閱 Azure Machine Learning 的[可用模組集](module-reference.md)。 