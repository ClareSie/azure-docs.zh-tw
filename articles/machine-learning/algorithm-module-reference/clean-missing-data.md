---
title: 清理缺失資料：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何在 Azure 機器學習中使用"清除缺失資料"模組來刪除、替換或推斷缺少的值。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: 14c3bc968da9d398fbc14eda74378047cf28277b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477692"
---
# <a name="clean-missing-data-module"></a>清理缺少的資料模組

本文介紹 Azure 機器學習設計器（預覽）中的模組。

使用此模組可以刪除、替換或推斷缺少的值。 

資料科學家經常檢查資料是否缺少缺失值，然後執行各種操作來修復資料或插入新值。 此類清理操作的目標是防止因訓練模型時可能出現的資料缺失而導致的問題。 

此模組支援用於"清理"缺失值的多種類型的操作，包括：

+ 將缺失值替換為預留位置、平均值或其他值
+ 完全刪除缺少值的行和列
+ 基於統計方法的推斷值


使用此模組不會更改源資料集。 相反，它會在工作區中創建一個新資料集，您可以在後續工作流中使用。 您還可以保存新的已清理資料集以供重用。

此模組還輸出用於清理缺失值的轉換的定義。 通過使用[應用轉換](./apply-transformation.md)模組，可以在具有相同架構的其他資料集上重用此轉換。  

## <a name="how-to-use-clean-missing-data"></a>如何使用清除缺失資料

此模組允許您定義清潔操作。 您還可以保存清理操作，以便以後可以將其應用於新資料。 請參閱以下有關如何創建和保存清理過程的部分： 
 
+ [替換缺失值](#replace-missing-values)
  
+ [將清理轉換應用於新資料](#apply-a-saved-cleaning-operation-to-new-data)
 
> [!IMPORTANT]
> 用於處理缺失值的清潔方法可能會顯著影響結果。 我們建議您嘗試使用不同的方法。 考慮使用特定方法的理由和結果的品質。

### <a name="replace-missing-values"></a>取代遺漏值  

每次將["清理缺失資料"](./clean-missing-data.md)模組應用於一組資料時，相同的清理操作將應用於您選擇的所有列。 因此，如果需要使用不同的方法清理不同的列，請使用模組的單獨實例。

1.  將["清除缺失資料"](./clean-missing-data.md)模組添加到管道中，並連接缺少值的資料集。  
  
2.  要**清理列**，請選擇包含要更改的缺失值的列。 您可以選擇多個列，但必須在所有選定的列中使用相同的替換方法。 因此，通常需要單獨清理字串列和數位列。

    例如，要檢查所有數位列中缺少的值：

    1. 選擇 **"清除缺失資料**"模組，然後按一下模組右側面板中的 **"編輯"列**。

    3. 對於 **"包括**"，請從下拉清單中選擇**列類型**，然後選擇 **"數位**"。 
  
    您選擇的任何清潔或替換方法必須適用于所選**內容中的所有**列。 如果任何列中的資料與指定的操作不相容，則模組將返回錯誤並停止管道。
  
3.  對於**最小缺失值比率**，指定要執行的操作所需的最小缺失值數。  
  
    將此選項與 **"最大缺失值比率"** 結合使用，以定義在此時對資料集執行清理操作的條件。 如果缺少值的行太多或太少，則無法執行該操作。 
  
    您輸入的數位表示缺失值與列中所有值**的比率**。 預設情況下，"**最小缺失值比率"** 屬性設置為 0。 這意味著即使只有一個缺失值，也會清除缺少的值。 

    > [!WARNING]
    > 每個列必須滿足此條件，以便應用指定的操作。 例如，假設您選擇了三列，然後將缺失值的最小比率設置為 .2 （20%），但只有一列實際上有 20% 的缺失值。 在這種情況下，清理操作將僅適用于缺少值超過 20% 的列。 因此，其他列將保持不變。
    > 
    > 如果您對遺漏值是否已變更有所疑慮，請選取 **[產生遺漏值指標資料行]** 選項。 將列追加到資料集，以指示每列是否滿足最小範圍和最大範圍的指定條件。  
  
4. 對於**最大缺失值比率**，指定為要執行的操作可以存在的最大缺失值數。   
  
    例如，您可能只希望在 30% 或更少的行包含缺失值時執行缺失值替換，但如果超過 30% 的行缺少值，則保留值。  
  
    您可以定義數目為遺漏值，以資料行中的所有值的比例。 預設情況下，"**最大缺失值比率**"設置為 1。 這意味著即使缺少列中 100% 的值，也會清除缺少的值。  
  
   
  
5. 對於**清潔模式**，選擇以下選項之一以替換或刪除缺失值：  
  
  
    + **自訂替換值**：使用此選項可以指定適用于所有缺失值的預留位置值（如 0 或 NA）。 指定為替換的值必須與列的資料類型相容。
  
    + **替換為均值**：計算列均值，並使用平均值作為列中每個缺失值的替換值。  
  
        只適用於具有整數、 Double、 資料行或 Boolean 資料型別。  
  
    + **替換為中位數**：計算列中位數值，並使用中值作為列中任何缺失值的替換。  
  
        只適用於具有整數、 Double、 資料行或 Boolean 資料型別。 
  
    + **替換為模式**：計算列的模式，並使用該模式作為列中每個缺失值的替換值。  
  
        適用於 Integer、 Double、 布林值或 Categorical 資料類型的資料行。 
  
    + **刪除整行**：完全刪除資料集中具有一個或多個缺失值的任何行。 如果遺漏值可視為隨機遺漏，此方法非常有用。  
  
    + **刪除整個列**：完全刪除資料集中具有一個或多個缺失值的任何列。  
  
    
  
6. 如果選擇了選項 **"自訂替換值**"，則選項 **"替換"值**可用。 鍵入一個新值，用作列中所有缺失值的替換值。  
  
    請注意，只能在具有整數、雙精度、布林或字串的列中使用此選項。
  
7. **生成缺失值指示器列**：如果要輸出列中的值是否符合缺少值清理的條件，請選擇此選項。 當您設置新的清潔操作並希望確保它按照設計工作時，此選項特別有用。
  
8. 提交管道。

### <a name="results"></a>結果

模組返回兩個輸出：  

-   **已清理的資料集**：由所選列組成的資料集，如果選擇該選項，則缺少的值以及指標列處理。  

    未選擇用於清潔的列也會"通過"。  
  
-  **清理轉換**：用於清理的資料轉換，可以保存在工作區中，並在以後應用於新資料。

### <a name="apply-a-saved-cleaning-operation-to-new-data"></a>將保存的清理操作應用於新資料  

如果需要經常重複清理操作，我們建議您將資料清理配方另存為*轉換*，以便使用相同的資料集。 如果必須經常重新導入，然後清除具有相同架構的資料，則保存清理轉換特別有用。  
      
1.  將["應用轉換](./apply-transformation.md)"模組添加到管道中。  
  
2.  添加要清理的資料集，並將資料集連接到右側輸入埠。  
  
3.  在設計器的左側窗格中展開 **"轉換"** 組。 找到保存的轉換並將其拖動到管道中。  

4.  將保存的轉換連接到[應用轉換](./apply-transformation.md)的左側輸入埠。 

    應用保存的轉換時，無法選擇要向其應用轉換的列。 這是因為轉換已定義，並自動應用於原始操作中指定的列。

    但是，假設您在數位列的子集上創建了一個變換。 您可以將此轉換應用於混合列類型的資料集，而不會引發錯誤，因為缺少的值僅在匹配的數位列中更改。

6.  提交管道。  

## <a name="next-steps"></a>後續步驟

請參閱 Azure 機器學習[可用的模組集](module-reference.md)。 