---
title: 關於服務網格
description: 取得服務網格、其架構和功能的總覽，以及您在選取要部署的條件時應考慮的條件。
author: paulbouwer
ms.topic: article
ms.date: 10/09/2019
ms.author: pabouwer
ms.openlocfilehash: eca49a3fac1ea0398ebe1d05bde20fbca3c81232
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/09/2020
ms.locfileid: "77594306"
---
# <a name="about-service-meshes"></a>關於服務網格

服務網狀提供的功能如流量管理、復原、原則、安全性、強式身分識別，以及可檢視性至您的工作負載。 您的應用程式會與這些操作功能分開，而服務網格會將它們移出應用層，並向下移至基礎結構層。

## <a name="scenarios"></a>案例

以下是當您使用服務網格時，可針對您的工作負載啟用的一些案例：

- 加密叢集中的**所有流量**-在叢集中指定的服務之間啟用相互 TLS。 這可延伸至網路周邊的輸入和輸出。 提供安全的預設選項，而不需要變更應用程式程式碼和基礎結構。

- 自動放大**和分段**推出-指定要路由傳送至叢集中一組新服務的流量子集條件。 成功測試全像發行版本時，移除條件式路由和階段會逐漸將所有流量的% 增加至新的服務。 最後，所有流量都會導向至新的服務。

- **流量管理和操作** -在服務上建立原則，以速率限制從特定來源到某個服務版本的所有流量。 或將重試策略套用至指定服務之間失敗類別的原則。 在遷移期間，將即時流量鏡像至新版本的服務。 在測試環境中的服務之間插入錯誤，以測試復原。

- **可檢視性** -深入瞭解您的服務如何連線到它們之間流動的流量。 取得叢集中所有流量的計量、記錄和追蹤，以及輸入/輸出。 將分散式追蹤功能新增至您的應用程式。

## <a name="architecture"></a>架構

服務網格通常是由控制平面和資料平面所組成。

**控制平面**有一些支援管理服務網格的元件。 這通常會包含可能是 UI 或 API 的管理介面。 通常也會有管理規則的元件，以及定義服務網格應如何執行特定功能的原則定義。 另外還有一些元件可管理安全性的層面，例如強式身分識別和適用于 mTLS 的憑證。 服務網格通常也會有計量或可檢視性元件，可收集和匯總工作負載的計量和遙測資料。

**資料平面**通常包含以透明方式插入至您的工作負載側車的 proxy。 此 proxy 設定為控制進出包含您工作負載之 pod 的所有網路流量。 這可讓 proxy 設定為透過 mTLS 保護流量、動態路由流量、將原則套用至流量，以及收集計量和追蹤資訊。 

![一般服務網格架構](media/servicemesh/typical-architecture.png)

## <a name="capabilities"></a>功能

每個服務網格都有很自然的配合，並且著重于支援特定的案例，但您通常會發現，大部分的功能都不會執行。

### <a name="traffic-management"></a>流量管理 

- **通訊協定** -第7層 (HTTP、grpc) 
- **動態路由** -條件式、加權、鏡像
- **復原** –超時、重試、斷路器
- **原則** -存取控制、速率限制、配額
- **測試** -錯誤插入

### <a name="security"></a>安全性

- **加密** -mTLS、憑證管理、外部 CA
- **強** 式身分識別-SPIFFE 或類似
- **驗證–驗證** 、authorisation

### <a name="observability"></a>可檢視性

- **計量** –黃金計量、prometheus、grafana
- **追蹤** -跨工作負載追蹤
- **流量** –叢集、輸入/輸出

### <a name="mesh"></a>網狀

- **支援的計算** -Kubernetes、虛擬機器
- **多** 叢集閘道，同盟

## <a name="selection-criteria"></a>選取準則

在您選取服務網格之前，請確定您瞭解您的需求，以及安裝服務網格的原因。 請嘗試詢問下列問題。

- **輸入控制器是否足以滿足我的需求？** -有時候在輸入時具有像 a/b 測試或流量分割這樣的功能，就足以支援所需的案例。 請勿在您的環境中增加複雜度，而不會有任何好處。

- **我的工作負載和環境是否可容忍額外的額外負荷？** -支援服務網格所需的所有其他元件都需要額外的資源，例如 cpu 和記憶體。 此外，所有 proxy 及其相關聯的原則檢查都會將延遲新增至您的流量。 如果您有相當於延遲的工作負載，或無法提供其他資源來涵蓋服務網格元件，則請重新考慮。

- **這是否會在不必要的情況下增加額外的複雜性？** -如果安裝服務網格的原因是要取得對企業或營運團隊來說不一定重要的功能，請考慮安裝、維護和設定的額外複雜性是否值得。

- **這可以採用漸進式方法來採用嗎？** -某些提供許多功能的服務網格可採用更累加的方式來採用。 只安裝您需要的元件，以確保您的成功。 當您更自信且需要額外的功能之後，請加以探索。 請避免從一開始就安裝 *所有專案* 。

如果在仔細考慮之後，您決定需要服務網格以提供所需的功能，則下一個決定是哪一個 *服務網格？*

請考慮下列領域，以及最符合您需求的區域。 這會引導您最適合您的環境和工作負載。 [接下來的步驟](#next-steps)一節將帶您深入瞭解特定服務網格的詳細資訊，以及它們如何對應至這些區域。

- **技術** -流量管理、原則、安全性、可檢視性

- **商業** -商業支援、FOUNDATION (CNCF) 、OSS 授權、治理

- **操作** –安裝/升級、資源需求、效能需求、整合 (計量、遙測、儀表板、工具、smi-s) 、混合的工作負載 (Linux 和 Windows 節點集區) 、計算 (Kubernetes、虛擬機器) 、多叢集

- **安全性** 驗證、身分識別、憑證管理與輪替、可插入的外部 CA


## <a name="next-steps"></a>後續步驟

下列檔提供有關服務網格的詳細資訊，您可以在 Azure Kubernetes Service (AKS) 上嘗試：

> [!div class="nextstepaction"]
> [深入瞭解 Istio .。。][istio-about]

> [!div class="nextstepaction"]
> [深入瞭解 Linkerd .。。][linkerd-about]

> [!div class="nextstepaction"]
> [深入瞭解 Consul .。。][consul-about]

您也可能想要探索 (SMI-S) 的服務網狀介面，這是 Kubernetes 上服務網格的標準介面：

- [服務網狀介面 (SMI-S) ][smi]


<!-- LINKS - external -->
[smi]: https://smi-spec.io/

<!-- LINKS - internal -->
[istio-about]: ./servicemesh-istio-about.md
[linkerd-about]: ./servicemesh-linkerd-about.md
[consul-about]: ./servicemesh-consul-about.md