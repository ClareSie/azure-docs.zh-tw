---
title: 錨定關係和尋路
description: 瞭解錨定關係背後的概念模型。 瞭解如何在空間內連接錨點，並使用"附近"API 來實現方法查找方案。
author: ramonarguelles
manager: vriveras
services: azure-spatial-anchors
ms.author: rgarcia
ms.date: 02/24/2019
ms.topic: conceptual
ms.service: azure-spatial-anchors
ms.openlocfilehash: f2fd8f4b7d03be8822c3ec12e2be589054942ce3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/27/2020
ms.locfileid: "74270606"
---
# <a name="anchor-relationships-and-way-finding-in-azure-spatial-anchors"></a>在 Azure 空間錨點中錨點關係和道路查找

通過使用錨點關係，您可以在空間中創建連接的錨點，然後提出以下問題：

* 附近有錨嗎？
* 他們有多遠？

## <a name="examples"></a>範例

在以下情況下，可以使用連接的錨點：

* 工人需要完成一項任務，即訪問工業工廠的各個地點。 工廠在每個位置都有空間錨點。 HoloLens 或移動應用程式可説明引導工作人員從一個位置到下一個位置。 應用首先詢問附近的空間錨點，然後引導工作人員到下一個位置。 應用程式直觀地顯示到下一個位置的一般方向和距離。

* 博物館在公共展覽中創建空間錨。 這些錨組成一個為期一小時的參觀博物館的基本公共展覽。 在公共顯示幕上，參觀者可以在行動裝置上打開博物館的混合現實應用程式。 然後，他們把手機攝像頭對準空間，查看旅遊中其他公共顯示幕的總體方向和距離。 當使用者走向公共顯示器時，應用會更新一般方向和距離，以説明引導使用者。

## <a name="set-up-way-finding"></a>設置方法查找

使用視線方向和錨點之間的距離來提供指導的應用程式是使用*尋路*。 尋路方式不同于逐圈導航。 在逐圈導航中，使用者被引導繞著牆壁、穿過門和在地板之間。 通過尋路，使用者會獲得有關目標總方向的提示。 但是，空間的推理或知識也可以説明使用者通過結構導航到目標。

要構建尋路體驗，請先為體驗準備一個空間，並開發使用者將與之交互的應用。 這些是概念步驟：

1. **規劃空間**：決定空間內哪些位置將成為尋路體驗的一部分。 在我們的場景中，工廠主管或博物館巡查協調員可能會決定在查找體驗中包括哪些地點。
2. **連接錨點**：訪問所選位置以創建空間錨點。 您可以在最終使用者應用的管理模式下或完全在不同的應用中執行此操作。 您將連接每個錨點或將每個錨點與其他錨點連接。 服務維護這些關係。
3. **開始最終使用者體驗**：使用者運行應用以查找錨點，該錨點可以位於任何選定的位置。 您的整體設計應確定使用者可以輸入體驗的位置。
4. **查找附近的錨點**：使用者找到錨點後，應用可以請求附近的錨點。 此過程返回設備和這些錨點之間的姿勢。
5. **指導使用者**：應用程式可以使用姿勢到每個錨點，以指導使用者的一般方向和距離。 例如，應用中的相機源可能會顯示一個圖示和箭頭，以表示每個潛在目標，如下圖所示。
6. **優化指南**：當使用者行走時，應用可以定期計算裝置和目標錨點之間的新姿勢。 應用繼續優化説明使用者到達目的地的指導提示。

    ![應用如何顯示道路查找指南的示例](./media/meeting-spot.png)

## <a name="connect-anchors"></a>連接錨點

要構建尋路體驗，首先需要將錨點放置在所選位置。 在本節中，我們將假定應用的管理員已完成此工作。

### <a name="connect-anchors-in-a-single-session"></a>在單個會話中連接錨點

要連接錨點：

1. 步行到第一個位置，並使用雲空間錨會話創建錨點 A。
2. 步行到第二個位置。 基礎 MR/AR 平臺跟蹤移動。
3. 使用相同的雲空間錨會話創建錨點 B。 錨點 A 和 B 現已連接。 空間錨點服務維護此關係。
4. 繼續其餘錨點的過程。

### <a name="connect-anchors-in-multiple-sessions"></a>在多個會話中連接錨點

您可以在多個會話上連接空間錨點。 使用此方法，可以一次創建和連接一些錨點，然後創建和連接更多錨點。

要在多個會話上連接錨點：

1. 該應用程式在一個雲空間錨會話中創建一些錨點。
2. 在不同的時間，應用通過使用新的 CloudSpatialAnchorSession 定位這些錨點之一（例如錨點 A）。
3. 步行到新位置。 底層的混合現實或增強現實平臺跟蹤運動。
4. 使用相同的雲空間錨會話創建錨點 C。 錨點 A、B 和 C 現已連接。 空間錨點服務維護此關係。

隨著時間的推移，您可以繼續此過程，以執行更多錨點和更多會話。

### <a name="verify-anchor-connections"></a>驗證錨點連接

應用可以通過為附近的錨點發出查詢來驗證兩個錨點是否連接。 當查詢的結果包含目標錨點時，將驗證錨點連接。 如果錨點未連接，應用可以嘗試再次連接它們。

以下是錨點可能無法連接的一些原因：

* 底層的混合現實或增強現實平臺在連接錨點的過程中失去了跟蹤。
* 由於在與空間錨點服務通信過程中出現網路錯誤，無法持久化錨點連接。

### <a name="find-sample-code"></a>尋找範例程式碼

要查找演示如何連接錨點和進行附近查詢的示例代碼，請參閱[空間錨點示例應用](https://github.com/Azure/azure-spatial-anchors-samples)。
