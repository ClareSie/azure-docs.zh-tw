---
title: 在 Azure IoT Central 應用程式中建立及執行工作 | Microsoft Docs
description: Azure IoT 中心作業允許批量裝置管理功能，例如更新屬性或執行命令。
ms.service: iot-central
services: iot-central
author: sarahhubbard
ms.author: sahubbar
ms.date: 03/03/2020
ms.topic: how-to
manager: peterpr
ms.openlocfilehash: c9d5a0daa364b09e45699e898511c28d4b4d92ce
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/28/2020
ms.locfileid: "80157750"
---
# <a name="create-and-run-a-job-in-your-azure-iot-central-application"></a>在 Azure IoT 中央應用程式中創建和運行作業

您可以使用 Microsoft Azure IoT Central 利用工作來大規模管理您的已連線裝置。 作業允許您對裝置屬性執行批量更新並運行命令。 本文介紹如何在您自己的應用程式中開始使用作業。

## <a name="create-and-run-a-job"></a>建立及執行工作

本節說明如何建立及執行工作。 它演示如何為一組物流網關設備設置光閾值。

1. 從左側窗格導航到**作業**。

2. 選擇 **= 新建**以創建新作業：

    ![建立新工作](./media/howto-run-a-job/createnewjob.png)

3. 輸入名稱和說明以標識要創建的工作。

4. 選擇要應用作業的目標設備組。 您可以在 **"摘要"** 部分查看作業配置應用於的設備數。

5. 接下來，選擇**雲屬性**、**屬性**或**命令**作為要配置的作業類型。 要設置**屬性**作業配置，請選擇屬性並設置其新值。 要設置**命令**，請選擇要運行的命令。 屬性作業可以設置多個屬性：

    ![設定工作](./media/howto-run-a-job/configurejob.png)

6. 創建作業後，選擇 **"運行"** 或 **"保存**"。 作業現在顯示在主**作業**頁上。 在此頁上，您可以看到當前正在運行的作業以及以前運行或保存的任何作業的歷史記錄。 您可以隨時再次打開已保存的作業以繼續編輯或運行它：

    ![檢視工作](./media/howto-run-a-job/viewjob.png)

    > [!NOTE]
    > 您可以查看以前運行的作業的 30 天歷史記錄。

7. 要獲取作業的概覽，請從清單中選擇要查看的作業。 此概述包含作業詳細資訊、設備和設備狀態值。 在此概述中，您還可以選擇 **"下載作業詳細資訊"** 以下載作業詳細資訊的 CSV 檔，包括設備及其狀態值。 此資訊可用於故障排除：

    ![檢視裝置狀態](./media/howto-run-a-job/downloaddetails.png)

### <a name="manage-a-job"></a>管理作業

要停止正在運行的作業之一，請打開它並選擇 **"停止**"。 作業狀態更改以反映作業將停止。 "**摘要"** 部分顯示哪些設備已完成、失敗或仍處於掛起狀態。

要運行當前已停止的作業，請選擇它，然後選擇"**運行**"。 作業狀態更改以反映作業現在再次運行。 "**摘要"** 部分繼續更新最新進度。

![管理作業](./media/howto-run-a-job/managejob.png)

## <a name="copy-a-job"></a>複製作業

要複製現有作業之一，請在**作業**頁上選擇它，然後選擇 **"複製**"。 將打開作業配置的副本供編輯，並將 **"副本"** 追加到作業名稱中。 您可以保存或運行新作業：

![複製作業](./media/howto-run-a-job/copyjob.png)

## <a name="view-the-job-status"></a>檢視工作狀態

創建作業後，"**狀態"** 列將更新作業的最新狀態訊息。 下表列出了可能的狀態值：

| 狀態訊息       | 狀態意義                                          |
| -------------------- | ------------------------------------------------------- |
| Completed            | 此工作已在所有裝置上執行。              |
| 失敗               | 此工作失敗而未在裝置上完整執行。  |
| Pending              | 此作業尚未開始在設備上執行。         |
| 執行中              | 此工作目前正在裝置上執行。             |
| 已停止              | 此工作已被使用者手動停止。           |

狀態訊息後跟作業中設備的概述。 下表列出了可能的設備狀態值：

| 狀態訊息       | 狀態意義                                                     |
| -------------------- | ------------------------------------------------------------------ |
| 成功            | 作業成功執行的設備數。       |
| 失敗               | 作業未能執行的設備數。       |

### <a name="view-the-device-status"></a>檢視裝置狀態

要查看作業和所有受影響的設備的狀態，打開該作業。 要下載包含作業詳細資訊（包括設備清單及其狀態值）的 CSV 檔，請選擇 **"下載作業詳細資訊**"。 在每個設備名稱旁邊，您會看到以下狀態訊息之一：

| 狀態訊息       | 狀態意義                                                                |
| -------------------- | ----------------------------------------------------------------------------- |
| Completed            | 工作已在此裝置上執行。                                     |
| 失敗               | 工作在此裝置上執行失敗。 錯誤訊息顯示更多資訊。  |
| Pending              | 作業尚未在此設備上執行。                                   |

> [!NOTE]
> 如果設備已被刪除，則無法選擇該設備。 它顯示為已刪除的裝置識別碼。

## <a name="next-steps"></a>後續步驟

現在，您已經瞭解如何在 Azure IoT 中央應用程式中創建作業，以下是後續步驟：

- [管理您的裝置](howto-manage-devices.md)
- [建立裝置範本版本](howto-version-device-template.md)
