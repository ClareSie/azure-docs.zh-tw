---
title: 如何：將確認新增至自訂命令
titleSuffix: Azure Cognitive Services
description: 在本文中，您將瞭解如何在自訂命令中執行命令的確認。
services: cognitive-services
author: singhsaumya
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 06/18/2020
ms.author: sausin
ms.openlocfilehash: 7d6c0928196c9e8e1abf6aa7f724a58753ce3d2a
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/09/2020
ms.locfileid: "87289038"
---
# <a name="add-interaction-rules"></a>新增互動規則

在本文中，您將瞭解 **互動規則**。 這些是處理更特定或複雜情況的額外規則。 雖然您可以自行撰寫自訂的互動規則，但在本文中，您將使用適用于下列目標案例的互動規則：

* 確認命令
* 將單步驟更正新增至命令

若要深入瞭解互動規則，請移至 [ [參考](./custom-commands-references.md) ] 區段。

## <a name="prerequisites"></a>Prerequisites

您必須已完成下列文章中的步驟：
> [!div class="checklist"]
> * [How To：使用簡單的命令來建立應用程式](./how-to-custom-commands-create-application-with-simple-commands.md)
> * [如何：將參數加入至命令](./how-to-custom-commands-add-parameters-to-commands.md)

## <a name="add-confirmations-to-a-command"></a>將確認新增至命令

若要新增確認，請使用 **>settemperature** 命令。 若要確認，您可以使用下列步驟來建立互動規則。

1. 選取左窗格中的 [ **>settemperature** ] 命令。
1. 在中間窗格中選取 [ **加入** ]，以新增互動規則。 然後選取 [**互動規則**  >  **確認] 命令**。

    此動作會新增三個互動規則，以要求使用者確認警示的日期和時間，並預期下一回合 (是/否) 的確認。

    1. 依據下列設定修改 **Confirm 命令** 互動規則：
        1. 重新命名 **名稱** 以 **確認溫度**。
        1. 新增條件作為必要的**參數**  >  **溫度**。
        1. 將新的動作新增為**類型**  >  **傳送語音回應**  >  **您確定要將溫度設定為 {溫度} 度嗎？**
        1. 保留 [**預期**] 區段中的 [**使用者必須確認**] 的預設值。
      
         > [!div class="mx-imgBorder"]
         > ![建立必要的參數回應](media/custom-speech-commands/add-validation-set-temperature.png)
    

    1. 修改 **確認** 成功的互動規則，以處理成功確認 (使用者說的是) 。
      
          1. 修改 **名稱** 以 **確認溫度成功**。
          1. 保留已存在的 **確認成功** 條件。
          1. 新增條件為**類型**  >  **所需的參數**  >  **溫度**。
          1. 將 **執行後狀態** 的預設值保留為 **執行完成規則**。

    1. 修改確認被拒時所發生的 **確認拒絕** 互動規則， (使用者未說) 。

          1. 修改 **名稱** 以 **確認溫度被拒**。
          1. 保留已存在的 **確認已拒絕** 的情況。
          1. 新增條件為**類型**  >  **所需的參數**  >  **溫度**。
          1. 將新的動作新增為**類型**  >  **傳送語音回應**  >  **無問題。接下來的溫度為何？**
          1. 將 **執行後狀態** 的預設值保留為 **等待使用者輸入**。

> [!IMPORTANT]
> 在本文中，您已使用內建的確認功能。 您也可以手動逐一新增互動規則。
   

### <a name="try-out-the-changes"></a>試用變更

選取 [ **定型**]、等候定型完成，然後選取 [ **測試**]。

- **輸入**：將溫度設定為80度
- **輸出**：您確定要將溫度設定為80度嗎？
- **輸入**：否
- **輸出**：沒問題。 接下來的溫度為何？
- **輸入**：72度
- **輸出**：您確定要將溫度設定為72度嗎？
- **輸入**：是
- **輸出**：確定，將溫度設定為83度


## <a name="implement-corrections-in-a-command"></a>在命令中執行更正

在本節中，您會設定一個步驟更正，以在執行履行動作之後使用。 您也會看到一個範例，說明如何在命令尚未完成時，根據預設啟用修正。 若要在命令未完成時新增更正，請新增參數 **AlarmTone**。

從左窗格中選取 [ **SetAlarm** ] 命令，然後加入新的參數 **AlarmTone**。
        
- **名稱**  > **AlarmTone**
- **類型**  > **字串**
- **預設值**  > **Chimes**
- **Configuration**設定  > **接受來自內部目錄的預先定義輸入值**
- **預先定義的輸入值**  > **Chimes**、**叮噹**和**Echo**作為個別預先定義的輸入


接下來，將 **DateTime** 參數的回應更新為 **Ready，以將警報器設定為 {AlarmTone}。什麼時候？**。 然後修改完成規則，如下所示：

1. 選取現有的完成規則 **ConfirmationResponse**。
1. 在右窗格中，將滑鼠停留在現有的動作上方，然後選取 [ **編輯**]。
1. 將語音回應更新為 **[確定]，為 {DateTime} 設定鬧鐘。鬧鐘語氣為 {AlarmTone}。**

### <a name="try-out-the-changes"></a>試用變更

選取 [ **定型**]、等候定型完成，然後選取 [ **測試**]。
請嘗試下列語句：

- **輸入**：設定警示。
- **輸出**：準備好使用 Chimes 來設定警報器。 這是什麼時候？
- **輸入**：將鬧鐘設定為叮噹在明天上午9點的語氣。
- **輸出**： [確定]，為 2020-05-30 09:00:00 設定鬧鐘。 警示語氣是叮噹。

> [!IMPORTANT]
> 在進行中的命令（例如，當命令尚未完成）時，不需要任何明確設定即可變更警示語氣。 *依預設會針對所有的命令參數啟用更正，不論是否已完成命令，都不會有任何回合號碼。*

### <a name="correction-when-command-is-completed"></a>命令完成時的更正

即使命令已完成，自訂命令平臺也會提供一步更正的功能。 預設不會啟用此功能。 必須明確設定它。 使用下列步驟來設定單一步驟的修正。

1. 在 **SetAlarm** 命令中，新增 type **update previous 命令** 的互動規則，以更新先前設定的警示。 重新命名互動規則的預設 **名稱** ，以 **更新先前**的警示。
1. 保留預設條件 [ **上一步] 命令必須更新** 為 [是]。
1. 將新條件加入為**類型**  >  **必要的參數**  >  **日期時間**。
1. 將新的動作新增為**類型**  >  **傳送語音回應**  >  **簡單編輯器**將先前的警示  >  **時間更新為 {DateTime}。**
1. 將 **執行後狀態** 的預設值保留為 **命令完成**。

### <a name="try-out-the-changes"></a>試用變更

選取 [ **定型**]、等候定型完成，然後選取 [ **測試**]。

- **輸入**：設定警示。
- **輸出**：準備好使用 Chimes 來設定警報器。 這是什麼時候？
- **輸入**：將鬧鐘設定為叮噹在明天上午9點的語氣。
- **輸出**： [確定]，為 2020-05-21 09:00:00 設定鬧鐘。 警示語氣是叮噹。
- **輸入**：否，上午8點。
- **輸出**：將先前的警示時間更新為 2020-05-29 08:00。

> [!NOTE]
> 在實際的應用程式中，在此更正規則的 [ **動作** ] 區段中，您也必須將活動傳回給用戶端，或呼叫 HTTP 端點來更新您系統中的警示時間。 此動作應該單獨負責更新警示時間，而不是命令的任何其他屬性。 在此情況下，這會是警示語氣。

## <a name="next-steps"></a>接下來的步驟

> [!div class="nextstepaction"]
> [如何：新增語音回應的語言產生範本](./how-to-custom-commands-add-language-generation-templates.md)
