---
title: 搭配 Azure IoT 中樞裝置布建服務使用的術語 |Microsoft Docs
description: 說明搭配裝置布建服務使用的常見術語 (DPS) 和 IoT 中樞
author: wesmc7777
ms.author: wesmc
ms.date: 09/18/2019
ms.topic: conceptual
ms.service: iot-dps
services: iot-dps
manager: eliotga
ms.openlocfilehash: b9fc37c6589cdd0bc6a5cdce7b7ebebe2c6e9a85
ms.sourcegitcommit: a43a59e44c14d349d597c3d2fd2bc779989c71d7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/25/2020
ms.locfileid: "96019441"
---
# <a name="iot-hub-device-provisioning-service-dps-terminology"></a>IoT 中樞裝置布建服務 (DPS) 術語

IoT 中樞裝置佈建服務是 IoT 中樞適用的協助程式服務，用於設定在指定 IoT 中樞上的全自動佈建裝置作業。 您可以使用裝置布建服務，以安全且可擴充的方式布[建數百萬部裝置。](about-iot-dps.md#provisioning-process)

裝置佈建程序分為兩個部分。 第一個部分是藉由 *註冊* 裝置，在裝置與 IoT 解決方案之間建立初始連線。 第二個部分是根據解決方案的特定需求套用正確的 *設定*。 這兩個步驟都完成之後，就已完整「佈建」該裝置。 裝置佈建服務會自動進行這兩個步驟，以提供順暢的裝置佈建體驗。

本文說明最適用於管理 *服務* 的佈建概念概觀。 本文與為裝置進行[雲端設定步驟](about-iot-dps.md#cloud-setup-step)，也就是部署準備工作的角色相關。

## <a name="service-operations-endpoint"></a>服務作業端點

服務作業端點是管理服務設定，和維護申請清單的端點。 只有服務管理員才能使用此端點；裝置不行。

## <a name="device-provisioning-endpoint"></a>裝置佈建端點

裝置佈建端點是所有裝置用來自動佈建的單一端點。 所有佈建服務執行個體都有相同的 URL，這樣就不需以供應鏈案例中的連線資訊重新刷新裝置。 識別碼範圍會確保租用戶隔離。

## <a name="linked-iot-hubs"></a>連結的 IoT 中樞

裝置佈建服務只能將裝置佈建到已和自身連結的 IoT 中樞。 將 IoT 中樞連結至裝置佈建服務的執行個體可為 IoT 中樞的裝置登錄提供該服務的讀/寫權限；這項連結可以讓裝置佈建服務申請裝置識別碼，以及在裝置對應項中進行初始設定。 連結的 IoT 中樞可能位於任何 Azure 區域。 您可以將其他訂用帳戶的中樞連結至佈建服務。


## <a name="allocation-policy"></a>配置原則

服務等級的設定決定裝置佈建服務將裝置指派給 IoT 中樞的方式。 共有三個支援的配置原則：

* **平均加權分佈**：裝置佈建到每個已連結 IoT 中樞的機率都是一樣的。 預設設定。 如果您只要將裝置佈建到一個 IoT 中樞，可以保留此設定。

* **最低延遲時間**：系統會以裝置的最低延遲時間將該裝置佈建到 IoT 中樞。 如果多個已連結 IoT 中樞都提供相同的最低延遲時間，佈建服務就能在這些中樞裡為裝置建立雜湊

* **透過申請清單進行靜態設定**：您在申請清單中指定的所需 IoT 中樞，其優先順序高於服務等級的配置原則。

* **自訂 (使用 Azure Function)**：自訂配置原則可讓您更充分掌控裝置指派給 IoT 中樞的方式。 此作業可藉由在 Azure 函式中使用自訂程式碼將裝置指派給 IoT 中樞來完成。 裝置布建服務會呼叫您的 Azure 函式程式碼，以提供裝置的所有相關資訊和您的程式碼註冊。 您的函式程式碼會執行並傳回用來佈建裝置的 IoT 中樞資訊。

## <a name="enrollment"></a>註冊

註冊是可透過自動佈建所註冊的裝置或裝置群組的記錄。 註冊記錄包含裝置或裝置群組的相關資訊，包括：
- 裝置所使用的[證明機制](#attestation-mechanism)
- 選擇性初始所需的設定
- 所需的 IoT 中樞
- 所需的裝置識別碼

裝置佈建服務支援兩種類型的註冊：

### <a name="enrollment-group"></a>申請群組

申請群組為一組共用特定證明機制的裝置。 註冊群組同時支援 x.509 和對稱式。 X.509 註冊群組中的所有裝置都有相同根或中繼憑證授權單位單位所簽署的 x.509 憑證 (CA) 。 對稱金鑰註冊群組中的每個裝置都有衍生自群組對稱金鑰的 SAS 權杖。 註冊群組名稱和憑證名稱必須是英數字元、小寫字母且可包含連字號。

> [!TIP]
> 對於一大批共用所需初始設定的裝置，或是全都設定為相同租用戶的裝置，我們建議使用申請群組。

### <a name="individual-enrollment"></a>個別申請

個別申請為表示可能已註冊之單一裝置的項目。 個別註冊可使用 X.509 分葉憑證或 SAS 權杖 (從實際或虛擬的 TPM) 來作為證明機制。 個別註冊中的註冊識別碼為英數字元、小寫字母且可包含連字號。 個別申請可能會指定所需的 IoT 中樞裝置識別碼。

> [!TIP]
> 對於需要唯一初始設定的裝置，或是只能透過 TPM 證明使用 SAS 權杖進行驗證的裝置，建議您使用個別註冊。


## <a name="attestation-mechanism"></a>證明機制

證明機制是用來確認裝置身分識別的方法。 證明機制是在註冊專案上設定，並告知布建服務在註冊期間驗證裝置身分識別時所使用的方法。

> [!NOTE]
> IoT 中樞會針對該服務中的類似概念使用「驗證配置」。

裝置佈建服務支援下列形式的證明：
* 以標準 X.509 憑證驗證流程為基礎的 **X.509 憑證**。 如需詳細資訊，請參閱 [x.509 證明](concepts-x509-attestation.md)。
* **信賴平台模組 (TPM)** 是以 nonce 挑戰為基礎，使用金鑰的 TPM 標準，提供已簽署的共用存取簽章 (SAS) 權杖。 這不需要裝置上的實體 TPM，但服務預期會使用每個 [TPM 規格](https://trustedcomputinggroup.org/work-groups/trusted-platform-module/)的簽署金鑰進行證明。如需詳細資訊，請參閱 [TPM 證明](concepts-tpm-attestation.md)。
* 以共用存取簽章為基礎的 **對稱金鑰** (SAS) [安全性權杖](../iot-hub/iot-hub-devguide-security.md#security-tokens)，其包含雜湊簽章和內嵌到期日。 如需詳細資訊，請參閱[對稱金鑰證明](concepts-symmetric-key-attestation.md)。


## <a name="hardware-security-module"></a>硬體安全模組

我們將硬體安全模組 (也稱為 HSM) 作為安全的硬體式裝置密碼儲存體使用，這是最安全的密碼儲存體。 X.509 憑證和 SAS 權杖都可以儲存在硬體安全模組 (HSM) 中。 硬體安全模組 (HSM) 可以和佈建服務支援的兩種證明機制搭配使用。

> [!TIP]
> 我們強烈建議裝置使用硬體安全模組 (HSM) 以在裝置上安全地儲存密碼。

您也可以將裝置密碼儲存在軟體 (記憶體) 上，但相較於硬體安全模組 (HSM)，該儲存方式比較不安全。



## <a name="id-scope"></a>識別碼範圍

使用者建立識別碼範圍，並且將其作為裝置將註冊之特定佈建服務的唯一識別碼範圍後，系統會將該範圍指派給裝置佈建服務。 服務會產生識別碼範圍且該範圍將維持不變，以確保唯一性。

> [!NOTE]
> 唯一性在長期執行部署作業及合併和收購的情況下很重要。


## <a name="registration"></a>註冊

註冊是記載裝置透過裝置佈建服務成功向 IoT 中樞申請以及佈建至該處的記錄。 系統會自動建立註冊記錄；您可以刪除但無法更新這些記錄。


## <a name="registration-id"></a>註冊識別碼

註冊識別碼可用來唯一識別裝置布建服務的裝置註冊。 每個裝置識別碼在佈建服務的[識別碼範圍](#id-scope)中都必須是獨一無二的。 每個裝置都必須要有註冊識別碼。 註冊識別碼為英數位元、不區分大小寫，而且可能包含特殊字元，包括冒號、句號、底線和連字號。

* 若為 TPM，TPM 本身會提供註冊識別碼。
* 若為 X.509 式證明方法，則會提供註冊識別碼作為憑證的主體名稱。

## <a name="device-id"></a>裝置識別碼

裝置識別碼是 IoT 中樞裡顯示的識別碼。 您可以在申請項目中設定想要的裝置識別碼，但這並非為必要設定。 只有個別註冊才支援設定所需的裝置識別碼。 如果未在申請清單中未指定任何想的裝置識別碼，系統會在您註冊裝置時使用註冊識別碼作為裝置識別碼。 深入了解 [IoT 中樞裡的裝置識別碼](../iot-hub/iot-hub-devguide-identity-registry.md)。



## <a name="operations"></a>作業

作業是裝置佈建服務的計費單位。 一個作業代表成功完成該服務需進行的一個指示。 作業包括裝置註冊和重新註冊，也包括服務端的變更，例如新增和更新申請清單項目。
