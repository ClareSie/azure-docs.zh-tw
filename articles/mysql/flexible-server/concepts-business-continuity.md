---
title: 商務持續性總覽-適用於 MySQL 的 Azure 資料庫彈性的伺服器
description: 瞭解適用於 MySQL 的 Azure 資料庫彈性伺服器的商務持續性概念
author: mksuni
ms.author: sumuth
ms.service: mysql
ms.topic: conceptual
ms.date: 09/21/2020
ms.openlocfilehash: c29e952e22aaccf31c10de8f6e16d240b4660a23
ms.sourcegitcommit: 80034a1819072f45c1772940953fef06d92fefc8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/03/2020
ms.locfileid: "93240710"
---
# <a name="overview-of-business-continuity-with-azure-database-for-mysql---flexible-server-preview"></a>使用適用於 MySQL 的 Azure 資料庫彈性的伺服器 (預覽) 來瞭解商務持續性

> [!IMPORTANT]
> 適用於 MySQL 的 Azure 資料庫 - 彈性伺服器目前處於公開預覽狀態。

適用於 MySQL 的 Azure 資料庫彈性的伺服器可在發生規劃和未規劃的中斷時，供應商務持續性功能來保護您的資料庫。 自動備份和高可用性等功能，會以不同的復原時間和資料遺失風險來解決不同層級的錯誤保護。 當您設計應用程式架構以防止發生錯誤時，您應該考慮復原時間目標 (RTO) 和復原點目標 (每個應用程式的 RPO) 。 RTO 是停機容錯和 RPO 是資料庫服務中斷之後的資料遺失容錯。

下表說明彈性伺服器所提供的功能。

| **功能** | **說明** | **限制** |
| ---------- | ----------- | ------------ |
| **備份 & 復原** | 彈性伺服器會自動執行資料庫檔案的每日備份，並持續備份交易記錄。 備份可以保留1到35天之間的任何時間。 您將能夠將資料庫伺服器還原到備份保留期限內的任何時間點。 復原時間會取決於要還原的資料大小，以及執行記錄復原的時間。 如需詳細資料，請參閱 [概念-備份和還原](./concepts-backup-restore.md) 。 |備份資料會保留在區域內 |
| **本機多餘備份** | 彈性的伺服器備份會自動並安全地儲存在區域和相同可用性區域內的本機多餘儲存體中。 本機多餘的備份會在主要區域中的單一實體位置內，將伺服器備份資料檔案複寫三次。 本地多餘的備份儲存體在指定的一年內提供至少 99.999999999% (11 個九) 物件的持久性。 如需詳細資料，請參閱 [概念-備份和還原](./concepts-backup-restore.md) 。| 適用于所有區域 |
| **區域備援高可用性** | 彈性的伺服器可以部署在高可用性模式中，它會在區域內的兩個不同的可用性區域中部署主要和待命伺服器。 這可防止區域層級的失敗，也有助於減少在規劃和未規劃的停機事件期間的應用程式停機時間。 來自主伺服器的資料會以同步方式複寫到待命複本。 在任何停機事件期間，資料庫伺服器會自動容錯移轉到待命複本。 如需詳細資訊，請參閱 [概念-高可用性](./concepts-high-availability.md) 。 | 在一般用途和記憶體優化計算層級中受到支援。 只有在有多個區域可用的區域中才可使用。|
| **進階檔案共用** | 資料庫檔案儲存在高度耐用且可靠的 Azure premium 檔案共用中，可提供資料複本，並在具有自動資料復原功能的可用性區域內儲存三份複本。 如需詳細資訊，請參閱 [Premium 檔案共用](../../storage/files/storage-how-to-create-premium-fileshare.md) 。 | 儲存在可用性區域內的資料 |

> [!IMPORTANT]
> 在預覽期間，不會提供任何執行時間、RTO 和 RPO SLA。 本頁面提供的詳細資料僅供您的資訊和規劃之用。

## <a name="planned-downtime-mitigation"></a>規劃的停機時間緩和

以下是一些會導致停機的規劃維護案例：

| **案例** | **處理**|
| :------------ | :----------- |
| **計算調整 (使用者)**| 當您執行計算調整規模作業時，會使用調整的計算設定來布建新的彈性伺服器。 在現有的資料庫伺服器中，允許使用中的檢查點完成，用戶端連接已清空，任何未認可的交易都會取消，然後關閉。 然後，儲存體會附加至新的伺服器，並在接受用戶端連線之前，視需要啟動資料庫以執行復原。 |
| **(Azure) 的新軟體部署** | 新推出的功能或錯誤修正會在服務的規劃維護期間自動發生，而且您可以排程這些活動發生的時間。 如需詳細資訊，請參閱 [檔](https://aka.ms/servicehealthpm)集，也請檢查您的 [入口網站](https://aka.ms/servicehealthpm) |
| **(Azure) 的次要版本升級** | 適用於 MySQL 的 Azure 資料庫會自動將資料庫伺服器修補為 Azure 所決定的次要版本。 它會在服務的已規劃維護過程中發生。 這會導致短暫的停機時間（以秒為單位），而且資料庫伺服器會自動以新的次要版本重新開機。 如需詳細資訊，請參閱 [檔](../concepts-monitoring.md#planned-maintenance-notification)集，也請檢查您的 [入口網站](https://aka.ms/servicehealthpm)。|

當彈性伺服器設定了 **區域冗余高可用性** 時，有彈性的伺服器會先在待命伺服器上執行作業，然後在不進行容錯移轉的主伺服器上執行作業。 如需詳細資訊，請參閱 [概念-高可用性](./concepts-high-availability.md) 。

## <a name="unplanned-downtime-mitigation"></a>非計畫的停機風險降低

未預期的停機時間可能會因未預期的失敗而發生，包括基礎硬體錯誤、網路問題和軟體錯誤。 如果資料庫伺服器意外中斷，且如果設定高可用性 [HA]，則會啟用待命複本。 如果沒有，則會自動布建新的資料庫伺服器。 雖然無法避免非計畫的停機時間，但有彈性的伺服器可在資料庫伺服器和儲存層自動執行復原作業，而不需要人為介入，藉此減少停機時間。

### <a name="unplanned-downtime-failure-scenarios-and-service-recovery"></a>未計畫的停機時間：失敗案例和服務復原

以下是一些未計畫的失敗案例和復原程式：

| **案例** | **復原進程 [非 HA]** | **復原程式 [HA]** |
| :---------- | ---------- | ------- |
| **資料庫伺服器失敗** | 如果資料庫伺服器因為某些基礎硬體錯誤而關閉，則會中斷使用中的連接，而且會中止任何傳遞交易。 Azure 會嘗試重新開機資料庫伺服器。 如果成功，則會執行資料庫復原。 如果重新開機失敗，資料庫伺服器將會嘗試在另一個實體節點上重新開機。  <br /> <br /> 復原時間 (RTO) 取決於各種因素，包括發生錯誤時的活動（例如大型交易），以及資料庫伺服器啟動程式期間要執行的復原量。 <br /> <br /> 使用 MySQL 資料庫的應用程式必須以其偵測和重試中斷的連接和失敗交易的方式來建立。  當應用程式重試時，連接會導向至新建立的資料庫伺服器。 | 如果偵測到資料庫伺服器失敗，則會啟動待命資料庫伺服器，從而減少停機時間。 如需詳細資訊，請參閱「 [HA 概念」頁面](concepts-high-availability.md) 。 RTO 應為60-120 秒，RPO = 0 |
| **儲存體失敗** | 應用程式不會看到任何儲存體相關問題的影響，例如磁片故障或實體區塊損毀。 當資料儲存在3個複本中時，資料複本會由存活的儲存區提供服務。 封鎖損毀會自動校正。 如果遺失資料複本，則會自動建立新的資料複本。 | 若為無法復原的錯誤，彈性伺服器會容錯移轉到待命複本，以減少停機時間。 如需詳細資訊，請參閱「 [HA 概念」頁面](./concepts-high-availability.md) 。 |
| **邏輯/使用者錯誤** | 從使用者錯誤（例如不小心卸載的資料表或不正確的資料）復原，牽涉到在發生錯誤之前的時間之前，藉由還原和復原資料，來執行 [時間點恢復](concepts-backup-restore.md) (PITR) 。<br> <br>  如果您只想要還原一部分的資料庫或特定的資料表，而不是資料庫伺服器中的所有資料庫，您可以在新的實例中還原資料庫伺服器，) 透過 [pg_dump](https://www.postgresql.org/docs/current/app-pgdump.html)將資料表匯出 (s，然後使用 [pg_restore](https://www.postgresql.org/docs/current/app-pgrestore.html) 將這些資料表還原至您的資料庫。 | 由於所有使用者作業也會複寫到待命，所以這些使用者錯誤不會受到高可用性的保護。 |
| **可用性區域失敗** | 雖然這是罕見的事件，但如果您想要從區域層級的失敗中復原，您可以使用備份來執行時間點復原，然後選擇 [自訂還原點] 以取得最新的資料。 新的彈性伺服器將會部署在另一個區域中。 還原所需的時間取決於先前的備份和要復原的交易記錄數目。 | 彈性的伺服器會執行自動容錯移轉至待命網站。 如需詳細資訊，請參閱「 [HA 概念」頁面](./concepts-high-availability.md) 。 |
| **區域失敗** | 預覽版尚未支援跨區域複本和異地還原功能。 | |

> [!IMPORTANT]
> 已刪除的伺服器 **無法** 還原。 如果您刪除伺服器，所有屬於該伺服器的資料庫也會一併刪除，且無法復原。 使用 [Azure 資源鎖定](../../azure-resource-manager/management/lock-resources.md) 來協助防止意外刪除您的伺服器。

## <a name="next-steps"></a>下一步

- 深入瞭解 [區域冗余高可用性](./concepts-high-availability.md)
- 瞭解[備份和](./concepts-backup-restore.md)復原
