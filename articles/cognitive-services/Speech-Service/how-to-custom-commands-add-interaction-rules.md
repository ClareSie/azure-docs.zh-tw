---
title: 如何：在自訂命令中新增確認
titleSuffix: Azure Cognitive Services
description: 在本文中，您將瞭解如何在自訂命令中執行命令的確認。
services: cognitive-services
author: singhsaumya
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 06/18/2020
ms.author: sausin
ms.openlocfilehash: f37109cc2677ad5ef18c5677bda9308a78cebccf
ms.sourcegitcommit: cec9676ec235ff798d2a5cad6ee45f98a421837b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "85851317"
---
# <a name="add-interaction-rules"></a>新增互動規則

在本文中，您將瞭解*互動規則*。 這些額外的規則會處理更具體或複雜的情況。 您可以撰寫自己的自訂互動規則，但在本文中，您會將互動規則用於下列目標案例：

* 確認命令
* 將單步驟更正新增至命令

若要深入瞭解互動規則，請移至[參考](./custom-commands-references.md)一節。

## <a name="prerequisites"></a>必要條件

您必須已完成下列文章中的步驟：
> [!div class="checklist"]
> * [使用簡單的命令建立應用程式](./how-to-custom-commands-create-application-with-simple-commands.md)
> * [將參數新增至命令](./how-to-custom-commands-add-parameters-to-commands.md)

## <a name="add-confirmations-to-a-command"></a>將確認新增至命令

若要新增確認，請使用**SetTemperature**命令。 若要完成確認，請使用下列步驟建立互動規則。

1. 在左窗格中選取 [ **SetTemperature** ] 命令。
1. 選取中間窗格中的 [**新增**] 來新增互動規則。 然後選取 [**互動規則**] [  >  **確認命令**]。

    此動作會新增三個互動規則。 此規則會要求使用者確認警示的日期和時間，並預期會進行確認（是/否）以進行下一回合。

    1. 依據下列設定，修改 [**確認命令**互動] 規則：
        1. 將**名稱**重新命名以**確認溫度**。
        1. 將新條件新增為 [**必要參數**  >  **溫度**]。
        1. 將新動作新增為**類型**  >  **傳送語音回應**  >  **您確定要將溫度設定為 {溫度} 度嗎？**
        1. 將 [**預期**] 區段中的預設值保留為 [**需要使用者確認**]。
      
         > [!div class="mx-imgBorder"]
         > ![建立必要的參數回應](media/custom-speech-commands/add-validation-set-temperature.png)
    

    1. 修改**確認成功**的互動規則，以處理成功的確認（使用者已說是）。
      
          1. 將**名稱**修改為**確認溫度已成功**。
          1. 保留已存在的**確認為成功**狀況。
          1. 將新條件新增為**Type**[  >  **必要參數**  >  **溫度**] 類型。
          1. 將 [**後續執行狀態**] 的預設值保留為 [**執行完成規則**]。

    1. 修改 [**確認拒絕**的互動] 規則，以在拒絕確認時處理案例（使用者說為 [否]）。

          1. 將 [**名稱**] 修改為**確認溫度被拒**。
          1. 保留已存在的 [**確認已拒絕**] 條件。
          1. 將新條件新增為**Type**[  >  **必要參數**  >  **溫度**] 類型。
          1. 將新動作新增為**類型**[  >  **傳送語音回應**] [  >  **否問題]。接下來的溫度為何？**
          1. 將 [**執行後狀態**] 的預設值保留為 [**等候使用者輸入**]。

> [!IMPORTANT]
> 在本文中，您已使用內建的確認功能。 您也可以手動逐一新增互動規則。
   

### <a name="try-out-the-changes"></a>試用變更

選取 [**定型**]，等待訓練完成，然後選取 [**測試**]。

- **輸入**：將溫度設定為80度。
- **輸出**：確定80？
- **輸入**：否。
- **輸出**：沒有問題。 接下來的溫度為何？
- **輸入**：83度。
- **輸出**：確定83？
- **輸入**：是。
- **輸出**： [確定]，將溫度設定為83度。


## <a name="implement-corrections-in-a-command"></a>在命令中執行更正

在本節中，您會設定一個步驟更正，這會在執行完成動作之後使用。 您也會看到一個範例，說明如何在命令尚未完成時預設啟用更正。 若要在命令未完成時加入更正，請新增參數**AlarmTone**。

從左窗格中選取 [ **SetAlarm** ] 命令，並加入新的參數**AlarmTone**。
        
- **名稱**  > **AlarmTone**
- **類型**  > **字串**
- **預設值**  > **Chimes**
- **Configuration**設定  > **接受來自內部目錄的預先定義輸入值**
- **預先定義的輸入值**  > **Chimes**、**叮噹**和**Echo**作為個別預先定義的輸入


接下來，請將**DateTime**參數的回應更新為 [就緒]，**以將警報器設定為 {AlarmTone}。有什麼時間？**。 然後修改完成規則，如下所示：

1. 選取現有的完成規則**ConfirmationResponse**。
1. 在右窗格中，將滑鼠停留在現有的動作上，然後選取 [**編輯**]。
1. 將語音回應更新為 **[確定]，設定 {DateTime} 的鬧鐘。鬧鐘音調為 {AlarmTone}。**

### <a name="try-out-the-changes"></a>試用變更

選取 [**定型**]，等待訓練完成，然後選取 [**測試**]。
試用下列語句：

- **輸入**：設定鬧鐘。
- **輸出**：準備好將警報器設定為 Chimes。 有什麼時間？
- **輸入**：將警示設定為叮噹為明天9點的聲。
- **輸出**：正常，已為 2020-05-30 09:00:00 設定警示。 鬧鐘音調為叮噹。

> [!IMPORTANT]
> 在進行中的命令中，若未進行任何明確設定，則可以變更警示音調，例如，當命令尚未完成時。 *根據預設，所有命令參數都會啟用更正，不論此命令尚未完成，都是使用 [回合編號]。*

### <a name="correction-when-command-is-completed"></a>完成命令時的更正

自訂命令平臺也會提供單一步驟修正的功能，即使命令已經完成也一樣。 預設不會啟用此功能。 必須明確設定。 使用下列步驟來設定單步驟更正。

1. 在**SetAlarm**命令中，新增類型 [**更新上一個] 命令**的互動規則，以更新先前設定的警示。 重新命名互動規則的預設**名稱**，以**更新先前**的警示。
1. 保留預設條件 [**先前的命令需要更新**]。
1. 將新條件新增為**Type**  >  **必要的參數**  >  **DateTime**類型。
1. 新增新動作，做為**類型**  >  **傳送語音回應**  >  **簡單編輯器**將先前的警示  >  **時間更新至 {DateTime}。**
1. 將 [**執行後狀態**] 的預設值保留為 [**命令已完成**]。

### <a name="try-out-the-changes"></a>試用變更

選取 [**定型**]，等待訓練完成，然後選取 [**測試**]。

- **輸入**：設定鬧鐘。
- **輸出**：準備好將警報器設定為 Chimes。 有什麼時間？
- **輸入**：將警示設定為叮噹為明天9點的聲。
- **輸出**：正常，已為 2020-05-21 09:00:00 設定警示。 鬧鐘音調為叮噹。
- **輸入**：否，上午8點。
- **輸出**：將先前的鬧鐘時間更新為 2020-05-29 08:00。

> [!NOTE]
> 在實際的應用程式中，在此更正規則的 [**動作**] 區段中，您也必須將活動傳送回用戶端或呼叫 HTTP 端點，以更新您系統中的警示時間。 此動作應該單獨負責更新警示時間，而不是命令的任何其他屬性。 在此情況下，這會是警示音調。

## <a name="next-steps"></a>後續步驟

> [!div class="nextstepaction"]
> [如何：新增語音回應的語言產生範本](./how-to-custom-commands-add-language-generation-templates.md)
