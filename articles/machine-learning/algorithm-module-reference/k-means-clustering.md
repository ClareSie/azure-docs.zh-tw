---
title: K-表示叢集：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何在 Azure Machine Learning 中使用 K 意指叢集模組來定型群集模型。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/19/2020
ms.openlocfilehash: 9606768288cc74afc24491149eb471944f45e2dc
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "77921159"
---
# <a name="module-k-means-clustering"></a>模組： K-表示群集

本文說明如何在 Azure Machine Learning 設計工具（預覽）中使用*K 意指*叢集模組，以建立未定型的 k 意義群集模型。 
 
K-表示是其中一個最簡單且最知名的*不受監督*學習演算法。 您可以使用演算法來進行各種機器學習工作，例如： 

* 偵測[異常資料](https://msdn.microsoft.com/magazine/jj891054.aspx)。
* 群集文字檔。
* 在您使用其他分類或回歸方法之前，先分析資料集。 

若要建立群集模型，您可以：

* 將此模組新增至您的管線。
* 串連資料組。
* 設定參數，例如您預期的叢集數目、用來建立叢集的距離度量等等。 
  
設定模組超參數之後，您可以將未定型的模型連接到[訓練叢集模型](train-clustering-model.md)。 因為 K 表示演算法是不受監督學習方法，所以標籤資料行是選擇性的。 

+ 如果您的資料包含標籤，您可以使用標籤值來引導選取叢集，並將模型優化。 

+ 如果您的資料沒有標籤，演算法會根據資料，建立代表可能分類的叢集。  

##  <a name="understand-k-means-clustering"></a>瞭解 K 意指叢集
 
一般而言，叢集會使用反復的技術，將資料集中的案例分組至具有類似特性的群集。 這些群組適用于流覽資料、識別資料中的異常，最後是進行預測。 群集模型也可協助您識別資料集內的關聯性，而您可能不會透過流覽或簡單的觀察來以邏輯方式衍生。 基於這些理由，叢集通常用於機器學習工作的早期階段，以探索資料並探索非預期的相互關聯。  
  
 當您使用 K 意指方法設定群集模型時，您必須指定目標數位*K* ，以指出您想要在模型中*距心*的數目。 距心是代表每個叢集的一個點。 K 表示演算法會將每個內送資料點指派給其中一個叢集，方法是將叢集中的平方總和降至最低。 
 
當它處理定型資料時，K 表示演算法會從一組初始的隨機播放距心開始。 距心可做為叢集的起點，並會套用羅依的演算法，以反復縮小其位置。 K 表示演算法會在符合一或多個下列條件時，停止建立和調整叢集：  
  
-   距心穩定，這表示個別點的叢集指派不再變更，而且演算法已在解決方案上聚合。  
  
-   演算法會完成執行指定的反覆運算次數。  
  
 完成訓練階段之後，您可以使用 [[將資料指派給](assign-data-to-clusters.md)叢集] 模組，將新案例指派給您使用 K 型演算法找到的其中一個群集。 您可以藉由計算新案例和每個叢集的距心之間的距離來執行叢集指派。 每個新案例都會指派給具有最接近距心的叢集。  

## <a name="configure-the-k-means-clustering-module"></a>設定 K 意指叢集模組
  
1.  將**K 意指**叢集模組新增至您的管線。  
  
2.  若要指定您想要如何訓練模型，請選取 [**建立定型模式]** 選項。  
  
    -   **單一參數**：如果您知道要在群集模型中使用的確切參數，您可以提供一組特定值做為引數。  
  
3.  針對 [**距心數目**]，輸入您想要開始使用演算法的叢集數目。  
  
     模型不保證會產生確切的叢集數目。 此演算法會以此數目的資料點開始，並逐一查看以尋找最佳設定。  
  
4.  屬性**初始化**是用來指定用來定義初始叢集設定的演算法。  
  
    -   **前 N**個：從資料集選擇了一些初始的資料點數目，並做為初始方式使用。 
    
         這個方法也稱為*Forgy 方法*。  
  
    -   **隨機**：演算法會隨機將資料點放在叢集中，然後計算初始平均值，以作為叢集隨機指派點的距心。 

         這個方法也稱為亂數據*分割*方法。  
  
    -   **K-表示 + +**：這是初始化叢集的預設方法。  
  
         Arthur 和 Sergei Vassilvitskii 在2007中提議了**k 意指 + +** 演算法，以避免標準的 K 意指演算法的叢集不佳。 **K-表示 + +** 使用不同的方法來選擇初始叢集中心，以改善標準的 k 表示。  
  
    
5.  針對 [**亂數字種子**]，選擇性地輸入要用來做為叢集初始化之種子的值。 此值可能會對叢集選取造成重大影響。  
  
6.  針對 [**度量**]，選擇要用於測量叢集向量之間的距離，或新資料點與隨機播放的距心之間的距離。 Azure Machine Learning 支援下列叢集距離計量：  
  
    -   **Euclidean**： Euclidean 距離通常用來做為 K 表示叢集的叢集散佈值。 此為慣用度量，因為它可以將點與距心之間的平均距離縮到最短。
  
7.  針對 [反復專案]，輸入演算法在完成距心選取**之前，應該**反覆運算定型資料的次數。  
  
     您可以調整此參數，以平衡定型時間的準確度。  
  
8.  針對 [**指派標籤模式]**，選擇一個選項來指定標籤資料行是否存在於 dataset 中，應加以處理。  
  
     因為 K 表示叢集是不受監督的機器學習方法，所以標籤是選擇性的。 不過，如果您的資料集已經有標籤資料行，您可以使用這些值來引導叢集的選取範圍，或者您可以指定忽略這些值。  
  
    -   **略過標籤資料行**： [標籤] 資料行中的值會被忽略，而且不會用於建立模型。
  
    -   **填滿遺漏值**：標籤資料行值是用來協助建立叢集的功能。 如果有任何資料列遺漏標籤，則會使用其他功能來插補此值。  
  
    -   **從最接近中心覆寫**：標籤資料行值會以預測的標籤值取代，並使用最接近目前距心的點標籤。  

8.  如果您想要在定型之前先標準化功能，請選取 [正規化**功能**] 選項。
  
     如果您套用正規化，在定型之前，資料點會 `[0,1]` 依 MinMaxNormalizer 正規化。

10. 將模型定型。  
  
    -   如果您將 [**建立定型模式]** 設定為 [**單一參數**]，請加入已加上標籤的資料集，並使用[訓練叢集模型](train-clustering-model.md)模組來定型模型。  
  
## <a name="results"></a>結果

在您完成模型的設定和定型之後，您會有一個可用於產生分數的模型。 不過，有多種方式可以定型模型，以及多種方式來查看和使用結果： 

### <a name="capture-a-snapshot-of-the-model-in-your-workspace"></a>在您的工作區中捕捉模型的快照集

如果您使用[訓練叢集模型](train-clustering-model.md)模組：

1. 選取 [**定型叢集模型**] 模組，然後開啟右面板。

2. 選取 [**輸出**] 索引標籤。選取 [**註冊資料集**] 圖示，以儲存定型模型的複本。

儲存的模型代表您在儲存模型時的定型資料。 如果您稍後更新管線中使用的定型資料，它就不會更新已儲存的模型。 

### <a name="see-the-clustering-result-dataset"></a>查看群集結果資料集 

如果您使用[訓練叢集模型](train-clustering-model.md)模組：

1. 以滑鼠右鍵按一下 [**定型群集模型**] 模組。

2. 選取 [**視覺化**]。

### <a name="tips-for-generating-the-best-clustering-model"></a>產生最佳群集模型的秘訣  

已知在叢集期間使用的*植*入程式可能會大幅影響模型。 植入表示指向潛在距心的初始位置。
 
例如，如果資料集包含許多極端值，而選擇了極端項來植入叢集，則沒有其他資料點適合該叢集，而且叢集可以是單一的。 也就是說，它可能只有一個點。  
  
您可以透過幾個方法來避免這個問題：  
  
-   變更距心的數目，並嘗試多個種子值。  
  
-   建立多個模型、改變度量或逐一查看。  
  
一般而言，使用群集模型時，任何指定的設定都可能會導致本機優化的叢集集。 換句話說，模型所傳回的叢集集只會符合目前的資料點，而無法歸納成其他資料。 如果您使用不同的初始設定，K 意指方法可能會發現不同、更上層的設定。 

## <a name="next-steps"></a>後續步驟

請參閱 Azure Machine Learning 的[可用模組集](module-reference.md)。 
