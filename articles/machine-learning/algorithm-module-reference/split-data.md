---
title: 分割資料：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何使用 Azure Machine Learning 中的 [分割資料] 模組，將資料集分成兩個不同的集合。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/22/2019
ms.openlocfilehash: a4c93b12ad654e54a7f3c7ee0e75507d5cb45e90
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/09/2020
ms.locfileid: "90907816"
---
# <a name="split-data-module"></a>分割資料模組

本文描述 Azure Machine Learning 設計工具中的模組。

您可以使用 [分割資料] 模組，將資料集分成兩個不同的集合。

當您需要將資料分成定型集和測試集時，此模組很有用。 您也可以自訂資料的分割方式。 某些選項支援隨機的資料。 其他則是針對特定資料類型或模型類型而量身訂做。

## <a name="configure-the-module"></a>設定模組

> [!TIP]
> 選擇分割模式之前，請先閱讀所有選項，以決定所需的分割類型。
> 如果您變更分割模式，可能會重設所有其他選項。

1. 在設計工具中，將 **分割資料** 模組新增至您的管線。 您可以在 [ **資料轉換**] 下的 [ **範例和分割** ] 分類中找到此模組。

1. **分割模式**：根據您擁有的資料類型以及您要如何分割，選擇下列其中一個模式。 每個分割模式都有不同的選項。

   - **分割資料列**：如果您只想要將資料分割成兩個部分，請使用此選項。 您可以指定要放在每個分割中的資料百分比。 依預設，資料會分割為50/50。

     您也可以在每個群組中隨機化選取的資料列，並使用分層取樣。 在分層取樣中，您必須選取您想要在兩個結果資料集內平均分配值的單一資料行。  

   - **正則運算式分割**：當您想要藉由測試單一資料行的值來分割資料集時，請選擇此選項。

     例如，如果您要分析情感，您可以在文字欄位中檢查特定產品名稱是否存在。 然後，您可以將資料集分割成具有目標產品名稱和資料列的資料列，而不使用目標產品名稱。

   - **相對運算式分割**：每當您想要將條件套用至數位資料行時，請使用此選項。 此數位可以是日期/時間欄位、包含年齡或金額的資料行，或甚至是百分比。 例如，您可能會想要根據專案的成本來分割資料集、依年齡範圍將人員分組，或依行事曆日期來分隔資料。

### <a name="split-rows"></a>分割資料列

1. 將 [ [分割資料](./split-data.md) ] 模組新增至設計工具中的管線，然後連接您要分割的資料集。
  
1. 針對 [分割 **模式]**，選取 [ **分割資料列**]。 

1. **第一個輸出資料集中**的資料列比例：使用此選項來決定要將多少資料列放入第一個 (左邊) 輸出。 所有其他資料列都會進入第二個 (右側) 輸出。

   比率代表傳送至第一個輸出資料集的資料列百分比，因此您必須輸入介於0和1之間的十進位數。
     
   例如，如果您輸入 **0.75** 作為值，資料集將會分割75/25。 在此分割中，75% 的資料列會傳送至第一個輸出資料集。 剩餘的25% 將會傳送至第二個輸出資料集。
  
1. 如果您想要將選取的資料隨機放入這兩個群組中，請選取 [ **隨機化分割** ] 選項。 當您要建立定型和測試資料集時，這是慣用的選項。

1. **隨機種子**：輸入非負整數值，以啟動要使用的實例的非虛擬亂數序列。 所有會產生隨機數字的模組中都使用此預設種子。 

   指定種子可重現結果。 如果您需要重複分割作業的結果，您應該指定亂數產生器的種子。 否則，隨機種子會預設設定為 **0**，這表示會從系統時鐘取得初始種子值。 如此一來，每次執行分割時，資料分佈可能稍有不同。 

1. **分層分割**：將此選項設定為 **True** ，以確定兩個輸出資料集包含 *分層資料行* 或分層索引鍵資料 *行*中值的代表性樣本。 

   使用分層取樣時，資料會分割，讓每個輸出資料集的每個目標值大致相同。 例如，您可能會想要確保定型和測試集大致上與結果相關，或其他資料行 (例如性別) 。

1. 提交管線。


## <a name="select-a-regular-expression"></a>選取正則運算式

1. 將 [分割資料](./split-data.md) 模組新增至您的管線，並將它連接為您要分割的資料集輸入。  
  
1. 針對 [ **分割模式]**，選取 [ **正則運算式分割**]。

1. 在 [ **正則運算式** ] 方塊中，輸入有效的正則運算式。 
  
   正則運算式應遵循正則運算式的 Python 語法。

1. 提交管線。

   根據您提供的正則運算式，資料集會分割成兩個數據列集：值符合運算式的資料列和所有剩餘的資料列。 

下列範例示範如何使用 **正則運算式** 選項來分割資料集。 

### <a name="single-whole-word"></a>單一整個單字 

此範例會將包含資料行中文字的所有資料列放入第一個資料集 `Gryphon` `Text` 。 它會將其他資料列放入 **分割資料**的第二個輸出中。

```text
    \"Text" Gryphon  
```

### <a name="substring"></a>Substring

這個範例會在資料集的第二個數據行內的任何位置尋找指定的字串。 位置會以索引值1表示。 該比對會區分大小寫。

```text
(\1) ^[a-f]
```

第一個結果資料集包含索引資料行以下列其中一個字元開頭的所有資料列： `a` 、 `b` 、 `c` 、 `d` 、 `e` 、 `f` 。 所有其他資料列都會導向至第二個輸出。

## <a name="select-a-relative-expression"></a>選取相對運算式

1. 將 [分割資料](./split-data.md) 模組新增至您的管線，並將它連接為您要分割的資料集輸入。
  
1. 針對 [ **分割模式]**，選取 [ **相對運算式**]。
  
1. 在 [ **關聯運算式** ] 方塊中，輸入在單一資料行上執行比較作業的運算式。

   針對 **數值資料行**：
   - 此資料行包含任何數值資料類型的數位，包括日期和時間資料類型。
   - 運算式可以參考最多一個資料行名稱。
   - 針對 AND 運算，請使用連字號字元 `&` 。 針對或運算使用管道字元（ `|` ）。
   - 以下是支援的運算子： `<` 、 `>` 、 `<=` 、 `>=` 、 `==` 、 `!=` 。
   - 您無法使用和來群組 `(` 作業 `)` 。
   
   針對 **字串資料行**：
   - 以下是支援的運算子： `==` 、 `!=` 。

1. 提交管線。

   運算式會將資料集分割成兩個數據列集：值符合條件的資料列，以及所有剩餘的資料列。

下列範例示範如何使用**分割資料**模組中的**相對運算式**選項來分割資料集。  

### <a name="calendar-year"></a>日曆年度

常見的案例是依年份分割資料集。 下列運算式會選取資料行中的值大於的所有資料列 `Year` `2010` 。

```text
\"Year" > 2010
```

日期運算式必須考慮資料行中包含的所有日期部分。 資料行中的日期格式必須一致。 

例如，在使用格式的日期資料行中 `mmddyyyy` ，運算式應該類似如下：

```text
\"Date" > 1/1/2010
```

### <a name="column-index"></a>資料行索引

下列運算式示範如何使用資料行索引，在資料集的第一個資料行中選取所含的值小於或等於為 30、但不等於 20 的所有資料列。

```text
(\0)<=30 & !=20
```


## <a name="next-steps"></a>後續步驟

請參閱 Azure Machine Learning 的[可用模組集](module-reference.md)。 
