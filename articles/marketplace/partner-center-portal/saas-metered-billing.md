---
title: 使用 Microsoft 商用 marketplace 計量服務進行 SaaS 供應專案的計量計費
description: 瞭解使用商用 marketplace 計量服務之 SaaS 供應專案的彈性計費模型。
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 05/08/2020
author: mingshen-ms
ms.author: mingshen
ms.openlocfilehash: 8bcea36b99ae51da256d6b4fc49a4e3965a8c82c
ms.sourcegitcommit: b6f3ccaadf2f7eba4254a402e954adf430a90003
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/20/2020
ms.locfileid: "92279177"
---
# <a name="metered-billing-for-saas-using-the-commercial-marketplace-metering-service"></a>使用商用 marketplace 計量服務進行 SaaS 的計量計費

您可以使用商業 marketplace 計量服務來建立軟體即服務 (SaaS) 供應專案，這些供應專案會根據非標準單位收費。 將 SaaS 供應專案發佈至商用 marketplace 之前，您必須定義計費維度，例如已處理的頻寬、票證或電子郵件。  然後，客戶會根據這些維度的耗用量支付費用，並讓您的系統透過計費事件的商業 marketplace 計量服務 API 來通知 Microsoft。  

## <a name="prerequisites-for-metered-billing"></a>計量計費的必要條件

針對要使用計量付費的 SaaS 供應專案，它必須先：

- 請依照在[商業市集中建立 SaaS 供應](../create-new-saas-offer.md)專案中所述，來符合[透過 Microsoft 供應專案銷售](../plan-saas-offer.md#listing-options)的所有供應專案需求。
- 與 [SaaS 履行 api](./pc-saas-fulfillment-api-v2.md) 整合，可讓客戶布建並聯機至您的供應專案。  
- 針對您的服務收取客戶的費用時，請針對「一般 **費率** 」定價模式進行設定。  維度是一般費率定價模型的選擇性延伸。 

然後，SaaS 供應專案可以與 [商業 marketplace 計量服務 api](./marketplace-metering-service-apis.md) 整合，以通知 Microsoft 可計費事件。

>[!Note]
>Marketplace 計量服務僅適用于一般費率計費模型，不適用於每個使用者計費模型。

## <a name="how-metered-billing-fits-in-with-pricing"></a>計量付費如何以價格納入

瞭解供應專案階層對於定義供應專案及其定價模型而言很重要。

- 每個 SaaS 供應專案都設定為透過 Microsoft 銷售。  發佈供應專案之後，就無法變更此選項。
- 每個 SaaS 供應專案（設定為透過 Microsoft 銷售）都可以有一或多個方案。  使用者訂閱 SaaS 供應專案，但它是在方案內容中透過 Microsoft 購買的。
- 每個方案都有相關聯的計價模式： [一般 **費率** ] 或 [ **每個使用者**]。 供應專案中的所有方案都必須與相同的定價模型相關聯。 例如，不能有供應專案具有一般費率定價模型的方案，另一個則是每個使用者的定價模型。
- 在針對一般費率計費模型設定的每個方案內，至少會包含一筆週期性費用 (其中包含 $0) ：
    - **每**月週期性費用：當使用者購買方案時，依每月週期預先支付的固定月費。
    - 週期性 **年度** 費用：當使用者購買方案時，會在年度週期預先支付的一般年度費用。
- 除了週期性費用之外，一般費率方案也可以包含選擇性的自訂維度，以用來向客戶收取未包含在一般費率內的超額使用量。  每個維度都代表您的服務會使用 [商業 marketplace 計量服務 API](./marketplace-metering-service-apis.md)與 Microsoft 通訊的可計費單位。

## <a name="sample-offer"></a>範例供應專案

例如，Contoso 是具有稱為 Contoso Notification Services (CN) 之 SaaS 服務的發行者。 CN 可讓其客戶透過電子郵件或文字傳送通知。 Contoso 會註冊為商業市場方案合作夥伴中心中的發行者，以將 SaaS 供應專案發佈給 Azure 客戶。  有兩個與 CN 相關聯的計畫，如下所述：

- 基本方案
    - 針對 $ 0/月傳送10000個電子郵件和1000文字 (的每月固定費用) 
    - 超過10000電子郵件，每100個電子郵件的費用為 $1
    - 除了1000文字之外，每個文字都需支付 $0.02

    [![基本方案定價](./media/saas-basic-pricing.png "按一下以放大視圖")](./media/saas-basic-pricing.png)

- 進階方案
    - 針對 $ 350/月或5M 電子郵件傳送50000個電子郵件和10000文字，並針對每年 $3500 傳送1萬個文字
    - 超過50000電子郵件，每100個電子郵件的費用為 $0。5
    - 除了10000文字之外，每個文字都需支付 $0.01

    [![Premium 方案定價](./media/saas-premium-pricing.png "按一下以放大視圖")](./media/saas-premium-pricing.png)

- 企業方案
    - 傳送不限數目的電子郵件和50000每月 $ 400 的文字
    - 超過50000的每個 txt 的文字費用 $0.005

    [![企業方案定價](./media/saas-enterprise-pricing.png "按一下以放大視圖")](./media/saas-enterprise-pricing.png)

根據選取的方案，對 CN SaaS 供應專案的 Azure 客戶購買訂用帳戶，將能夠依訂用帳戶詳細資料中顯示的每個訂用帳戶期限 (month 或 year 來傳送內含數量的文字和電子郵件) 。  Contoso 會將使用量計算到包含的數量，而不會將任何使用量事件傳送給 Microsoft。 當客戶取用超過內含數量時，不需要變更方案或採取任何不同的動作。  Contoso 會測量超過內含數量的超額部分，並開始發出使用量事件給 Microsoft，以使用 [商業 marketplace 計量服務 API](./marketplace-metering-service-apis.md)來收取超額使用量。  Microsoft 接著會向客戶收取自訂維度中發行者所指定之超額使用量的費用。 超額計費是在下一個計費週期 (每月進行，但可能是某些客戶) 的每季或早期。  針對每月的一般費率方案，將會在發生超額部分的每個月進行超額計費。  針對每年的一般費率方案，一旦取用每年基底所含的數量時，自訂計量所發出的所有額外使用量都會以每個計費週期的超額部分計費， (每月) 到訂用帳戶的年度期限結束為止。

## <a name="billing-dimensions"></a>帳單維度

每個計費維度都會定義 ISV 可以用來發出使用事件的自訂單位。  帳單維度也用來與客戶溝通，以瞭解其使用軟體的計費方式。  其定義如下：

- **識別碼**：發出使用事件時參考的不可變維度識別碼。
- **顯示名稱**：與維度相關聯的顯示名稱，例如「傳送的文字訊息」。
- **測量單位**：計費單位的描述，例如「每個文字訊息」或「每100電子郵件」。
- **每單位價格（以美元**為單位）：維度一個單位的價格。  它可以是0。 
- **每月包含的每月數量**：每月包含的維度數量，用於支付週期性每月費用的客戶，必須是整數。 它可以是0或無限制。
- **包含在基底中的年度數量**：每年包含的維度數量，適用于支付週期性年度費用的客戶必須是整數。 可以是0或無限制。

帳單維度可在供應專案的所有方案間共用。  某些屬性會套用至所有方案的維度，而其他屬性則適用于方案專屬。

定義維度本身的屬性會跨供應專案的所有方案共用。  在您發行供應專案之前，對這些屬性從任何計畫的內容進行的變更，都會影響所有方案的維度定義。  發佈供應專案之後，就無法再編輯這些屬性。  這些屬性包括：

- 識別碼
- 顯示名稱
- 測量單位

維度的其他屬性是每個計畫特有的屬性，而且可以有不同的計畫值。  在發行計畫之前，您可以編輯這些值，而且只會影響此計畫。  一旦您發行方案之後，這些屬性將無法再進行編輯。  這些屬性包括：

- 每單位價格（以美元為單位）
- 基底中包含的每月數量  
- BaseIncluded 中包含的年度數量  

維度也有兩個特殊概念：「已啟用」和「無限」：

- [**已啟用**] 表示此方案參與這個維度。  如果您要建立的新方案不會根據此維度傳送使用狀況事件，您可能會想要將此選項保留為未核取。  此外，在第一次發行方案之後新增的任何新維度，在已發行的計畫中都會顯示為「未啟用」。  已停用的維度將不會顯示在客戶所見之計畫的任何維度清單中。
- **無限** 符號 "∞" 表示的無限，表示此計畫會參與這個維度，但不會針對此維度發出使用方式。  如果您想要向客戶指出此維度所代表的功能是否包含在方案中，但沒有使用量限制。  具有無限使用量的維度會顯示在客戶所見之計畫的維度清單中，並指出它永遠不會產生此方案的費用。

>[!Note] 
>明確支援下列案例： <br> -您可以將新的維度加入至新的方案。  將不會針對任何已發行的方案啟用新的維度。 <br> -您可以發佈沒有任何維度的一般 **費率** 方案，然後加入新的計畫，並為該方案設定新的維度。 新的維度將不會針對已發行的方案啟用。

### <a name="setting-dimension-price-per-unit-per-supported-market"></a>為每個支援的市場設定每單位的維度價格

如同一般費率定價，可依支援的國家或地區設定計費維度價格。 您必須使用合作夥伴中心中的定價資料匯入和匯出功能，如下所示。

1. 定義所需的維度，並標示支援的市場。 
1. 將此資料匯出至檔案。
1. 新增每個國家/地區的正確價格，並將檔案匯入合作夥伴中心。

計量的 UI 將會變更，以反映只能在檔案中看到維度的價格。

[![商業 marketplace 計量服務維度](media/metering-service-dimensions.png "按一下以放大視圖")](media/metering-service-dimensions.png)

### <a name="private-plan"></a>私人方案

如同一般費率方案，具有維度的方案可以設定為私用方案，只供方案的定義物件存取。

## <a name="constraints"></a>條件約束

### <a name="trial-behavior"></a>試用版行為

使用商用 marketplace 計量服務的計量計費與提供免費試用版不相容。  您無法將方案設定為使用計量付費帳單和免費試用版。

### <a name="locking-behavior"></a>鎖定行為

因為與商業 marketplace 計量服務搭配使用的維度代表客戶對服務支付的費用，所以在您發行之後，維度的所有詳細資料都無法再編輯。  在發行之前，您必須先針對方案完整定義維度。

使用維度發佈供應專案之後，就無法再變更該維度的供應專案層級詳細資料：

- 識別碼
- 顯示名稱
- 測量單位

一旦發行計畫之後，就無法再變更方案層級的詳細資料：

- 每單位價格（以美元為單位）
- 基底中包含的每月數量
- 包含在基底中的年度數量
- 是否為方案啟用維度

### <a name="upper-limits"></a>上限

可以為單一供應專案設定的最大維度數目是18個唯一的維度。

## <a name="get-support"></a>取得支援

如果您有下列其中一個問題，您可以開啟支援票證。

- Marketplace 計量服務 API 的技術問題。
- 因為您端的錯誤或錯誤，而需要提升的問題 (例如 ) 的使用事件錯誤。
- 任何其他與計量付費相關的問題。

若要瞭解發行者支援選項，並向 Microsoft 提出支援票證，請依照 [合作夥伴中心中的「商業 marketplace」方案的支援](../support.md)指示進行。

## <a name="next-steps"></a>後續步驟

- [Marketplace 計量服務 API](./marketplace-metering-service-apis.md)
