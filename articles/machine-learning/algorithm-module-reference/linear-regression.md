---
title: 線性回歸：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何在 Azure 機器學習中使用線性回歸模組創建線性回歸模型，供管道使用。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/22/2020
ms.openlocfilehash: 602553637e21b17aa4f9bc7402753af024c697c7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477556"
---
# <a name="linear-regression-module"></a>線性回歸模組
本文介紹 Azure 機器學習設計器（預覽）中的模組。

使用此模組可以創建線性回歸模型，供管道使用。  線性回歸嘗試在一個或多個獨立變數與數值結果或因變數之間建立線性關係。 

使用此模組定義線性回歸方法，然後使用標記資料集訓練模型。 然後，定型的模型就可用來進行預測。

## <a name="about-linear-regression"></a>關於線性回歸

線性回歸是一種常見的統計方法，在機器學習中已經採用，並採用了許多適合線和測量誤差的新方法。 在最基本的意義上，回歸是指對數值目標的預測。 當您需要基本預測任務的簡單模型時，線性回歸仍然是一個不錯的選擇。 線性回歸也往往適用于缺乏複雜性的高維稀疏資料集。

Azure 機器學習支援各種回歸模型，以及線性回歸模型。 但是，"回歸"一詞可以鬆散地解釋，並且不支援在其他工具中提供的某些類型的回歸。

+ 經典回歸問題涉及單個獨立變數和因變數。 這稱為*簡單的回歸*。  此模組支援簡單回歸。

+ *多個線性回歸*涉及兩個或多個獨立變數，這些變數有助於單個從屬變數。 使用多個輸入來預測單個數值結果的問題也稱為*多變數線性回歸*。

    **線性回歸**模組可以解決這些問題，大多數其他回歸模組也可以。

+ *多標籤回歸*是預測單個模型中多個從屬變數的任務。 例如，在多標籤羅吉斯迴歸，一個範例可以指派給多個不同的標籤。 （這與預測單個類變數中的多個級別的任務不同。

    Azure 機器學習不支援這種類型的回歸。 要預測多個變數，請為每個要預測的輸出創建單獨的學員。

多年來，統計人員一直在開發越來越先進的回歸方法。 即使線性回歸也是如此。 此模組支援兩種測量誤差和擬合迴歸線的方法：普通最小平方法和梯度下降。

- **梯度下降**是一種在模型訓練過程的每一步中最小化誤差量的方法。 梯度下降有許多種變異形式，且其各種學習問題已經過廣泛的研究，而最佳化。 如果為**解決方案方法**選擇此選項，則可以設置各種參數來控制步長大小、學習速率等。 此選項還支援使用集成參數掃描。

- **普通最小平方**是線性回歸中最常用的技術之一。 例如，最小平方是 Microsoft Excel 的分析工具派克中使用的方法。

    普通最小平方會使用損失函數，計算實際值與預測線之差距的平方和以求出誤差，並藉由將平方誤差最小化來配適模型。 此方法假定輸入和因變數之間的強線性關係。

## <a name="configure-linear-regression"></a>配置線性回歸

此模組支援兩種用於擬合回歸模型的方法，這些方法具有不同的選項：

+ [使用普通最小平方擬裝回歸模型](#create-a-regression-model-using-ordinary-least-squares)

    對於小型資料集，最好選擇普通的最小平方。 這應該給 Excel 提供類似的結果。
    
+ [使用線上漸變下降創建回歸模型](#create-a-regression-model-using-online-gradient-descent)

    對於較為複雜的模型，或是沒有足夠的定型資料供給定的變數數目使用的模型，梯度下降會是較理想的損失函數。

### <a name="create-a-regression-model-using-ordinary-least-squares"></a>使用普通最小平方創建回歸模型

1. 將**線性回歸模型**模組添加到設計器中的管道中。

    您可以在**機器學習**類別中找到此模組。 展開**初始化模型**，展開**回歸**，然後將**線性回歸模型**模組拖動到管道中。

2. 在 **"屬性"** 窗格中，在 **"解決方案"方法**下拉清單中，選擇 **"普通最小正方形**"。 此選項指定用於查找迴歸線的計算方法。

3. 在**L2 正規化權重**中，鍵入用作 L2 正規化權重的值。 我們建議您使用非零值以避免過度學習。

     要瞭解有關正規化如何影響模型擬合的原因，請參閱本文：[用於機器學習的 L1 和 L2 正則](https://msdn.microsoft.com/magazine/dn904675.aspx)

4. 如果要查看截取的術語，請選擇選項"**包括攔截術語**"。

    如果您不需要查看回歸公式，請取消選擇此選項。

5. 對於**亂數種子，** 可以選擇鍵入值來設定模型使用的亂數產生器的種子。

    如果要在同一管道的不同運行中保持相同的結果，請使用種子值。 否則，預設值是使用系統時鐘中的值。


7. 將[訓練模型](./train-model.md)模組添加到管道中，並連接標記的資料集。

8. 提交管道。

### <a name="results-for-ordinary-least-squares-model"></a>普通最小平方模型的結果

培訓完成後：


+ 要進行預測，請將訓練的模型連接到[分數模型](./score-model.md)模組以及新值資料集。 


### <a name="create-a-regression-model-using-online-gradient-descent"></a>使用線上漸變下降創建回歸模型

1. 將**線性回歸模型**模組添加到設計器中的管道中。

    您可以在**機器學習**類別中找到此模組。 展開**初始化模型**，展開**回歸**，並將**線性回歸模型**模組拖動到管道

2. 在 **"屬性"** 窗格中，在 **"解決方案"方法**下拉清單中，選擇 **"連線漸變下降**"作為用於查找迴歸線的計算方法。

3. 對於**創建訓練器模式**，指示是要使用預定義的參數集訓練模型，還是要使用參數掃描優化模型。

    + **單一參數**：如果您知道如何配置線性回歸網路，則可以提供一組特定的值作為參數。
    
    + **參數範圍**：如果不確定最佳參數，並且想要運行參數掃描，請選擇此選項。 選擇要反覆運算的值範圍，[調諧模型 Hyper 參數](tune-model-hyperparameters.md)反覆運算您提供的所有可能組合設置，以確定生成最佳結果的超參數。  

   
4. 對於**學習速率**，指定隨機梯度下降優化器的初始學習速率。

5. 對於**訓練紀元數**，鍵入一個值，指示演算法應遍經示例的次數。 對於只有少數範例的資料集，這個數字應該要大到能夠達到收斂為止。

6. **正常化要素**：如果您已對用於訓練模型的數位資料進行正常化，則可以取消選擇此選項。 預設情況下，模組將所有數位輸入正常化為介於 0 和 1 之間的範圍。

    > [!NOTE]
    > 
    > 請記住將相同的正常化方法應用於用於評分的新資料。

7. 在**L2 正規化權重**中，鍵入用作 L2 正規化權重的值。 我們建議您使用非零值以避免過度學習。

    要瞭解有關正規化如何影響模型擬合的原因，請參閱本文：[用於機器學習的 L1 和 L2 正則](https://msdn.microsoft.com/magazine/dn904675.aspx)


9. 如果希望學習速率隨著反覆運算的進行而降低，請選擇"**降低學習速率**"選項。  

10. 對於**亂數種子，** 可以選擇鍵入值來設定模型使用的亂數產生器的種子。 如果要在同一管道的不同運行中保持相同的結果，請使用種子值。


12. 委任標記的資料集和培訓模組之一。

    如果不使用參數掃描，請使用[訓練模型](train-model.md)模組。

13. 提交管道。

### <a name="results-for-online-gradient-descent"></a>線上漸變下降的結果

培訓完成後：

+ 要進行預測，請將訓練的模型連接到[分數模型](./score-model.md)模組以及新的輸入資料。


## <a name="next-steps"></a>後續步驟

請參閱 Azure 機器學習[可用的模組集](module-reference.md)。 