---
title: 剪輯值
titleSuffix: Azure Machine Learning
description: 瞭解如何在 Azure 機器學習中使用"剪輯值"模組來檢測異常值並剪輯或替換其值。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 09/09/2019
ms.openlocfilehash: 6466cea9fe04bb308a670cb03fd3de5314758142
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/28/2020
ms.locfileid: "79456602"
---
# <a name="clip-values"></a>剪輯值

本文介紹 Azure 機器學習設計器（預覽）模組。

使用"剪輯值"模組將高於或低於指定閾值的資料值標識並選擇性地替換為均值、常量或其他替代值。  

將模組連接到具有要剪輯的數位的資料集，選擇要處理的列，然後設置值的閾值或範圍以及替換方法。 模組可以僅輸出結果或追加到原始資料集的已更改值。

## <a name="how-to-configure-clip-values"></a>如何配置剪輯值

在開始之前，標識要剪輯的列以及要使用的方法。 我們建議您首先在一小部分資料上測試任何剪切方法。

該模組對所選內容**中的所有列應用**相同的條件和替換方法。 因此，請確保排除不想更改的列。

如果需要對某些列應用裁剪方法或不同的條件，則必須對每組類似的列使用**剪輯值**的新實例。

1.  將 **"剪輯值"** 模組添加到管道中，並將其連接到要修改的資料集。 您可以在"**縮放和減少"** 類別中的 **"資料轉換**"下找到此模組。 
  
1.  在**列清單中**，使用欄選取器選擇要應用**剪輯值的**列。  
  
1.  對於**閾值集**，從下拉清單中選擇以下選項之一。 這些選項確定如何設置可接受值的上限和下邊界與必須剪切的值。  
  
    - **剪輯峰**：按峰值裁剪值時，只指定上邊界。 將替換大於該邊界值的值。
  
    -  **剪輯子峰值**：按子峰值剪輯值時，僅指定較低邊界。 將替換小於該邊界值的值。  
  
    - **剪輯峰和子峰**：當您按峰值和子峰值裁剪值時，可以指定上邊界和下邊界。 替換超出該範圍的值。 不會更改與邊界值匹配的值。
  
1.  根據上一步中的選擇，您可以設置以下閾值： 

    + **較低的閾值**：僅在選擇 **"剪輯子峰值**"時顯示
    + **上限**：僅在選擇 **"剪輯峰**"時顯示
    + **閾值**： 僅在選擇**剪輯峰和子峰**時顯示

    對於每個閾數值型別，選擇 **"常量**"或 **"百分位數**"。

1. 如果選擇 **"常量**"，請在文字方塊中鍵入最大值或最小值。 例如，假設您知道值 999 用作預留位置值。 您可以為上限閾值選擇 **"常量"，** 在 **"常量"值中鍵入 999。請選擇"上限閾值**"。
  
1. 如果選擇**百分位數**，則將列值限制為百分位數範圍。 

    例如，假設您只想將值保留在 10-80 百分位數範圍內，並替換所有其他值。 您將選擇**百分位數**，然後鍵入 10**表示較低閾值的百分位數值**，並為上限閾值鍵入 80**表示百分位數值**。 

    有關如何使用百分位數範圍的一些示例，請參閱[百分位數](#examples-for-clipping-using-percentiles)部分。  
  
1.  定義替代值。

    與指定邊界完全符合的數位被視為在允許的值範圍內，因此不會替換。 超出指定範圍的所有數位都將替換為替換值。 
  
    + **峰值的替代值**：定義值以替換大於指定閾值的所有列值。  
    + **副峰的替換值**：定義用作小於指定閾值的所有列值的值。  
    + 如果使用 **"剪貼峰和子峰**"選項，則可以為上下剪切值指定單獨的替換值。  

    支援以下替換值：  
  
    -   **閾值**：將剪切的值替換為指定的閾值。  
  
    -   **均值**： 將剪切的值替換為列值的平均值。 平均值在剪切值之前計算。  
  
    -   **中位數**： 將剪切的值替換為列值的中位數。 在剪切值之前計算中位數。   
  
    -   **缺少**。 將剪切的值替換為缺少（空）值。  
  
1.  **添加指示器列**：如果要生成一個新列，告訴您指定的裁剪操作是否應用於該行中的資料，請選擇此選項。 當您測試一組新的裁剪和替換值時，此選項很有用。  
  
1. **覆蓋標誌**：指示您希望如何生成新值。 預設情況下，**剪輯值**構造一個新列，峰值被剪切到所需的閾值。 新值覆蓋原始列。  
  
    要保留原始列並添加具有剪切值的新列，請取消選擇此選項。  
  
1.  提交管道。  
  
    按右鍵 **"剪輯值"** 模組並**選擇"視覺化"** 或選擇模組，然後切換到右側面板中的 **"輸出"** 選項卡，按一下 **"埠輸出**"中的長條圖圖示，查看值並確保裁剪操作符合您的預期。  
 
### <a name="examples-for-clipping-using-percentiles"></a>使用百分位數進行剪切的示例

為了瞭解如何依百分位數來裁剪，假設資料集有 10 個資料列，每一個值 1-10 各有一個執行個體。  
  
- 如果您使用百分位數做為臨界值上限，並決定值為第 90 個百分位數，則資料集的所有值中，90% 必須小於該值。  
  
- 如果您使用百分位數做為臨界值下限，並決定值為第 10 個百分位數，則資料集的所有值中，10% 必須小於該值。  
  
1.  在 [臨界值設定] **** 中，選擇 [ClipPeaksAndSubPeaks]****。  
  
1.  對於 **"上限"閾值**，選擇**百分位數**，選擇**百分位數**，鍵入 90。  
  
1.  對於**上部替換值**，請選擇 **"缺少值**"。  
  
1.  在 [臨界值下限] **** 中選擇 [百分位數]****，在 [百分位數]**** 中輸入 10。  
  
1.  對於**較低的替換值**，請選擇 **"缺少值**"。  
  
1.  取消選擇"**覆蓋標誌**"選項，然後選擇"**添加指標列**"選項。  
  
現在嘗試使用 60 作為上百分位數閾值和 30 作為低百分位數閾值的相同管道，並使用閾值作為替換值。 下表比較這兩個結果：  
  
1.  替換為缺失;上限 = 90;較低的閾值 = 20  
  
1.  替換為閾值;上百分位數 = 60;低百分位數 = 40  
  
|原始資料|取代遺漏|取代臨界值|  
|-------------------|--------------------------|----------------------------|  
|1<br /><br /> 2<br /><br /> 3<br /><br /> 4<br /><br /> 5<br /><br /> 6<br /><br /> 7<br /><br /> 8<br /><br /> 9<br /><br /> 10|TRUE<br /><br /> TRUE<br /><br /> 3、 假<br /><br /> 4、假<br /><br /> 5、 假<br /><br /> 6、 假<br /><br /> 7、 假<br /><br /> 8、 假<br /><br /> 9、 假<br /><br /> TRUE|4， 真<br /><br /> 4， 真<br /><br /> 4， 真<br /><br /> 4， 真<br /><br /> 5、 假<br /><br /> 6、 假<br /><br /> 7， 真實<br /><br /> 7， 真實<br /><br /> 7， 真實<br /><br /> 7， 真實| 
 
## <a name="next-steps"></a>後續步驟

請參閱 Azure 機器學習[可用的模組集](module-reference.md)。 
