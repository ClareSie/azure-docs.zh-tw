---
title: 特徵雜湊模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何使用 Azure Machine Learning 中的功能雜湊模組來為文字資料進行特徵化。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/22/2020
ms.openlocfilehash: 7178417a5c20afe5b1ed02bc526ec174704962df
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/28/2020
ms.locfileid: "79456245"
---
# <a name="feature-hashing-module-reference"></a>特徵雜湊模組參考

本文說明 Azure Machine Learning 設計工具（預覽）中所包含的模組。

使用「特徵雜湊」模組，將英文文字的資料流程轉換成一組整數特徵。 接著，您可以將此雜湊功能集傳遞至機器學習演算法，以將文字分析模型定型。

此課程模組中所提供的功能雜湊功能是以 nimbusml 架構為基礎。 如需詳細資訊，請參閱[NgramHash 類別](https://docs.microsoft.com/python/api/nimbusml/nimbusml.feature_extraction.text.extractor.ngramhash?view=nimbusml-py-latest)。

## <a name="what-is-feature-hashing"></a>什麼是功能雜湊？

特徵雜湊的運作方式是將唯一的 token 轉換成整數。 它會在您提供做為輸入的確切字串上運作，而且不會執行任何語言分析或前置處理。 

例如，採用一組像這些的簡單句子，後面接著情感分數。 假設您想要使用此文字來建立模型。

|使用者文字|情感|
|--------------|---------------|
|我喜歡這本書|3|
|我恨透了臺本書|1|
|本書很棒|3|
|我喜歡書籍|2|

就內部而言，特徵雜湊模組會建立 n 字母的字典。 例如，此資料集的 bigrams 清單可能如下所示：

|詞彙（bigrams）|頻率|
|------------|---------------|
|本書|3|
|我喜歡|1|
|我恨透了台|1|
|我愛|1|

您可以使用 [ **n-克**] 屬性來控制 n 字母的大小。 如果您選擇 bigrams，unigrams 也會計算出來。 字典也會包含如下所示的單一詞彙：

|詞彙（unigrams）|頻率|
|------------|---------------|
|預訂|3|
|I|3|
|書籍|1|
|was|1|

建立字典之後，特徵雜湊模組會將字典詞彙轉換成雜湊值。 然後，它會計算是否在每個案例中使用了某項功能。 針對每個文字資料列，此模組會輸出一組資料行，每個雜湊特徵各一個資料行。

例如，在雜湊之後，功能資料行看起來可能像這樣：

|評等|雜湊特徵 1|雜湊功能2|雜湊功能3|
|-----|-----|-----|-----|
|4|1|1|0|
|5|0|0|0|

* 如果資料行中的值為0，則資料列不會包含雜湊的功能。
* 如果值為1，資料列就會包含功能。

「特徵雜湊」可讓您將可變長度的文字檔表示為長度相等的數值特徵向量，以減少維度。 如果您嘗試將 [文字] 資料行用於定型，則會被視為具有許多相異值的類別特徵資料行。

數值輸出也能讓您使用常見的機器學習方法，包括分類、叢集和資訊抓取。 因為查閱作業可以使用整數雜湊而不是字串比較，所以取得功能權數的速度也會更快。

## <a name="configure-the-feature-hashing-module"></a>設定功能雜湊模組

1.  在設計工具中，將 [特徵雜湊] 模組新增至您的管線。

1. 連接包含您想要分析之文字的資料集。

    > [!TIP]
    > 因為功能雜湊不會執行詞幹分析或截斷之類的詞法作業，所以在套用功能雜湊之前，您有時可以藉由預先處理文字來取得較佳的結果。 

1. 將**目標資料行**設定為您想要轉換成雜湊功能的文字資料行。 請注意下列事項：

    * 資料行必須是字串資料類型。
    
    * 選擇多個文字資料行可能會對功能維度造成重大影響。 例如，10位雜湊的資料行數目會從1024到兩個數據行的單一資料行變成2048。

1. 使用 [**雜湊 bitsize** ] 來指定建立雜湊表時要使用的位數。
    
    預設的位大小為10。 對於許多問題而言，這個值就已足夠。 您可能需要更多空間來避免衝突，視定型文字中的 n 元詞彙大小而定。
    
1. 針對**n**個字母，請輸入一個數位，以定義要加入定型字典的 N 字母長度上限。 N-克是一系列的*n*個單字，視為唯一的單位。

    例如，如果您輸入3，則會建立 unigrams、bigrams 和 trigrams。

1. 提交管線。

## <a name="results"></a>結果

處理完成之後，此模組會輸出已轉換的資料集，其中原始文字資料行已轉換成多個資料行。 每個資料行都代表文字中的一項功能。 視字典的重要性而定，產生的資料集可能會很大：

|資料行名稱1|資料行類型2|
|-------------------|-------------------|
|USERTEXT|原始資料行|
|情感|原始資料行|
|USERTEXT-雜湊功能1|雜湊特徵資料行|
|USERTEXT-雜湊功能2|雜湊特徵資料行|
|USERTEXT 雜湊功能 n|雜湊特徵資料行|
|USERTEXT-雜湊功能1024|雜湊特徵資料行|

建立已轉換的資料集之後，您可以使用它做為「定型模型」模組的輸入。
 
## <a name="best-practices"></a>最佳作法

下列最佳作法可協助您充分運用功能雜湊模組：

* 先加入前置處理文字模塊，再使用特徵雜湊預先處理輸入文字。 

* 在特徵雜湊模組之後加入選取資料行模組，以從輸出資料集移除文字資料行。 產生雜湊功能之後，您不需要文字資料行。
    
* 請考慮使用這些文字前置處理選項，以簡化結果並改善正確性：

    * 斷詞
    * 停止移除文字
    * 大小寫正規化
    * 移除標點符號和特殊字元
    * 詞幹分析  

適用于任何解決方案的一組最佳前置處理方法，取決於網域、詞彙和商務需求。 管線與您的資料，以查看哪些文字處理方法最有效。

## <a name="next-steps"></a>後續步驟
            
請參閱可用來 Azure Machine Learning 的[模組集合](module-reference.md) 
