---
title: 如何：在自訂命令中新增確認（預覽）
titleSuffix: Azure Cognitive Services
description: 在本文中，如何在自訂命令中執行命令的確認。
services: cognitive-services
author: encorona-ms
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 12/05/2019
ms.author: encorona
ms.openlocfilehash: bf1b79c1b5d7b9dfd93b354c6b6ff5a512bb74a5
ms.sourcegitcommit: c535228f0b77eb7592697556b23c4e436ec29f96
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/06/2020
ms.locfileid: "82858225"
---
# <a name="how-to-add-a-confirmation-to-a-custom-command-preview"></a>如何：在自訂命令中新增確認（預覽）

在本文中，您將瞭解如何在命令中新增確認。

## <a name="prerequisites"></a>Prerequisites

您必須已完成下列文章中的步驟：
> [!div class="checklist"]
> *  [快速入門：建立自訂命令（預覽）](./quickstart-custom-speech-commands-create-new.md)
> * [快速入門：使用參數來建立自訂命令（預覽）](./quickstart-custom-speech-commands-create-parameters.md)

## <a name="create-a-setalarm-command"></a>建立 SetAlarm 命令

為了示範確認，讓我們建立新的命令讓使用者設定警示。

1. 在[語音 Studio](https://speech.microsoft.com/)中開啟您先前建立的自訂命令應用程式。
1. 建立新的命令`SetAlarm`。
1. 使用下列設定新增`DateTime`名為的參數。

   | 設定                           | 建議的值                     |  描述                 |
   | --------------------------------- | -----------------------------------------------------| ------------|
   | 名稱                              | Datetime                                | 參數的描述性名稱                                |
   | 必要                          | checked                                 | 指出是否需要此參數值的核取方塊，才能完成命令 |
   | 必要參數的回應   | 簡單編輯器-> 什麼時間？                              | 當不知道此參數的值時，所要求的提示 |
   | 類型                              | Datetime                                | 參數的類型，例如數位、字串、日期時間或地理位置   |
   | 日期預設值                     | 如果日期遺失，請立即使用            | 當使用者未提供時，所要使用之變數的預設值。  |  
   | 時間預設值                     | 如果遺失時間，使用日開始     |  當使用者未提供時，所要使用之變數的預設值。|

1. 新增一些範例句子。
   
    ```
    set an alarm for {DateTime}
    set alarm {DateTime}
    alarm for {DateTime}
   ```

1. 新增完成規則以確認結果。

   | 設定    | 建議的值                               |描述                                     |
   | ---------- | ------------------------------------------------------- |-----|
   | 規則名稱  | 設定鬧鐘                                               |    描述規則用途的名稱 |
   | 動作    | 傳送語音回應-Ok，{DateTime} 的鬧鐘設定    |規則條件為 true 時要採取的動作

## <a name="try-it-out"></a>試試看

1. 選取`Train`右窗格頂端的 [圖示]。

1. 訓練完成後，選取`Test`。
    - 輸入：為明天的中午設定鬧鐘
    - 輸出：正常，已為 2020-05-02 12:00:00 設定鬧鐘
    - 輸入：設定鬧鐘
    - 輸出：何謂時間？
    - 輸入：下午5
    - 輸出：正常，已為 2020-05-01 17:00:00 設定鬧鐘

## <a name="add-the-advanced-rules-for-confirmation"></a>新增用於確認的「高級」規則

確認是透過新增互動規則來達成。

1. `SetAlarm`在現有的命令中，于中間窗格中依`+Add`選取方式新增**互動規則**，然後選取 [**互動規則** -> ] [**確認命令**]。

    此規則會要求使用者確認警示的日期和時間，並預期會有確認（是/否）以進行下一回合。

   | 設定               | 建議的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 規則名稱             | 確認日期時間                                                                | 描述規則用途的名稱          |
   | 條件            | 必要參數-> DateTime                                                    | 判斷規則何時可執行檔條件    |   
   | 動作               | 傳送語音回應-> 您確定要設定 {DateTime} 的鬧鐘嗎？     | 規則條件為 true 時要採取的動作 |
   | 期望          | 需要使用者的確認                                                 | 下一回合的預期                      |
   | 執行後狀態  | 等待使用者的輸入                                                            | 回合後的使用者狀態                  |
  
      > [!div class="mx-imgBorder"]
      > ![建立必要的參數回應](media/custom-speech-commands/add-validation-set-temperature.png)

1. 新增另一個互動規則以處理成功的確認（使用者已說是）

   | 設定               | 建議的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 規則名稱             | 已接受確認                                                            | 描述規則用途的名稱          |
   | 條件            | 確認成功 & 必要參數-> DateTime                      | 判斷規則何時可執行檔條件    |   
   | 執行後狀態 | 執行完成規則                                                          | 回合後的使用者狀態                   |

1. 新增用來處理拒絕確認的「高級」規則（使用者說「否」）

   | 設定               | 建議的值                                                                  | 描述                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | 規則名稱             | 拒絕的確認                                                                   | 描述規則用途的名稱          |
   | 條件            | 已拒絕確認 & 必要參數-> DateTime                               | 判斷規則何時可執行檔條件    |   
   | 動作               | 清除參數值-> 日期時間 & 傳送語音回應-> 沒有問題，那該怎麼辦？  | 規則條件為 true 時要採取的動作 |
   | 執行後的狀態 | 等待輸入                                                                   | 回合後的使用者狀態                   |
   | 期望          | 需要使用者 > 的日期時間輸入參數                           | 下一回合的預期                      |

## <a name="try-out-the-changes"></a>試用變更

選取`Train`，等待訓練完成，然後選取`Test`。

- 輸入：為明天的中午設定鬧鐘
- 輸出：您確定要設定 2020-05-02 12:00:00 的鬧鐘嗎？
- 輸入：否
- 輸出：沒有問題，接下來的時間為何？
- 輸入：下午5
- 輸出：「您確定要設定 2020-05-01 17:00:00 的鬧鐘嗎？」
- 輸入：是
- 輸出：正常，已為 2020-05-01 17:00:00 設定鬧鐘

## <a name="next-steps"></a>後續步驟

> [!div class="nextstepaction"]
> [如何：在自訂命令中新增單步驟更正（預覽）](./how-to-custom-speech-commands-one-step-correction.md)