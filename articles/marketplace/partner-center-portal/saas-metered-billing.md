---
title: 使用市場計量服務計量計費 |Azure 應用商店
description: 本文檔是發佈 SaaS 提供的具有靈活計費模型的 ISV 指南。
author: dsindona
ms.author: dsindona
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 07/10/2019
ms.openlocfilehash: 8e5a4813301cbab16d1cffabaaa60688f6e826ae
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/28/2020
ms.locfileid: "80281318"
---
# <a name="metered-billing-using-the-marketplace-metering-service"></a>使用市場計量服務計量計費

使用應用商店計量服務，您可以在商業市場程式中創建軟體即服務 （SaaS） 產品，這些產品根據非標準單位收費。  在發佈此產品/服務之前，您可以定義已處理的帳單維度，如頻寬、票證或電子郵件。  然後，客戶根據這些維度的使用方式付費，您的系統通過應用商店計量服務 API 通知 Microsoft 在發生計費事件時。  

## <a name="prerequisites-for-metered-billing"></a>計量計費的先決條件

為了使 SaaS 產品使用按流量計費，它必須：

* 滿足創建[SaaS 產品/服務](https://docs.microsoft.com/azure/marketplace/partner-center-portal/create-new-saas-offer)中所述[通過 Microsoft 產品/服務銷售](https://docs.microsoft.com/azure/marketplace/partner-center-portal/create-new-saas-offer#sell-through-microsoft)的所有要約要求。
* 與[SaaS 履行 API](https://docs.microsoft.com/azure/marketplace/partner-center-portal/pc-saas-fulfillment-api-v2)集成，供客戶預配和連接到您的產品/服務。  
* 為**統一費率**定價模型配置，用於向客戶收取服務費用。  維度是統一費率定價模型的可選擴展。 
* 與[應用商店計量服務 API](./marketplace-metering-service-apis.md)集成，向 Microsoft 通報計費事件。

>[!Note]
>應用商店計量服務僅適用于統一費率計費模型，不適用於每個使用者計費模型。

## <a name="how-metered-billing-fits-in-with-pricing"></a>計量計費如何與定價相符

在定義產品/服務及其定價模型時，瞭解產品/服務層次結構非常重要。

* 每個 SaaS 產品配置為通過 Microsoft 銷售或不銷售。  發佈產品/服務後，無法更改此設置。
* 每個 SaaS 產品（配置為通過 Microsoft 銷售）都可以有一個或多個計畫。 使用者訂閱 SaaS 產品/服務，但是在計畫上下文中通過 Microsoft 購買的。
* 每個計畫都有一個與之關聯的定價模型：**統一費率**或**每個使用者**。 要約中的所有計劃都必須與相同的定價模型相關聯。 例如，不能有一個產品/服務，其中一個計畫是統一費率定價模型，另一個是每個使用者定價模型。
* 在為統一費率計費模型配置的每個計畫中，至少包括一個經常性費用（可以是 $0）：
    * 定期**月**費：當使用者購買計畫時每月重複預付的固定月費。
    * 經常性**年**費：在使用者購買計畫時每年重複預付的固定年費。
* 除了經常性費用外，該計畫還可以包括用於向客戶收取統一費率未包括的使用量的可選維度。   每個維度表示一個計費單元，您的服務將使用[應用商店計量服務 API](./marketplace-metering-service-apis.md)與 Microsoft 通信。

## <a name="sample-offer"></a>樣品報價

例如，Contoso 是具有稱為 Contoso 通知服務 （CNS） 的 SaaS 服務的發行者。 CNS 允許客戶通過電子郵件或文本發送通知。 Contoso 在商業市場計畫的合作夥伴中心註冊為發行者，以向 Azure 客戶發佈產品/服務。  有兩個與 CNS 相關的計畫，概述如下：

* 基本方案
    * 發送 10000 封電子郵件和 1000 條短信，費用為 $0/月
    * 除了 10000 封電子郵件之外，每 100 封電子郵件支付 1 美元
    * 除了 1000 個文本之外，每文本支付 0.02 美元
* 進階方案
    * 發送 50000 封電子郵件和 10000 條短信，費用為 $350/月
    * 除了 50000 封電子郵件之外，每 100 封電子郵件支付 0.5 美元
    * 除了 10000 文本之外，每文本支付 0.01 美元

訂閱 CNS 服務的 Azure 客戶將能夠根據所選計畫每月發送包含的文本和電子郵件數量。  Contoso 測量使用量，最多包含數量，而不向 Microsoft 發送任何使用事件。  當客戶消耗的數量超過包含的數量時，他們不必更改計畫或執行任何不同操作。  Contoso 將使用[應用商店計量服務 API](./marketplace-metering-service-apis.md)測量超出包含數量的範圍，並開始向 Microsoft 發出使用事件以進行其他使用。  Microsoft 將向客戶收取發行者指定的附加使用量。

## <a name="billing-dimensions"></a>計費維度

計費維度用於向客戶傳達如何使用該軟體計費的方式，以及向 Microsoft 傳達使用事件。 它們的定義如下：

* **維度識別碼**：在發出使用事件時引用的不彈性識別碼。
* **維度名稱**：與維度關聯的顯示名稱，例如"發送的短信"。
* **計量單位**：計費單位的描述，例如"每條短信"或"每100封電子郵件"。
* **單位價格**：維度一個單位的價格。  
* **包含的每月期限數量**：每月支付定期月費的客戶每月包含的維度數量，必須為整數。
* **包括年期限的數量**：每月支付定期年費的客戶包括維度的數量，必須是整數。

計費維度在產品/服務的所有計劃中共用。  某些屬性應用於所有計劃的維度，而其他屬性特定于計畫。

定義維度本身的屬性在產品/服務的所有計劃中共用。  在發佈產品/服務之前，從任何計畫的上下文中對這些屬性所做的更改將影響所有計劃的維度定義。  發佈產品/服務後，這些屬性將不再可編輯。  這些屬性包括：

* 識別碼
* 名稱
* 測量單位

維度的其他屬性特定于每個計畫，並且可以具有不同的計畫值。  在發佈計畫之前，您可以編輯這些值，只有此計畫才會受到影響。  發佈計畫後，這些屬性將不再可編輯。  這些屬性包括：

* 單價
* 每月客戶的包含數量 
* 年度客戶的包含數量 

維度還有兩個特殊概念，"啟用"和"無限"：

* **已啟用**表示此計畫參與此維度。  如果要創建不基於此維度發送使用事件的新計畫，則可能需要保留此未選中功能。  此外，在首次發佈計畫後添加的任何新維度都將在已發佈的計畫中顯示為"未啟用"。  禁用的維度不會顯示在客戶看到的計畫的任何維度清單中。
* **無限**，由無窮大符號"*"表示此計畫參與此維度，但不針對此維度計量用量。  如果要向客戶指示此維度表示的功能包含在計畫中，但使用沒有限制。  具有無限用法的維度將顯示在客戶看到的計畫的維度清單中，並指示它永遠不會為此計畫產生費用。

>[!Note] 
>明確支援以下方案： <br> - 您可以將新維度添加到新計畫。  不會為已發佈的任何計畫啟用新維度。 <br> - 您可以發佈不帶任何維度**的平面速率**計畫，然後添加新計畫並為該計畫配置新維度。 對於已發佈的計畫，將不會啟用新維度。

## <a name="constraints"></a>條件約束

### <a name="trial-behavior"></a>試用行為

使用市場計量服務的計量計費服務與提供免費試用版不相容。  無法將計畫配置為同時使用按流量計費和免費試用版。

### <a name="locking-behavior"></a>鎖定行為

由於與應用商店計量服務一起使用的維度表示瞭解客戶如何為服務付費，因此一旦發佈維度，維度的所有詳細資訊將不再可編輯。  在發佈之前，必須為計畫完全定義維度，這一點很重要。
  
使用維度發佈產品/服務後，無法再更改該維度的優惠級別詳細資訊：

* 識別碼
* 名稱
* 測量單位

發佈計畫後，無法再更改計畫級別的詳細資訊：

* 單價
* 每月學期的包含數量
* 年度學期的包含數量
* 是否為計畫啟用維度

### <a name="upper-limits"></a>上限

可為單個產品/服務配置的最大維度數為 18 個唯一維度。

## <a name="get-support"></a>取得支援

如果您有以下一項，則可以打開支援票證。

* 市場計量服務 API 的技術問題。
* 因右側的錯誤或錯誤而需要升級的問題（例如。 錯誤的使用事件）。
* 與按流量計費相關的任何其他問題。 

按照以下步驟提交支援票證：

1. 移至[支援連結](https://support.microsoft.com/supportforbusiness/productselection?sapId=48734891-ee9a-5d77-bf29-82bf8d8111ff)。 前幾個下拉式功能表會自動為您填寫。 對於市場支援，將產品系列標識為**雲和線上服務**，該產品為**市場發行者**。  不要更改預填充的下拉式功能表選擇。
2. 在"選擇產品版本"下，選擇**即時產品/服務管理**。
3. 在"選擇最能描述問題的類別"下，選擇**SaaS 應用**。
4. 在"選擇最能描述問題的問題"下，選擇**按流量計費**。
5. 通過選擇"**下一步**"按鈕，您將被定向到"**問題詳細資訊**"頁面，您可以在該頁面輸入有關您的問題的更多詳細資訊。

有關更多發行者支援選項[，請參閱合作夥伴中心中對商業市場計畫的支援](https://docs.microsoft.com/azure/marketplace/partner-center-portal/support)。

## <a name="next-steps"></a>後續步驟

- 有關詳細資訊[，請參閱應用商店計量服務 API。](./marketplace-metering-service-apis.md)
