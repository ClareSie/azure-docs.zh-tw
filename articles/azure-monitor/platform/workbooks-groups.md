---
title: Azure 監視器活頁簿群組
description: 如何使用 Azure 監視器活頁簿中的群組。
services: azure-monitor
author: lgayhardt
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 05/06/2020
ms.author: lagayhar
ms.openlocfilehash: b6377cdcdb5816426eba62fdbef79eeb42659dcc
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/09/2020
ms.locfileid: "82892078"
---
# <a name="how-to-use-groups-in-workbooks"></a>如何在活頁簿中使用群組

活頁簿中的群組專案可讓您以邏輯方式分組活頁簿中的一組步驟。

活頁簿中的群組適用于數個專案：

- 配置
  - 在您想要垂直組織專案的情況下，您可以建立一組將全部堆疊的專案，並將群組的樣式設定為百分比寬度，而不是設定所有個別專案的百分比寬度。
- 可見度
  - 如果您想要在多個專案之間隱藏/顯示，您可以設定整個專案群組的可見度，而不是在每個個別專案上設定可見度設定。 這在使用索引標籤的範本中相當有用，因為您可以使用群組做為索引標籤的內容，而且可以根據所選索引標籤設定的參數來隱藏/顯示整個群組。
- 效能
  - 如果您的範本具有許多區段或索引標籤，您可以將每個區段轉換成它自己的子範本，並使用群組來載入最上層範本內的所有子範本。 子範本的內容將無法載入或執行，直到使用者讓這些群組顯示為止。 深入瞭解 [如何將大型範本分割成多個範本](#how-to-split-a-large-template-into-many-templates)。

## <a name="using-groups"></a>使用群組

若要將群組新增至您的活頁簿，請選取 [*加入**群組*]。

![選取 [加入]，然後選取 [群組]。](./media/workbooks-groups/add-group.png)

以下是處於讀取模式的群組螢幕擷取畫面，其中包含兩個專案：文字專案和查詢專案。  

![在閱讀模式中群組。](./media/workbooks-groups/groups-view.png)

編輯活頁簿時，您可以看到這兩個專案實際上是在群組專案內：

![群組處於編輯模式。 ](./media/workbooks-groups/groups-edit.png)

在上面的螢幕擷取畫面中，群組處於編輯模式，顯示 (虛線區域內的兩個專案) 。 每個步驟都可以處於 [編輯] 或 [讀取] 模式，彼此獨立。 例如，當查詢步驟處於讀取模式時，文字步驟會處於編輯模式。

## <a name="scoping"></a>範圍

目前，群組會被視為活頁簿中的新範圍。 在群組中建立的任何參數，只會顯示在群組內。 這也適用于合併，您只能查看群組內或父層級的資料。

## <a name="group-types"></a>群組類型

活頁簿群組專案可讓您將一組專案加入至活頁簿。 作為活頁簿的作者，您可以指定所屬群組的類型。 群組有兩種類型：

- Editable
  - 活頁簿中的群組可讓您新增、移除或編輯群組中專案的內容。 這最常用於配置和可見度用途。
- 從範本
  - 活頁簿中的群組會依識別碼載入另一個範本的內容。 該範本的內容會在執行時間載入併合並到活頁簿中。 在編輯模式中，您無法修改群組的任何內容，因為它們會在下一次載入專案時，再次從範本載入。  

## <a name="load-types"></a>載入類型

有幾種不同的方式可以載入群組的內容。 作為活頁簿的作者，您將會指定何時及如何載入群組的內容。

### <a name="lazy-the-default"></a>預設) 的延遲 (

只有在顯示專案時，才會載入群組。 這可讓索引標籤專案使用群組。 如果從未選取索引標籤，則不會顯示該群組，因此不會載入內容。

若為從範本建立的群組，則不會抓取範本的內容，也不會建立群組中的專案，直到群組變成可見為止。 當抓取內容時，使用者會看到整個群組的進度 spinners。

### <a name="explicit"></a>明確

在此模式中，會顯示群組所在的按鈕，而且在使用者明確按一下按鈕以載入內容之前，不會抓取或建立任何內容。 這適用于內容可能耗用大量資源或很少使用的案例。 作者可以指定要顯示在按鈕上的文字。

以下是明確載入設定的螢幕擷取畫面，其中顯示已設定的 [載入更多] 按鈕。

![明確載入設定](./media/workbooks-groups/groups-explicitly-loaded.png)

在活頁簿中載入之前的群組：

![載入活頁簿之前的明確群組](./media/workbooks-groups/groups-explicitly-loaded-before.png)

將群組載入活頁簿之後：

![載入活頁簿之後的明確群組](./media/workbooks-groups/groups-explicitly-loaded-after.png)

### <a name="always"></a>一律

在此模式中，當活頁簿載入時，一律會立即載入並建立群組的內容。 這最常用於僅針對配置目的使用群組時，內容一律會顯示在其中。

## <a name="using-templates-inside-a-group"></a>使用群組內的範本

當群組設定為從範本載入時，該內容預設會載入延遲，只會在群組可見時載入。

將範本載入至群組時，活頁簿會嘗試合併範本中宣告的任何參數，並使用已存在於群組中的參數載入。 具有相同名稱的活頁簿中已存在的任何參數，將會從載入的範本中合併。 如果參數步驟中的所有參數都已合併，整個參數步驟將會消失。

### <a name="example-1-all-parameters-have-identical-names"></a>範例1：所有參數都有相同的名稱

請考慮在頂端有兩個參數的範本。

- `TimeRange` -時間範圍參數。
- `Filter` -文字參數。

![編輯參數專案：「最上層參數」](./media/workbooks-groups/groups-top-level-params.png)

然後，群組專案會載入第二個範本，其中有自己的兩個參數和一個文字步驟，其中參數的命名相同：

![編輯第二個範本的參數專案](./media/workbooks-groups/groups-merged-away.png)

當第二個範本載入至群組時，將會合並重複的參數。由於所有的參數都是合併的，因此內部參數步驟也會合並輸出，因此只會包含文字步驟的群組。

### <a name="example-2-one-parameter-has-an-identical-name"></a>範例2：一個參數有相同的名稱

請考慮在頂端有兩個參數的群組範本。

- `TimeRange` -時間範圍參數。
- `FilterB` -文字參數，請注意，它與 `Filter` 最上層範本相同。

![編輯已合併參數結果的群組專案](./media/workbooks-groups/groups-wont-merge-away.png)

當群組的 item's 範本載入時， `TimeRange` 參數將會合並到群組外。 然後，活頁簿的初始參數步驟會加 `TimeRange` `Filter` 上 and，而且群組的參數步驟將只包含 `FilterB`

![不會合並的參數結果](./media/workbooks-groups/groups-wont-merge-away-result.png)

如果載入的範本包含 `TimeRange` 且 `Filter` (而不是 `FilterB`) ，則產生的活頁簿會有一個參數步驟和一個只包含文字步驟的群組。

## <a name="how-to-split-a-large-template-into-many-templates"></a>如何將大型範本分割成多個範本

若要改善效能，請將大型範本分割成多個較小的範本，以載入一些內容延遲或依需求的使用者。 這可讓初始載入速度更快，因為最上層範本的大小可能較小。

將範本分割成元件時，您實際上需要將範本分割成多個範本 (子範本，) 所有工作都是個別的工作。 因此，如果最上層範本有 `TimeRange` 其他步驟使用的參數，子範本也必須有參數步驟來定義具有完整名稱的參數。 這可讓子範本獨立運作，並讓它們載入群組中較大的範本內。

若要將較大型的範本轉換成多個子範本：

1.  在活頁簿頂端附近的共用參數之後建立新的空白群組。 這個新群組最後會成為子範本。
2. 建立共用參數步驟的複本，然後使用 [ *移至群組* ] 將複本移至步驟1中建立的群組。 此參數步驟可讓子範本獨立于外部範本之外運作，而且會在外部範本內載入時合併。
    > [!NOTE]
    > 子範本在技術上並不需要有這些參數，這些參數會在您不想要自行看見的子範本時被合併。 但是，如果您稍後需要這麼做，就會讓它們變得非常困難。

3. 將您想要的活頁簿中的每個專案移至步驟1中建立的群組。
4. 如果步驟3中移動的個別步驟具有條件式可視性，則會變成外部群組的可見度 (例如用於索引標籤) 。 從群組內的專案中移除它們，並將該可見度設定新增至群組本身。 在此儲存以避免遺失變更及/或匯出並儲存 json 內容的複本。
5. 如果您想要從範本載入該群組，可以使用群組中的 [ *編輯* ] 工具列按鈕。 這只會在新視窗中，以活頁簿的形式開啟該群組的內容。 然後，您可以適當地儲存它，並關閉此活頁簿的視圖 (不要關閉瀏覽器，而只是要回到先前編輯的活頁簿) 。
6. 然後，您可以將群組步驟變更為從範本載入，並將範本識別碼欄位設定為您在步驟5中建立的活頁簿/範本。 若要使用活頁簿識別碼，來源必須是共用的活頁簿資源識別碼。 按下 [ *載入* ]，該群組的內容現在將從該子範本載入，而不是儲存在外部活頁簿內。

## <a name="next-steps"></a>接下來的步驟
- [活頁簿總覽](workbooks-overview.md)
- [搭配使用 JSONPath 與活頁簿](workbooks-jsonpath.md)