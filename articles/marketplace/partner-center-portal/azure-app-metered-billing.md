---
title: 使用 marketplace 計量服務之受控應用程式的計量計費 |Azure Marketplace
description: 本檔是使用彈性計費模型來發佈 Azure 應用程式的 Isv 指南。
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 04/22/2020
ms.author: mingshen
author: mingshen-ms
ms.openlocfilehash: 52ae961a813b6d14592953fdf8662cbaecf662e1
ms.sourcegitcommit: b6f3ccaadf2f7eba4254a402e954adf430a90003
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/20/2020
ms.locfileid: "92280459"
---
# <a name="managed-application-metered-billing"></a>受控應用程式計量計費 

使用 Marketplace 計量服務時，您可以針對根據非標準單位收費的 Azure 應用程式供應專案建立受控應用程式方案。 發行此供應專案之前，您可以定義計費維度，例如已處理的頻寬、票證或電子郵件。 然後，客戶會根據這些維度的耗用量支付費用。  當計費事件發生時，您的系統會透過 Marketplace 計量服務 API 通知 Microsoft。

## <a name="prerequisites-for-metered-billing"></a>計量計費的必要條件

為了讓受控應用程式計畫使用計量付費帳單，它必須：

* 符合「 [建立 Azure 應用程式供應](create-new-azure-apps-offer.md)專案」中所述的所有供應專案需求。
* 針對服務的每月成本，設定向客戶收費的 **定價** 。 如果您不想要收取固定費用，而是完全依賴計量付費，價格可以是零。
* 針對客戶將依據一般費率支付的計量事件設定 **計費維度** 。
* 與 [Marketplace 計量服務 api](./marketplace-metering-service-apis.md) 整合，以通知 Microsoft 可計費事件。

## <a name="how-metered-billing-fits-in-with-pricing"></a>計量付費如何以價格納入

當您要定義供應專案及其計價模式時，請務必瞭解供應專案階層。

* 每個 Azure 應用程式供應專案都可以有解決方案範本或受控應用程式方案。
* 計量付費只會使用受控應用程式方案來實行。
* 每個受控應用程式方案都有相關聯的計價模式。 
* 定價模式具有每月週期性費用，可設定為 $0。
* 除了週期性費用之外，方案還可以包含選擇性的維度，用來向客戶收取未包含在一般費率內的使用量。 每個維度都代表您的服務將使用 [Marketplace 計量服務 API](marketplace-metering-service-apis.md)與 Microsoft 通訊的可計費單位。

## <a name="sample-offer"></a>範例供應專案

例如，Contoso 是具有受控應用程式服務的發行者，稱為 Contoso Analytics (CoA) 。 CoA 可讓客戶分析大量資料以進行報告和資料倉儲。 Contoso 會在合作夥伴中心中註冊為發行者，以將供應專案發佈至 Azure 客戶。 有兩個與 CoA 相關聯的計畫，如下所述：

* 基本方案
    * 分析 100 GB 並產生每月 $ 0 的100報表
    * 超過 100 GB，每 1 GB 支付 $10
    * 除了100報表之外，每份報告的費用為 $1
* 進階方案
    * 分析 1000 GB 並產生每月 $ 350 的1000報表
    * 超過 1000 GB，每 1 TB 支付 $100
    * 除了1000報表之外，每份報告的費用為 $0。5

訂閱 CoA 服務的 Azure 客戶可以根據選取的方案，每月分析和產生報告。 Contoso 會將使用量測量到包含的數量，而不會將任何使用量事件傳送給 Microsoft。 當客戶取用超過內含數量時，不需要變更方案或採取任何不同的動作。 Contoso 會測量超過內含數量的超額部分，並開始使用 [Marketplace 計量服務 API](./marketplace-metering-service-apis.md)來產生使用量事件給 Microsoft，以供其他使用。 Microsoft 接著會向客戶收取發行者所指定的其他使用量。

## <a name="billing-dimensions"></a>帳單維度

帳單維度是用來與客戶溝通，以瞭解其使用軟體的計費方式。  這些維度也會用來將使用事件傳達給 Microsoft。 其定義如下：

* **維度識別碼**：發出使用事件時參考的不彈性識別碼。
* **維度名稱**：與維度相關聯的顯示名稱，例如「傳送的文字訊息」。
* **測量單位**：計費單位的描述，例如「每個文字訊息」或「每100電子郵件」。
* **每單位價格**：維度的一個單位的價格。
* **每月期限的內含數量**：每月包含的維度數量，用於支付週期性每月費用的客戶，必須是整數。

帳單維度可在供應專案的所有方案間共用。 某些屬性會套用至所有方案的維度，而其他屬性則適用于方案專屬。

定義維度本身的屬性會跨供應專案的所有方案共用。 在您發行供應專案之前，對這些屬性從任何計畫的內容進行的變更，都會影響所有方案的維度定義。 發佈供應專案之後，就無法再編輯這些屬性。 屬性如下：

* 識別碼
* 名稱
* 測量單位

維度的其他屬性是每個計畫特有的屬性，而且可以有不同的計畫值。  在發行計畫之前，您可以編輯這些值，而且只會影響此計畫。 一旦您發行方案之後，這些屬性將無法再進行編輯。 屬性如下：

* 每一單位價格
* 每月客戶的內含數量 
* 年度客戶的內含數量 

維度也有兩個特殊概念：「已啟用」和「無限」：

* [**已啟用**] 表示此方案參與這個維度。  如果您要建立的新方案不會根據此維度傳送使用狀況事件，您可能會想要將此選項保留為取消核取。 此外，在第一次發行方案之後新增的任何新維度，在已發行的計畫中都會顯示為「未啟用」。  已停用的維度將不會顯示在客戶所見之計畫的任何維度清單中。
* **無限**（以無限大符號 "∞" 表示）表示此計畫會參與此維度，而不會針對此維度進行計量使用量。 如果您想要向客戶指出此維度所代表的功能是否包含在方案中，但沒有使用量限制。  具有無限使用量的維度會顯示在客戶所見之計畫的維度清單中。  此計畫永遠不會產生費用。

>[!Note] 
>明確支援下列案例：  <br> -您可以將新的維度加入至新的方案。  將不會針對任何已發行的方案啟用新的維度。 <br> -您可以使用固定的每月費用和沒有任何維度來發行方案，然後加入新的計畫，並為該方案設定新的維度。 新的維度將不會針對已發行的方案啟用。

## <a name="constraints"></a>條件約束

### <a name="locking-behavior"></a>鎖定行為

與 Marketplace 計量服務搭配使用的維度，代表客戶對服務的支付方式有所瞭解。  一旦發行供應專案之後，就無法再編輯維度的所有詳細資料。  發佈您的供應專案之前，請務必完整定義您的維度。

使用維度發佈供應專案之後，就無法再變更該維度的供應專案層級詳細資料：

* 識別碼
* 名稱
* 測量單位

一旦發行計畫之後，就無法再變更方案層級的詳細資料：

* 每一單位價格
* 每月期限的內含數量
* 是否針對方案啟用維度

>[!Note]
>Azure Government 雲端尚未支援使用 marketplace 計量服務的計量付費。

### <a name="upper-limits"></a>上限

可以為單一供應專案設定的最大維度數目是18個唯一的維度。

## <a name="get-support"></a>取得支援

如果您有下列其中一個問題，您可以開啟支援票證。

* Marketplace 計量服務 API 的技術問題。
* 因為您端的錯誤或錯誤，而需要提升的問題 (例如 ) 的使用事件錯誤。
* 任何其他與計量付費相關的問題。

遵循 [合作夥伴中心中的「商業 marketplace 方案」支援](../support.md) 的指示，瞭解發行者支援選項，並向 Microsoft 提出支援票證。

## <a name="next-steps"></a>後續步驟

- 如需詳細資訊，請參閱 [Marketplace 計量服務 api](./marketplace-metering-service-apis.md) 。
