---
title: 針對相同的輸入設計 Azure Functions
description: 建立 Azure Functions 為等冪
author: craigshoemaker
ms.author: cshoe
ms.date: 9/12/2019
ms.topic: article
ms.openlocfilehash: 15af60ac5a862e6fb20e65ba6fbb92482420b7c0
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/09/2020
ms.locfileid: "74226864"
---
# <a name="designing-azure-functions-for-identical-input"></a>針對相同的輸入設計 Azure Functions

事件驅動和以訊息為基礎的架構的實際情況，就是需要接受相同的要求，同時保留資料完整性和系統穩定性。

為了說明，請考慮電梯通話按鈕。 當您按下按鈕時，會亮起並將電梯傳送至您的樓層。 幾分鐘之後，其他人會將您加入大廳中。 這位人員會肯定您，並按第二次按下發亮的按鈕。 當您提醒您呼叫電梯的命令為等冪時，您會回頭 chuckle 給自己。

在第二、第三或第四個時間按下電梯通話按鈕，並不會影響最終結果。 當您按下按鈕時，無論次數為何，電梯都會傳送至您的樓層。 等冪系統（例如電梯）會產生相同的結果，而不論發出相同的命令數次。

在建立應用程式時，請考慮下列案例：

- 如果您的庫存控制應用程式嘗試多次刪除相同的產品，會發生什麼事？
- 如果有一個以上的要求為同一人建立員工記錄，您的人力資源應用程式如何運作？
- 如果您的銀行應用程式取得100要求以進行相同提款，那麼該怎麼辦？

有許多內容，對函式的要求可能會收到相同的命令。 某些情況包括：

- 重試原則多次傳送相同的要求
- 重新執行到應用程式的快取命令
- 傳送多個相同要求的應用程式錯誤

為了保護資料完整性和系統健康情況，等冪應用程式包含可能包含下列行為的邏輯：

- 在嘗試執行刪除之前確認資料是否存在
- 檢查資料是否已存在，然後再嘗試執行建立動作
- 協調在資料中建立最終一致性的邏輯
- 並行控制
- 重複偵測
- 資料有效期限驗證
- 保護驗證輸入資料的邏輯

最終等冪性的達成方式是確保指定的動作是可行的，而且只執行一次。
