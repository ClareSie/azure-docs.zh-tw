---
title: 錨點關聯性和尋找方式
description: 瞭解錨點關聯性背後的概念模型。 瞭解如何連接空間內的錨點，並使用附近的 API 來達成尋找案例。
author: ramonarguelles
manager: vriveras
services: azure-spatial-anchors
ms.author: rgarcia
ms.date: 02/24/2019
ms.topic: conceptual
ms.service: azure-spatial-anchors
ms.openlocfilehash: 13c85dff40e266287d893d9e45b32a66a33f027e
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "83006025"
---
# <a name="anchor-relationships-and-way-finding-in-azure-spatial-anchors"></a>錨點關聯性和方式-在 Azure 空間錨點中尋找

藉由使用錨點關聯性，您可以在空間中建立連接的錨點，然後再詢問如下的問題：

* 是否有附近的錨點？
* 他們有多遠？

## <a name="examples"></a>範例

在下列情況下，您可以使用已連線的錨點：

* 工作者必須完成一項工作，包括造訪工業工廠中的各種位置。 Factory 在每個位置都有空間錨點。 HoloLens 或行動裝置應用程式可協助將背景工作角色從一個位置引導到下一個位置。 應用程式會先詢問附近的空間錨點，然後引導背景工作角色到下一個位置。 應用程式會以視覺化方式顯示下一個位置的一般方向和距離。

* 「博物館」會在公用顯示器上建立空間錨點。 這些錨點會形成一小時的博物館，其中會顯示一小時的博物館基本公用顯示器。 在公開顯示時，訪客可以在其行動裝置上開啟博物館的混合現實應用程式。 然後，他們會將電話相機指向空間，以查看導覽上其他公用顯示器的一般方向和距離。 當使用者逐步進行公開顯示時，應用程式會更新一般方向和距離，以協助引導使用者。

## <a name="set-up-way-finding"></a>設定方式-尋找

使用「使用*方式*」方向的應用程式以及錨點之間的距離，以提供指引。 向外尋找與輪流導覽不同。 在轉型的導覽中，使用者會引導牆、透過門，以及樓層之間。 使用尋找方式時，使用者會取得目的地一般方向的提示。 但是，對空間的推斷或知識也有助於使用者流覽整個結構到目的地。

若要建立一個方式來尋找經驗，請先準備一個空間以供體驗，並開發使用者將與之互動的應用程式。 這些是概念性的步驟：

1. **規劃空間**：決定空間中的哪些位置將成為尋找體驗的一部分。 在我們的案例中，工廠監督員或博物館導覽協調者可能會決定要將哪些位置納入尋找經驗。
2. **連接錨點**：流覽選擇的位置以建立空間錨點。 您可以在終端使用者應用程式的系統管理員模式或在不同的應用程式中執行此動作。 您會將每個錨點連接或關聯至其他錨點。 服務會維護這些關聯性。
3. **啟動使用者體驗**：使用者執行應用程式來找出錨點，其可位於任何選擇的位置。 您的整體設計應該決定使用者可以進入體驗的位置。
4. **尋找附近的錨點**：在使用者找到錨點之後，應用程式可以要求附近的錨點。 此程式會傳回裝置與這些錨點之間的姿勢。
5. **引導使用者**：應用程式可以對每個錨點使用姿勢，以提供有關使用者的一般方向和距離的指引。 例如，應用程式中的相機饋送可能會顯示圖示和箭號來代表每個可能的目的地，如下圖所示。
6. **精簡指引**：當使用者進行逐步解說時，應用程式可以定期計算裝置與目的地錨點之間的新姿勢。 應用程式會繼續精簡指引提示，協助使用者到達目的地。

    ![應用程式如何顯示方法尋找指引的範例](./media/meeting-spot.png)

## <a name="connect-anchors"></a>連接錨點

若要建立一個方法尋找經驗，您必須先將錨點放在選擇的位置。 在本節中，我們會假設應用程式的系統管理員已經完成這項工作。

### <a name="connect-anchors-in-a-single-session"></a>連接單一會話中的錨點

連接錨點：

1. 使用 CloudSpatialAnchorSession，逐步進行第一個位置並建立錨點。
2. 流覽至第二個位置。 基礎 MR/AR 平臺會追蹤移動。
3. 使用相同的 CloudSpatialAnchorSession 建立錨點 B。 現在已連接錨點 A 和 B。 空間錨點服務會維護此關聯性。
4. 繼續進行其餘錨點的程式。

### <a name="connect-anchors-in-multiple-sessions"></a>連接多個會話中的錨點

您可以透過多個會話連接空間錨點。 使用此方法，您可以一次建立和連接一些錨點，然後再建立並連接更多錨點。

若要連接多個會話的錨點：

1. 應用程式會在一個 CloudSpatialAnchorSession 中建立一些錨點。
2. 應用程式會在不同的時間，使用新的 CloudSpatialAnchorSession 來找出其中一個錨點（例如錨點 A）。
3. 流覽至新的位置。 基礎的混合現實或擴充現實平臺會追蹤移動。
4. 使用相同的 CloudSpatialAnchorSession 建立錨點 C。 現在已連接錨點 A、B 和 C。 空間錨點服務會維護此關聯性。

您可以繼續此程式，以取得更多的錨點和更多會話一段時間。

### <a name="verify-anchor-connections"></a>驗證錨點連接

應用程式可以發出附近錨點的查詢，以確認兩個錨點是否已連線，您可以 `NearAnchorCriteria` 在上設定 `CloudSpatialAnchorWatcher` 。 當查詢的結果包含目標錨點時，就會驗證錨點連接。 如果錨點未連線，應用程式可以嘗試再次連接。

以下是錨點可能無法連接的一些原因：

* 在連接錨點的過程中，根本的混合現實或擴充現實平臺已遺失追蹤。
* 因為與空間錨點服務通訊時發生網路錯誤，所以無法保存錨點連線。

### <a name="find-sample-code"></a>尋找範例程式碼

若要尋找示範如何連接錨點和執行附近查詢的範例程式碼，請參閱[空間錨點範例應用程式](https://github.com/Azure/azure-spatial-anchors-samples)。
