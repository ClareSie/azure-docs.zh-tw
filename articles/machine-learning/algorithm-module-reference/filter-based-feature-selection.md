---
title: 以篩選器為基礎的特徵選取：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何在 Azure Machine Learning 中使用以篩選器為基礎的特徵選取模組，以找出資料集內具有最高預測能力的功能。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/10/2020
ms.openlocfilehash: f4a7f5581703ae6932f3b40e62085fed76f5e6f2
ms.sourcegitcommit: ba7fafe5b3f84b053ecbeeddfb0d3ff07e509e40
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/12/2020
ms.locfileid: "91945697"
---
# <a name="filter-based-feature-selection"></a>以篩選為基礎的特徵選取

本文描述如何在 Azure Machine Learning 設計工具中使用以篩選器為基礎的特徵選取模組。 此課程模組可協助您識別輸入資料集中具有最高預測能力的資料行。 

一般而言， *特徵選取* 是指在給定指定的輸出時，將統計測試套用至輸入的進程。 目標是要判斷哪些資料行是更具預測性的輸出。 以篩選器為基礎的特徵選取模組提供多個特徵選取演算法，可供選擇。 此模組包含相互關聯方法，例如皮耳森相互關聯和卡方值。 

當您使用 [以篩選器為基礎的特徵選取] 模組時，您會提供資料集，並識別包含標籤或相依變數的資料行。 然後，您可以指定要用來測量功能重要性的單一方法。

此模組會輸出包含最佳特徵資料行的資料集，如預測能力的等級。 它也會從選取的度量輸出功能的名稱及其分數。  

## <a name="what-filter-based-feature-selection-is"></a>以篩選器為基礎的特徵選取是什麼  

這項特徵選取的模組稱為「以篩選為基礎」，因為您使用選取的度量來尋找不相關的屬性。 然後，您可以從模型中篩選掉多餘的資料行。 您可以選擇適合您的資料的單一統計量值，且此模組會計算每個特徵資料行的分數。 傳回的資料行會依其特性分數排序。 

選擇正確的特徵就有可能改善分類的精確度和效率。 

您通常只會使用具有最佳分數的資料行來建立預測模型。 特徵選取分數不佳的資料行會保留在資料集中，而且當您建立模型時，會忽略此資料行。  

## <a name="how-to-choose-a-feature-selection-metric"></a>如何選擇特徵選取度量

Filter-Based 特徵選取模組可提供各種計量來評估每個資料行中的資訊值。 本節提供每個度量的一般描述，以及其套用方式。 您可以在 [技術](#technical-notes) 提示和設定每個模組的 [指示](#how-to-configure-filter-based-feature-selection) 中，找到使用每個度量的其他需求。

-   **皮耳森相互關聯**  

    皮耳森的相互關聯統計資料（或皮耳森的相互關聯係數）在統計模型中也是已知的 `r` 值。 對於任何兩個變數，它會傳一個指出相關強度的值。

    皮耳森相關係數的計算公式是先取兩個變數的共變異數，再除以其標準差的乘積。 在這兩個變數中，小數位數的變更不會影響係數。  

-   **卡方平方**  

    雙向卡方測試是一種統計方法，它能測量期望值與實際結果之間的差距。 該方法假設變數是隨機的，並且是從適當的獨立變數範例中抽出。 產生的卡方統計量能指出結果與預期 (隨機) 結果之間的差距。  


> [!TIP]
> 如果您的自訂特徵選取方法需要不同的選項，請使用 [ [執行 R 腳本](execute-r-script.md) ] 模組。 

## <a name="how-to-configure-filter-based-feature-selection"></a>如何設定 Filter-Based 的特徵選取

您可以選擇標準統計度量。 此模組會計算一對資料行之間的相互關聯：標籤資料行和特徵資料行。

1.  將 Filter-Based 的特徵選取模組新增至您的管線。 您可以在設計工具的 [ **特徵選取** ] 類別中找到它。

2. 連接輸入資料集，其中至少包含兩個可能功能的資料行。  

    若要確保資料行經過分析並產生特性分數，請使用 [ [編輯中繼資料](edit-metadata.md) ] 模組來設定 **IsFeature** 屬性。 

    > [!IMPORTANT]
    > 確定您要提供作為輸入的資料行是可能的功能。 例如，包含單一值的資料行沒有資訊值。
    >
    > 如果您知道某些資料行會造成不良的功能，您可以從資料行選取專案中移除它們。 您也可以使用 [ [編輯中繼資料](edit-metadata.md) ] 模組，將它們標示為 **類別**。 
3.  針對 [ **功能評分] 方法**，選擇下列其中一個已建立的統計方法，以用於計算分數。  

    | 方法              | 規格需求                             |
    | ------------------- | ---------------------------------------- |
    | 皮耳森相互關聯 | 標籤可以是文字或數位。 功能必須是數值。 |
    卡方平方| 標籤和功能可以是文字或數位。 使用這個方法來計算兩個類別資料行的功能重要性。|

    > [!TIP]
    > 如果您變更選取的度量，則會重設所有其他選項。 因此，請務必先設定這個選項。
4.  選取 [ **僅操作 feature 資料行** ] 選項，只針對先前標示為特徵的資料行產生分數。 

    如果您清除此選項，此模組會為任何符合準則的資料行建立分數，最多可達 **所需功能**所指定的資料行數目。  

5.  針對 [ **目標資料行**]，選取 [啟動資料 **行選取器** ]，依名稱或索引來選擇標籤資料行。  (索引是以一為基礎。 )   
    牽涉到統計相互關聯的所有方法都需要標籤資料行。 如果您選擇沒有標籤資料行或多個標籤資料行，此模組會傳回設計階段錯誤。 

6.  針對 **所需的功能數目**，輸入您想要傳回結果的功能資料行數目：  

    - 您可以指定的最小功能數目是1，但建議您增加此值。  

    - 如果指定的所需特徵數目大於資料集的資料行數目，則會傳回所有特徵。 甚至會傳回零個分數的特徵。  

    - 如果您指定的結果資料行數目少於特徵資料行，則會依遞減分數來排列這些功能的等級。 只會傳回最高的功能。 

7.  提交管線。

> [!IMPORTANT]
> 如果您要在推斷中使用以 **篩選器為基礎的特徵選取** ，您需要使用 [ [選取資料行] 轉換](./select-columns-transform.md) 來儲存選取的功能結果並套用 [轉換](./apply-transformation.md) ，以將選取的功能轉換套用至評分資料集。
>
> 請參閱下列螢幕擷取畫面來建立您的管線，以確保評分程式的資料行選取專案相同。
> [!div class="mx-imgBorder"]
> ![範例管線](media/module/filter-based-feature-selection-score.png)

## <a name="results"></a>結果

完成處理之後：

+ 若要查看已分析功能資料行及其分數的完整清單，請以滑鼠右鍵按一下模組，然後選取 [ **視覺化**]。  

+ 若要根據您的特徵選取準則來查看資料集，請以滑鼠右鍵按一下模組，然後選取 [ **視覺化**]。 

如果資料集包含的資料行數目少於預期，請檢查模組設定。 也請檢查提供作為輸入之資料行的資料類型。 例如，如果您將 **所需的功能數目** 設定為1，則輸出資料集只會包含兩個數據行：標籤資料行，以及最高排名的特徵資料行。


##  <a name="technical-notes"></a>技術說明  

### <a name="implementation-details"></a>實作詳細資料

如果您在數值功能和類別標籤上使用皮耳森相互關聯，則會以下列方式計算功能分數：  

1.  針對 [類別目錄] 資料行中的每個層級，計算數值資料行的條件平均值。  

2.  將條件式的資料行與數值資料行相互關聯。  

### <a name="requirements"></a>規格需求  

-   針對指定為 **標籤** 或 **分數** 資料行的任何資料行，無法產生特徵選取分數。  

-   如果您嘗試使用計分方法與方法不支援的資料類型資料行，此模組將會引發錯誤。 或者，將零分數指派給資料行。  

-   如果資料行包含邏輯 (true/false) 值，則會將它們當作 `True = 1` 和處理 `False = 0` 。  

-   如果資料行已被指定為 **標籤** 或 **分數**，就不能是功能。  

### <a name="how-missing-values-are-handled"></a>如何處理遺漏值  

-   您無法將任何具有所有遺漏值的資料行指定為目標 (標籤) 資料行。  

-   如果資料行包含遺漏值，則在計算資料行的分數時，模組會忽略這些值。  

-   如果指定為特徵資料行的資料行具有所有遺漏值，則此模組會指派零分數。   


## <a name="next-steps"></a>後續步驟

請參閱 Azure Machine Learning 的[可用模組集](module-reference.md)。 

