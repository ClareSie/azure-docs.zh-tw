---
title: 在 3ds Max 中設定 PBR 材質
description: 說明如何在 3ds Max 中設定以實體為基礎的轉譯材質，並將其匯出為 FBX 格式。
author: FlorianBorn71
ms.author: flborn
ms.date: 06/16/2020
ms.topic: tutorial
ms.openlocfilehash: 12407d6344c69c747230e9db6fa4d53b4520dc82
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/09/2020
ms.locfileid: "91331806"
---
# <a name="tutorial-set-up-physically-based-rendering-materials-in-3ds-max"></a>教學課程：在 3ds Max 中設定以實體為基礎的轉譯材質

## <a name="overview"></a>概觀
在本教學課程中，您將了解如何：

>[!div class="checklist"]
>
> * 將具有進階光源的材質指派給場景中的物件。
> * 處理物件和材質的執行個體。
> * 將場景匯出為 FBX 格式，並選取的重要選項。

> [!Note]
> 本教學課程中說明的程序適用於 3ds Max 2019 和 3ds Max 2020。
> 3ds Max 2021 匯出凹凸貼圖的方式變更後，表示在使用該版本時，轉換服務將不會找到法線貼圖。

在 3ds Max 中建立[以實體為基礎的轉譯 (PBR) 材質](../../overview/features/pbr-materials.md)，這是相當簡單的工作。 在許多方式中，這類似於在其他內容建立應用程式 (例如 Maya) 中進行 PBR 設定。 本教學課程會指引您如何設定 PBR 著色器，以及以 FBX 匯出 Azure 遠端轉譯專案。

本教學課程中的範例場景包含多個多邊形 Box 物件。 這些專案會獲指派不同的材質，例如木材、金屬、繪製金屬、塑膠和橡膠。 大致來說，每個材質都包含下列所有或大部分紋理：

* **Albedo** 是材質的色階配對，也稱為**漫射**和 **BaseColor**。
* **金屬度** 可判定材質是否為金屬，以及哪些零件是金屬。 
* **粗糙度** 可判定表面的粗糙或平滑程度。
其也會影響表面上反射和反白顯示的清晰度或模糊度。
* **法線**會將詳細資料新增至介面，而不需要新增更多多邊形。 詳細資料範例是金屬表面上的凹陷和凹痕，或木材中的顆粒。
* **環境遮蔽**，用來將軟陰影和接觸陰影新增至模型。 其是一個灰階圖，指出模型的哪些區域會收到完整光源 (白色) 或完整陰影 (黑色)。

## <a name="prepare-the-scene"></a>準備場景
在 3ds Max 中，設定 PBR 材質的程序如下所示。

首先，我們將建立一些方塊物件，每個方塊都代表不同類型的材質。

>[!TIP]
>值得注意的是，在您開始建立用於遠端轉譯的資產之前，其會使用公尺來作為測量單位。  
>
>因此，建議您將場景的系統單位設定為公尺。 此外，也建議您在匯出場景時，將 FBX 匯出設定中的**單位**設定為公尺。

下列螢幕擷取畫面顯示在 3ds Max 中將系統單位設定為公尺的步驟。 

1. 在主功能表上，移至 [自訂] > [單位設定] > [系統單位設定]。 在 [系統縮放單位] 中，選取 [公尺]：![顯示如何設定系統單位的螢幕擷取畫面。](media/3dsmax/system-units.jpg)

1. 我們現在可以開始建立模型。 在範例場景中，我們將建立數個方塊物件，每個方塊都代表不同的材質類型。 例如，金屬、橡膠和塑膠。 

   >[!TIP]
   >建立資產時，您應依照情況來適當地為資產命名。 如果場景包含許多物件，此方式可讓您更容易找到資產。

1. 重新命名物件，如下列螢幕擷取畫面所示： 

   ![顯示如何重新命名物件的螢幕擷取畫面。](media/3dsmax/rename-objects.jpg)

## <a name="assign-materials"></a>指派材質

現在，我們的場景中已有一些物件 (在此案例中為一些立方體)，可以開始進行 PBR 設定：

1. 在主要工具列上，選取 [材質編輯器] 圖示，如下列螢幕擷取畫面所示。 您也可以在鍵盤上選取 **M** 以開啟編輯器。 [材質編輯器] 有兩種模式，您可以在 [模式] 清單中選取：**精簡材質編輯器**模式和**岩板材質編輯器**模式。 因為這個場景相當簡單，所以我們將使用精簡模式。

1. 在材質編輯器中，您會看到一些球體。 這些球體都是材質。 我們會將其中一個材質指派給場景中的每個物件 (每個方塊)。 若要指派材質，請先選取主要檢視區中的其中一個物件。 然後在 [材質編輯器] 中選取第一個球體。 將材質指派給物件之後，選取的材質就會反白顯示，如下一個影像中所示。

1. 選取 [將材質指派給選取項目]，如下所示。 材質現在已指派給選取的物件。

   ![顯示如何指派材質的螢幕擷取畫面。](media/3dsmax/assign-material.jpg)

    在材質編輯器中，您可以根據您的需求，從多個選項中選取材質類型。 通常，材質類型預設會設定為 [標準]。 此基本材質不適用於進行 PBR 設定。 因此，我們需要將材質類型變更為 PBR 材質。 Azure 遠端轉譯專案的慣用 3ds Max 材質是 [實體材質]。

1. 在 [材質編輯器] 中，選取 [標準] 索引標籤。在 [材質/貼圖瀏覽器] 中，選取 [實體材質]。 此動作會將指派的 [標準] 材質轉換成 PBR 實體材質。

   ![顯示如何變更材質的螢幕擷取畫面。](media/3dsmax/physical-material.jpg)

    在材質編輯器中，您現在會看到實體材質的屬性，如下列螢幕擷取畫面所示。 您現在可以開始將紋理指派給資產。

   ![顯示紋理清單的螢幕擷取畫面。](media/3dsmax/textures-list.jpg)

如您所見，您可以將各式各樣的貼圖和紋理新增至材質。 在本教學課程中，我們只會在材質中使用五個紋理槽。

>[!TIP]
>您應適當地命名您的材質，如先前的螢幕擷取畫面所示。

您產生紋理的方式會根據喜好設定或用法而有所不同。 例如，您可以使用可套用至任何資產的貼磚紋理。 或者，您可以讓專案或資產的特定部分擁有自己的自訂紋理集。 您可以使用可在線上取得的一般貼磚紋理。 也可以在 Photoshop、Quixel Suite 和 Substance Suite 等應用程式中自行建立紋理。

開始指派紋理之前，我們必須考慮資產的紋理座標 (UVW)。 當您將任何紋理套用至模型時，您應確保模型已解除包裝。 (若未適當地將 UV 解除包裝，紋理將不會正確顯示。)這對於我們的用途而言特別重要，因為我們想要在模型上使用環境遮蔽 (AO) 貼圖。 不同於 Maya 中的 Stingray 著色器，3ds Max 中的實體材質沒有專用的 AO 紋理槽。 因此，我們會將 AO 貼圖套用到另一個槽。 為允許其與另一個紋理分開使用 (例如，貼磚紋理)，我們會為其指派自己的 UVW 貼圖通道。 

首先，我們會將解除包裝 UVW 修改器指派給模型，如下列螢幕擷取畫面所示。 

- 在選取的物件屬性編輯器中，選取修改器清單。 在出現的下拉式清單中，向下捲動，然後選取 [解除包裝 UVW]。 此動作會將解除包裝 UVW 修改器套用至資產。
![如何選取解除包裝 UVW 的螢幕擷取畫面。](media/3dsmax/unwrap-modifier.jpg)

  貼圖通道已設定為 1。 您通常會在貼圖通道 1 中執行主要的解除包裝動作。 在此案例中，物件已解除包裝，且沒有重疊的紋理座標 (UV)。
![顯示未包裝的紋理座標 (UVW) 的螢幕擷取畫面。](media/3dsmax/unwrapped-uvw.jpg)

下一個步驟是建立第二個 UV 貼圖通道。

1. 關閉 UV 編輯器 (如果已開啟)。 在 [編輯 UV] 功能表的 [通道] 區段中，將頻道號碼變更為 **2**。 貼圖通道 2 是 AO 貼圖的預期通道。 

1. 在 [通道變更警告] 對話方塊中，您可以將通道 1 中現有的 UV [移動] 至新的通道 2，或 [放棄] 現有的 UV，以自動建立新的 [UV 解除包裝]。 只有當您計畫為 AO 貼圖建立新的 UV 解除包裝 (與貼圖頻道 1 中的 UV 不同) 時，才應該選取 [放棄]。 (例如，如果您想要在通道 1 中使用貼磚紋理。)在本教學課程中，我們會將 UV 從通道 1 移至通道 2，因為我們不需要編輯新的 UV 通道。

   >[!NOTE]
   >即使您已將 UV 解除包裝從貼圖通道 1 複製 (移動) 到貼圖通道 2，仍可以對新的通道 UV 進行任何必要編輯，而不會影響原始的貼圖通道。

   ![顯示通道變更警告的螢幕擷取畫面。](media/3dsmax/channel-change.jpg)

現在，我們已建立新的貼圖通道，我們可以回到材質編輯器中的實體材質，然後開始在其中新增我們的紋理。 首先，我們將新增 AO 貼圖，因為有另一個步驟可讓其正常運作。 將 AO 貼圖插入我們的材質之後，我們需要將其設定為使用貼圖通道 2。

如先前所述，3ds Max 實體材質中沒有適用於 AO 貼圖的專用槽。 我們會改為將 AO 貼圖套用到 [漫射粗糙度] 槽。

1. 在實體材質的 [一般貼圖] 清單中，選取 [漫射粗糙度] 的 [沒有貼圖] 槽，並載入您的 AO 貼圖。

1. 在 [AO 紋理屬性] 中，[貼圖頻道] 會預設設定為 **1**。 將此值變更為 **2**。 此動作會完成新增您 AO 貼圖所需的步驟。

   >[!IMPORTANT]
   >這是很重要的步驟，特別是當通道 2 中的 UV 與通道 1 中的不同時，因為如果選取了錯誤的通道，AO 將無法正確進行貼圖。

   ![顯示如何指派 AO 貼圖的螢幕擷取畫面。](media/3dsmax/assign-ao-map.jpg)

我們現在會將法線貼圖指派給 PBR 材質。 此動作與 Maya 中的程序有些不同。 法線貼圖不會直接套用至凹凸貼圖槽。 (3ds Max 實體材質中沒有法線貼圖槽。)相反地，您會將法線貼圖新增至法線貼圖修改器 (其本身會插入法線槽中)。

1. 在實體材質屬性的 [特殊貼圖] 區段 (在 [材質編輯器] 中) 中，選取 [凹凸貼圖] 旁的 [沒有貼圖] 槽。 

1. 在 [材質/貼圖瀏覽器] 中，找出並選取 [法線凹凸]。 此動作會將 [法線凹凸] 修改器新增至材質。

1. 在 [法線凹凸] 修改器中，選取 [法線] 旁的 [沒有貼圖]。 找出並載入您的法線貼圖。

1. 請確定方法已設定為 [切線]。 (此方法應是預設值。)如有必要，請切換 [Flip Green (Y)]\(翻轉綠色 (Y))\。

   ![顯示如何選取法線凹凸的螢幕擷取畫面。](media/3dsmax/normal-bump.jpg)
   ![顯示載入法線貼圖的螢幕擷取畫面。](media/3dsmax/load-normal-map.jpg)

若已正確指派法線貼圖，我們就可以指派其餘紋理來完成實體材質設定。 此程序佷簡單。 不需要考慮任何特殊設定。 下列螢幕擷取畫面顯示指派給材質的完整紋理集： 

![顯示完整紋理集指派給材質的螢幕擷取畫面。](media/3dsmax/all-textures.jpg)

現在，我們已建立並設定了 PBR 材質，接下來可考慮將場景中的物件執行個體化。 將場景中的相似物件 (例如螺母、螺栓、螺絲和墊圈) 執行個體化。 任何的相同物件都可以大幅節省檔案大小。 主要物件的執行個體可以有自己的縮放、旋轉和轉換，因此可以視需要放置在場景中。 在 3ds Max 中，執行個體化的程序很簡單。

1. 在主要檢視區中，選取您想要匯出的一個或多個物件。

1. 按住 **Shift** 鍵，然後使用轉換 (移動) 工具將資產向上拖曳。 

1. 在 [複製選項] 對話方塊中，將 [物件] 設定為 [執行個體]，然後選取 [確定]：

   ![[複製選項] 對話方塊的螢幕擷取畫面。](media/3dsmax/instance-object.jpg)

此動作會建立物件的執行個體，而您可以移動、旋轉或縮放此執行個體，且與其父系和該父系的其他執行個體無關。

>[!IMPORTANT]
>您在子物件模式中對執行個體所做的任何變更，都會傳送至物件的所有執行個體。 因此，如果您使用的是執行個體化物件的元件 (例如頂點和多邊形臉部)，請確定您想要讓所做的任何變更影響所有執行個體。 請記住，隨時都可以在唯一物件中建立任何執行個體化物件。 

>[!TIP]
>在場景中進行執行個體化時，最好是邊進行邊建立執行個體。 之後要以執行個體物件取代複本會很困難。 

在繼續進行匯出程序之前，最後一件必須先考慮的事，就是您可能想要封裝場景/資產以供分享。 在理想情況下，如果您將資產傳遞給用戶端或小組成員，您會希望他們能夠開啟並檢視資產，因為其應該會以最不複雜的方式顯示。 因此，請務必讓您的資產紋理路徑相對於場景檔案。 當資產的紋理路徑指向本機磁碟或絕對路徑/位置時，如果在不同的電腦上開啟，就不會載入場景中，即使是 .max 檔案也會放在與紋理相同的資料夾中。 使紋理路徑相對於 3ds Max 可解決此問題，而且相當簡單。

1. 在主要工具列中，移至 [檔案] > [參考] > [資產追蹤切換]。 

1. 在 [資產追蹤] 視窗中，您會看到已套用至您 PBR 材質的所有或大部分紋理列在 [貼圖/著色器] 資料行中。

1. 在其旁邊的 [完整路徑] 資料行中，您會看到紋理位置的路徑，最有可能是其在您本機電腦上的位置路徑。

1. 最後，您會看到名為 [狀態] 的資料行。 此資料行會指出指定的紋理是否已找到並套用至您的場景。 其會使用下列其中一個詞彙來標示紋理：**成功**、**已找到**或**遺漏檔案**。 前兩個表示已找到該檔案並已載入。 最後一個明顯表示追蹤程式找不到檔案。
 
   ![顯示 [資產追蹤] 視窗的螢幕擷取畫面。](media/3dsmax/texture-paths.jpg)

您可能會注意到，當您第一次開啟 [資產追蹤] 視窗時，並不會列出所有紋理。 這並不需要擔心。 透過路徑尋找程序執行一次或兩次，通常會找到所有場景紋理。 path-finding 程序如下所示： 

1. 在 [資產追蹤] 視窗中，按住 **Shift** 鍵，然後選取 [貼圖/著色器] 清單中最頂端的紋理，然後繼續按住 **Shift** 並選取清單中的最後一個紋理。 這個動作會選取清單中的所有紋理。 選取的紋理會以藍色醒目提示。 (請參閱上面的螢幕擷取畫面。)

1. 以滑鼠右鍵按一下選取範圍，然後選取 [設定路徑]。

1. 在 [指定資產路徑] 方塊中，選取紋理的本機路徑，並將其取代為 [`.\`]。  選取 [確定]。 

    [資產追蹤] 視窗將會更新，如下列螢幕擷取畫面所示。 這項更新可能需要一些時間，視場景中有多少紋理以及場景的大小而定。
![顯示已更新資產追蹤視窗的螢幕擷取畫面。](media/3dsmax/resolve-textures.jpg)

請注意，[完整路徑] 資料行現在為空白。 這表示場景不會再尋找特定 (絕對) 位置中的相關紋理。 只要. max 檔案或相關的 FBX 檔案位於與紋理相同的資料夾中，就一定可以找到紋理。 

>[!NOTE]
>您可能必須重複此程序幾次，才能找到並解析所有紋理和路徑。 這並不需要擔心。 只要重複此程序，直到所有相關資產都列入為止。 在某些情況下，您會找不到某些檔案。 在此情況下，只需選取清單中的所有資產，然後選取 [移除遺漏的路徑]。 (請見上方影像。)

## <a name="fbx-export"></a>FBX 匯出

現在，我們已將紋理路徑設為相對路徑，接著我們就可以繼續進行 FBX 匯出。 同樣地，程序很簡單，且可以透過幾種方式來完成。 

>[!TIP]
>除非您想要匯出整個場景，否則最好的方式是選擇只匯出所需的資產。 在耗用大量資源的場景中，匯出可能需要很長的時間。
>
>如果您已使用 Turbosmooth 或 Open SubDiv 之類的修改器，最好在匯出前將其折疊，因為這些修改器可能會在匯出期間發生問題。 在摺疊之前，請務必先儲存場景。 

1. 在場景中，選取您要匯出的資產。 在主要工具列上，移至 [檔案] > [匯出] > [匯出選取的項目]。

1. 在 [選取要匯出的檔案] 對話方塊中，輸入或選取輸出檔案名稱。 在 [存檔類型] 清單中，選取 [Autodesk (*.fbx)]。 此動作會開啟 FBX 匯出視窗。

  >[!IMPORTANT] 
  >如果您已在場景中建立執行個體，請務必在 FBX 匯出設定中選取 [保留執行個體]。 

  ![顯示如何匯出至 FBX 的螢幕擷取畫面。](media/3dsmax/fbx-export.jpg)

  請記住，有幾種方式可以匯出檔案。 如果想要在資料夾/目錄中與其紋理檔案共用 FBX，則下列螢幕擷取畫面中顯示的設定應該能捯到此目的。 

   如果您不想要與 FBX 共用大型的紋理資料夾/目錄，則可以選擇在 FBX 中內嵌紋理。 如果您內嵌紋理，則會將整個資產 (包括紋理) 新增至單一 FBX。 這麼做會將您的匯出結合成單一資產，但 FBX 檔案的大小會大幅增加。

   >[!IMPORTANT]
   >如果產生的 FBX 檔案大於 2.4 GB，則 FBX 匯出設定中指定的最低版本應該是 2016 或更新版本。 (請參閱上面的螢幕擷取畫面。)較新的版本具有 64 位元支援，因此可支援更大的檔案。

1. 如果您想要匯出包含紋理的場景，請在 *FBX 匯出視窗中選取 [內嵌媒體]。 

1. 選取其餘的設定，然後選取 [確定]：

    ![顯示 FBX 匯出設定的螢幕擷取畫面。](media/3dsmax/fbx-settings.jpg)


   當您使用實體材質匯出至 FBX 時，您可能會在您選取 FBX 匯出視窗中的 [確定] 後，看到下列警告： 

   ![顯示材質匯出失敗警告的螢幕擷取畫面。](media/3dsmax/export-warnings.jpg)

   這則警告會告訴您，匯出的材質可能與其他軟體套件不相容。 因為實體材質與 Azure 遠端轉譯相容，所以您不需要擔心此警告。 

1. 選取 [確定] 即可完成程序並關閉視窗。

## <a name="conclusion"></a>結論

通常，這種類型的材質看起來更逼真，因為這是以真實世界的光線物理學為依據。 其會建立一個額外的沉浸式效果，讓場景好像存在於現實世界中。

## <a name="next-steps"></a>後續步驟

您現在已經知道如何為場景中的物件設定具有進階光源的材質。 也知道如何將物件匯出為 Azure 遠端轉譯所支援的 FBX 格式。 下一個步驟是轉換 FBX 檔案，並在 Azure 遠端轉譯中將其視覺化。

>[!div class="nextstepaction"]
>[快速入門：轉換模型以進行轉譯](../../quickstarts\convert-model.md)
