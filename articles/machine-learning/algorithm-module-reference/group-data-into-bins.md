---
title: 將資料分組到 Bin：模組參考
titleSuffix: Azure Machine Learning
description: 了解如何使用「將資料分組成 Bin」模組來將數值分組，或變更連續資料的散發。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 05/19/2020
ms.openlocfilehash: de9f4517d134b4a42603291110c6b19f69403412
ms.sourcegitcommit: 53acd9895a4a395efa6d7cd41d7f78e392b9cfbe
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/22/2020
ms.locfileid: "90907029"
---
# <a name="group-data-into-bins-module"></a>將資料群組至 Bin 模組

本文說明如何在 Azure Machine Learning 表設計工具中使用 [將資料加入至 Bin] 模組、將數位分組或變更連續資料的分佈。

將資料分組成 Bin模組支援量化資料的多個選項。 您可以自訂量化邊緣的設定方式，以及如何將值分配到 Bin 中。例如，您可以：  

+ 手動輸入一系列值作為 Bin 界限。  
+ 使用「分位數」或百分位數排名，將值指派給 Bin。  
+ 強制將值平均散發至 Bin。  

## <a name="more-about-binning-and-grouping"></a>深入了解量化和群組

*分類收納* 或分組資料 (有時稱為 *量化*) 是準備機器學習之數值資料的重要工具。 這在這類案例中很有用：

+ 連續數位的資料行具有太多唯一值可有效地建立模型。 因此，您可以自動或手動將值指派給群組，以建立一組較小的離散範圍。

+ 您想要以代表特定範圍的類別值來取代數位的資料行。

    例如，您可能想要藉由指定自訂範圍 (例如，1-15、16-22、23-30 等等) 來將年齡資料行中的值群組在一起，以取得使用者人口統計。

+ 資料集有幾個極端的值，全都在預期的範圍外，而這些值對定型的模型有巨大影響。 若要緩解模型中的偏差，您可以使用分量方法，將資料轉換為統一散發。

    使用此方法時，將資料分組成 Bin 模組會決定理想的 Bin 位置和 Bin 寬度，以確保大約相同數目的樣本落在每個 Bin 中。 然後，根據您所選擇的正規化方法，會將 bin 中的值轉換為百分位數或對應至 bin 編號。

### <a name="examples-of-binning"></a>量化的範例

下圖顯示使用*分位數*方法進行量化前後，數值的分佈。 請注意，相較於左側的未經處理資料，資料已經過量化並轉換成一般單位的規模。  

您可以 [從這個管線執行的結果中找到範例](https://ml.azure.com/visualinterface/authoring/Normal/87270db9-4651-448e-bd28-8ef7428084dc?wsid=%2Fsubscriptions%2Fe9b2ec51-5c94-4fa8-809a-dc1e695e4896%2Fresourcegroups%2Fmodule-ws-rg%2Fworkspaces%2Fmodule-prerelease-119&flight=cm&tid=72f988bf-86f1-41af-91ab-2d7cd011db47&smtendpoint=https%3A%2F%2Fsmt-test1.azureml-test.net)。

因為有這麼多的方式可將資料分組，而且全部都可以自訂，所以我們建議您試驗不同的方法和值。 

## <a name="how-to-configure-group-data-into-bins"></a>如何設定將資料分組成 Bin

1. 在設計工具中，將 **群組資料** 新增至您的管線中的「bin」模組。 您可以在 [資料轉換] 類別中找到此模組。

2. 將具有數值資料的資料集連線到 Bin。 量化只能套用至包含數值資料的資料行。 

    如果資料集包含非數值的資料行，請使用[選取資料集中的資料行](select-columns-in-dataset.md)模組，選取要使用的資料行子集。

3. 指定量化模式。 分類收納模式會決定其他參數，因此請務必先選取 [ **分類收納模式]** 選項。 支援下列類型的量化：

    - **分位數**：分位數方法會依據百分位等級，將值指派至分類收納。 這個方法也稱為相等的高度分類收納。

    - **等寬：使用**此選項時，您必須指定總的 bin 數。資料行中的值會放在 bin 中，使每個 bin 在開始與結束值之間具有相同的間隔。 如此一來，如果資料聚集在特定點周圍，某些分類收納可能會更多值。

    - **自訂邊緣**：您可以指定每個 Bin 開頭的值。 邊緣值一律是 Bin 的下限。 
    
      例如，假設您想要將值分組為兩個 bin。其中一個值會有大於0的值，其中一個值的值小於或等於0。 在此情況下，如果是 bin 邊緣，請在以**逗號分隔的 bin 邊緣清單**中輸入**0** 。 模組的輸出將會是1和2，表示每個資料列值的 bin 索引。 請注意，逗號分隔值清單必須是遞增順序，例如1、3、5、7。

4. 如果您使用的是 [ **分量** ] 和 [ **相等寬度** 分類收納] 模式，請使用 [ **bin 數目** ] 選項來指定您要建立多少個 bin 或 *分量*。

5. 針對 [ **要分類**的資料行]，請使用資料行選取器來選擇具有您要加入之值的資料行。 資料行必須是數值資料類型。

    相同的量化規則會套用到您選擇的所有適用資料行。 如果您需要使用不同的方法來放置某些資料行，請針對每個資料行集，使用個別的群組資料實例至 Bin 模組。

    > [!WARNING]
    > 如果您選擇的資料行不是允許的類型，就會產生執行階段錯誤。 當模組找到不允許類型的任何資料行時，就會傳回錯誤。 如果您收到錯誤，請檢閱所有選取的資料行。 此錯誤不會列出所有無效的資料行。

6. 針對 [ **輸出模式]**，指出您要如何輸出量化值：

    + **附加**：使用分類收納值建立新的資料行，並將該資料行附加至輸入資料表。

    + **Inplace**：以資料集中的新值取代原始值。

    + **ResultOnly**：只傳回結果資料行。

7. 如果您選取 **分量** 分類收納模式，請使用 **分量** 正規化選項來判斷值在排序至分量之前的標準化方式。 請注意，正規化值會轉換值，但不會影響最終的 bin 數目。

    支援下列正規化類型：

    + **百分比**：值在範圍 [0100] 內正規化。

    + **則 pquantile**：值在 [0，1] 範圍內正規化。

    + **QuantileIndex**：值會在 [1，bin 數目] 範圍內正規化。

8. 如果您選擇 [ **自訂邊緣** ] 選項，請輸入以逗號分隔的數位清單， *以逗號* 分隔的 [ **bin 邊緣** ] 文字方塊清單的形式來使用。 

    值會標示分割 bin 的點。例如，如果您輸入一個 bin 邊緣值，將會產生兩個 bin。 如果您輸入兩個 bin 邊緣值，將會產生三個 bin。

    這些值必須依照建立 bin 的順序來排序，從最低到最高。

10. 選取 [將資料 **行標記為類別** ] 選項，表示應該將量化資料行當作類別變數來處理。

11. 提交管線。

## <a name="results"></a>結果

將資料分組成 Bin 模組會傳回資料集，其中的每個元素均根據指定的模式量化。 

它也會傳回 *分類收納轉換*。 您可以使用相同的分類收納模式和參數，將該函式傳遞至套用 [轉換](apply-transformation.md) 模組，以將資料的新範例分類。  

> [!TIP]
> 如果您在定型資料上使用分類收納，您必須針對用於測試和預測的資料使用相同的分類收納方法。 您也必須使用相同的 bin 位置和 bin 寬度。 
> 
> 為確保一律使用相同的分類收納方法來轉換資料，我們建議您儲存有用的資料轉換。 然後使用 [套用 [轉換](apply-transformation.md) ] 模組將它們套用至其他資料集。

## <a name="next-steps"></a>後續步驟

請參閱 Azure Machine Learning 的[可用模組集](module-reference.md)。 
