---
title: 將資料群組到 Bin：模組參考
titleSuffix: Azure Machine Learning
description: 了解如何使用「將資料分組成 Bin」模組來將數值分組，或變更連續資料的散發。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 05/19/2020
ms.openlocfilehash: d3a9f88325f03d0252adf51c5bf221b131d7d33b
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "84751727"
---
# <a name="group-data-into-bins-module"></a>將資料群組到 Bin 模組

本文說明如何在 Azure Machine Learning 設計工具 (預覽) 中使用將資料分組成 Bin 模組，以將數值分組，或變更連續資料的散發。

將資料分組成 Bin模組支援量化資料的多個選項。 您可以自訂量化邊緣的設定方式，以及如何將值分配到 Bin 中。例如，您可以：  

+ 手動輸入一系列值作為 Bin 界限。  
+ 使用「分位數」或百分位數排名，將值指派給 Bin。  
+ 強制將值平均散發至 Bin。  

## <a name="more-about-binning-and-grouping"></a>深入了解量化和群組

為機器學習服務準備數值資料時，*分類收納*或群組資料（有時稱為*量化*）是一項重要的工具。 這在下列案例中很有用：

+ 連續數位的資料行有太多的唯一值，可有效率地建立模型。 因此，您可以自動或手動將值指派給群組，以建立一組較小的離散範圍。

+ 您想要以代表特定範圍的類別值來取代數位的資料行。

    例如，您可能想要藉由指定自訂範圍 (例如，1-15、16-22、23-30 等等) 來將年齡資料行中的值群組在一起，以取得使用者人口統計。

+ 資料集有幾個極端的值，全都在預期的範圍外，而這些值對定型的模型有巨大影響。 若要減輕模型中的偏差，您可以使用分量方法，將資料轉換成統一的散發。

    使用此方法時，將資料分組成 Bin 模組會決定理想的 Bin 位置和 Bin 寬度，以確保大約相同數目的樣本落在每個 Bin 中。 然後，根據您選擇的正規化方法，會將 bin 中的值轉換成百分位數或對應到 bin 數位。

### <a name="examples-of-binning"></a>量化的範例

下圖顯示使用*分位數*方法進行量化前後，數值的分佈。 請注意，相較於左側的未經處理資料，資料已經過量化並轉換成一般單位的規模。  

您可以[從這個管線執行的結果中找到範例](https://ml.azure.com/visualinterface/authoring/Normal/87270db9-4651-448e-bd28-8ef7428084dc?wsid=%2Fsubscriptions%2Fe9b2ec51-5c94-4fa8-809a-dc1e695e4896%2Fresourcegroups%2Fmodule-ws-rg%2Fworkspaces%2Fmodule-prerelease-119&flight=cm&tid=72f988bf-86f1-41af-91ab-2d7cd011db47&smtendpoint=https%3A%2F%2Fsmt-test1.azureml-test.net)。

因為有這麼多的方式可將資料分組，而且全部都可以自訂，所以我們建議您試驗不同的方法和值。 

## <a name="how-to-configure-group-data-into-bins"></a>如何設定將資料分組成 Bin

1. 在設計工具（預覽）中，將**群組資料**新增至 [bin] 模組中的管線。 您可以在 [資料轉換] 類別中找到此模組。

2. 將具有數值資料的資料集連線到 Bin。 量化只能套用至包含數值資料的資料行。 

    如果資料集包含非數值的資料行，請使用[選取資料集中的資料行](select-columns-in-dataset.md)模組，選取要使用的資料行子集。

3. 指定量化模式。 分類收納模式會決定其他參數，因此請務必先選取 [**分類收納模式]** 選項。 支援下列類型的量化：

    - **分位數**：分位數方法會依據百分位等級，將值指派至分類收納。 這個方法也稱為相同的高度分類收納。

    - **等寬：使用**此選項時，您必須指定 bin 的總數目。資料行中的值會放在 bin 中，因此每個 bin 的開始和結束值之間會有相同的間隔。 如此一來，如果資料聚集在特定點周圍，某些分類收納可能會更多值。

    - **自訂邊緣**：您可以指定每個 Bin 開頭的值。 邊緣值一律是 Bin 的下限。 
    
      例如，假設您想要將值分組成兩個區間。其中一個值會大於0，而一個值會小於或等於0。 在此情況下，針對 [bin 邊緣]，您可以輸入**0** （以**逗號分隔的 bin 邊緣清單**）。 模組的輸出會是1和2，表示每個資料列值的 bin 索引。 請注意，逗點分隔值清單必須以遞增順序排序，例如1、3、5、7。

4. 如果您使用**分量**和相等的**寬度**分類收納模式，請使用 [ **bin 數**] 選項來指定您想要建立多少個 bin 或*分量*。

5. 針對 [**要加入 bin**的資料行]，請使用 [資料行選取器] 選擇具有您想要使用 bin 值的資料行。 資料行必須是數值資料類型。

    相同的量化規則會套用到您選擇的所有適用資料行。 如果您需要使用不同的方法來為某些資料行加上 bin，請針對每一組資料行使用個別的群組資料實例放入 [Bin] 模組。

    > [!WARNING]
    > 如果您選擇的資料行不是允許的類型，則會產生執行階段錯誤。 當模組找到不允許類型的任何資料行時，就會傳回錯誤。 如果您收到錯誤，請檢閱所有選取的資料行。 此錯誤不會列出所有無效的資料行。

6. 針對 [**輸出模式]**，指出您想要如何輸出量化值：

    + **Append**：使用分類收納值建立新的資料行，並將其附加至輸入資料表。

    + **Inplace**：以資料集中的新值取代原始值。

    + **ResultOnly**：只傳回結果資料行。

7. 如果您選取 [**分量**] 分類收納模式，請使用**分量**正規化選項來決定如何在排序為分量之前，先標準化值。 請注意，正規化值會轉換值，但不會影響最終的 bin 數目。

    支援下列正規化類型：

    + **百分比**：值在範圍 [0100] 內正規化。

    + **PQuantile**：值會在 [0，1] 範圍內正規化。

    + **QuantileIndex**：值會在 [1，bin 數目] 範圍內正規化。

8. 如果您選擇 [**自訂邊緣**] 選項，請在 [ **Bin 邊緣的逗號分隔清單**] 文字方塊中輸入以逗號分隔的數位清單，做為*bin 邊緣*使用。 

    這些值會標示分割區間的點。例如，如果您輸入一個 bin 邊緣值，則會產生兩個儲箱。 如果您輸入兩個 bin 邊緣的值，則會產生三個儲箱。

    值必須依照建立的順序排序，從最低到最高。

10. 選取 [將資料**行標記為類別**] 選項，表示應該將量化資料行當做類別變數來處理。

11. 提交管線。

## <a name="results"></a>結果

將資料分組成 Bin 模組會傳回資料集，其中的每個元素均根據指定的模式量化。 

它也會傳回*分類收納轉換*。 該函式可以傳遞至 [套用[轉換](apply-transformation.md)] 模組，藉由使用相同的分類收納模式和參數來將資料的新範例加入 bin。  

> [!TIP]
> 如果您在定型資料上使用分類收納，則必須在用於測試和預測的資料上使用相同的分類收納方法。 您也必須使用相同的 bin 位置和 bin 寬度。 
> 
> 若要確保一律使用相同的分類收納方法來轉換資料，我們建議您儲存有用的資料轉換。 然後使用 [套用[轉換](apply-transformation.md)] 模組，將它們套用至其他資料集。

## <a name="next-steps"></a>後續步驟

請參閱 Azure Machine Learning 的[可用模組集](module-reference.md)。 
