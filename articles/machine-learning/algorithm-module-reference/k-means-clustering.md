---
title: K-意味著聚類：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何在 Azure 機器學習中使用 K-意味著聚類別模組來訓練聚類模型。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/19/2020
ms.openlocfilehash: 9606768288cc74afc24491149eb471944f45e2dc
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/28/2020
ms.locfileid: "77921159"
---
# <a name="module-k-means-clustering"></a>模組：K-意味著聚類

本文介紹如何使用 Azure 機器學習設計器（預覽）中的*K-意味著聚類*模組創建未經訓練的 K-表示聚類模型。 
 
K-means 是最簡單且最著名的*無監督*學習演算法之一。 您可以將該演算法用於各種機器學習任務，例如： 

* [檢測異常資料](https://msdn.microsoft.com/magazine/jj891054.aspx)。
* 對文字文件進行群集。
* 在使用其他分類或回歸方法之前分析資料集。 

要創建聚類模型，請：

* 將此模組添加到管道中。
* 串連資料組。
* 設置參數，如預期的群集數、創建群集時使用的距離指標等。 
  
配置模組超參數後，將未經訓練的模型連接到[訓練群集模型](train-clustering-model.md)。 由於 K-表示演算法是一種無監督學習方法，因此標籤列是可選的。 

+ 如果資料包含標籤，則可以使用標籤值來指導群集的選擇並優化模型。 

+ 如果資料沒有標籤，演算法將僅根據資料創建表示可能類別的群集。  

##  <a name="understand-k-means-clustering"></a>瞭解 K-意味著聚類
 
通常，聚類使用反覆運算技術將資料集中的案例分組到具有類似特徵的群集中。 這些分組可用於探索資料、識別資料中的異常，並最終用於進行預測。 聚類模型還可以説明您識別資料集中的關係，而這些關係可能無法通過流覽或簡單觀察從邏輯上派生。 由於這些原因，聚類通常用於機器學習任務的早期階段，以探索資料和發現意外的相關性。  
  
 使用 K-means 方法配置聚類模型時，必須指定一個目標編號*k，* 指示模型中所需的*質心*數。 質心是代表每個群集的點。 K-表示演算法通過最小化聚類內部平方和，將每個傳入資料點分配給其中一個群集。 
 
處理訓練資料時，K-意味著演算法從一組隨機播放的質心開始。 中心作為群集的起點，它們應用勞埃德演算法反覆運算優化其位置。 K-means 演算法在滿足以下一個或多個條件時停止構建和優化群集：  
  
-   質心穩定，這意味著單個點的群集分配不再更改，並且演算法已收斂到解決方案上。  
  
-   演算法會完成執行指定的反覆運算次數。  
  
 完成訓練階段後，可以使用["將資料分配給群集"](assign-data-to-clusters.md)模組將新案例分配給使用 K-means 演算法找到的群集之一。 通過計算新大小寫和每個群集的質心之間的距離來執行群集分配。 每個新案例都分配給具有最近質心的群集。  

## <a name="configure-the-k-means-clustering-module"></a>配置 K-意味著群集模組
  
1.  將**K-意味著群集**模組添加到管道中。  
  
2.  要指定如何訓練模型，請選擇 **"創建培訓師模式"** 選項。  
  
    -   **單一參數**：如果您知道要在聚類模型中使用的確切參數，則可以提供一組特定的值作為參數。  
  
3.  對於**質心數**，鍵入您希望演算法開始的群集數。  
  
     不能保證模型能夠生成如此數量的群集。 該演算法從此數量的資料點開始，並重新進行，以找到最佳配置。  
  
4.  屬性**初始化**用於指定用於定義初始群集配置的演算法。  
  
    -   **前 N：** 從資料集中選擇一些初始資料點數，並將其用作初始手段。 
    
         此方法也稱為*Forgy 方法*。  
  
    -   **隨機**：該演算法將資料點隨機放置到群集中，然後計算初始平均值為群集隨機分配的點的質心。 

         此方法也稱為*隨機分區*方法。  
  
    -   **K-Means#**：這是初始化群集的預設方法。  
  
         2007年，大衛·亞瑟和謝爾蓋·瓦西爾維茨基提出了**K-表示+** 演算法，以避免標準K-提指演算法的聚類不良。 **K-表示*** 使用其他方法來選擇初始群集中心，從而改進了標準 K 表示方法。  
  
    
5.  對於**亂數種子，** 可以選擇鍵入用作群集初始化的種子的值。 此值可能對群集選擇產生重大影響。  
  
6.  對於**Metric**，選擇用於測量聚類向量之間或新資料點與隨機播放的質心之間的距離的函數。 Azure 機器學習支援以下群集距離指標：  
  
    -   **歐幾裡得**：歐幾裡得距離通常用於K-手段聚類的聚類散射量。 此為慣用度量，因為它可以將點與距心之間的平均距離縮到最短。
  
7.  對於**反覆運算**，鍵入演算法在最終確定質心選擇之前應反覆運算訓練資料的次數。  
  
     您可以調整此參數以平衡精度與訓練時間。  
  
8.  對於 **"分配標籤"模式**，請選擇一個選項，指定如何處理標籤列（如果標籤列存在於資料集中）。  
  
     由於 K-意味著聚類是一種不受監督的機器學習方法，因此標籤是可選的。 但是，如果資料集已具有標籤列，則可以使用這些值來指導群集的選擇，也可以指定忽略這些值。  
  
    -   **忽略標籤列**：標籤列中的值將被忽略，並且不用於生成模型。
  
    -   **填充缺失值**：標籤列值用作説明生成群集的要素。 如果缺少任何行標籤，則使用其他要素將歸納該值。  
  
    -   **從最近到中心覆蓋**：使用最接近當前質心的點的標籤，將標籤列值替換為預測標籤值。  

8.  如果要在訓練前正常化要素，請選擇 **"正常化要素**"選項。
  
     如果應用正常化，則在訓練之前，MinMaxNormalizer 將`[0,1]`資料點正常化為資料點。

10. 將模型定型。  
  
    -   如果將 **"創建訓練器模式"** 設置為 **"單個參數**"，請委任標記的資料集，並使用[訓練器群集模型](train-clustering-model.md)模組訓練模型。  
  
## <a name="results"></a>結果

完成模型配置和培訓後，可以使用模型生成分數。 但是，訓練模型的方法有多種，查看和使用結果的方法有多種： 

### <a name="capture-a-snapshot-of-the-model-in-your-workspace"></a>在工作區中捕獲模型的快照

如果使用[列車群集模型](train-clustering-model.md)模組：

1. 選擇 **"列車群集模型"** 模組並打開右側面板。

2. 選擇 **"輸出"** 選項卡。選擇 **"註冊"資料集**圖示以保存已訓練模型的副本。

保存的模型表示保存模型時的訓練資料。 如果以後更新管道中使用的訓練資料，則不會更新保存的模型。 

### <a name="see-the-clustering-result-dataset"></a>查看聚類結果資料集 

如果使用[列車群集模型](train-clustering-model.md)模組：

1. 按右鍵 **"列車群集模型"** 模組。

2. 選擇**視覺化**。

### <a name="tips-for-generating-the-best-clustering-model"></a>生成最佳聚類模型的技巧  

眾所周知，在聚類過程中使用*的種子化*過程會對模型產生重大影響。 播種是指點的初始放置到潛在的質心。
 
例如，如果資料集包含許多異常值，並且選擇異常值來設定群集的種子，則沒有其他資料點非常適合該群集，並且群集可以是單個資料組。 也就是說，它可能只有一點。  
  
您可以通過多種方式避免此問題：  
  
-   更改質心的數量並嘗試多個種子值。  
  
-   創建多個模型，更改指標或反覆運算更多。  
  
通常，使用群集模型，任何給定配置都可能導致一組本地優化的群集。 換句話說，模型返回的群集集僅適合當前資料點，不能可擴展為其他資料。 如果使用不同的初始配置，K-means 方法可能會找到不同、更高級的配置。 

## <a name="next-steps"></a>後續步驟

請參閱 Azure 機器學習[可用的模組集](module-reference.md)。 
