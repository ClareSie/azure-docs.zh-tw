---
title: 在 3DSMax 中設定以實體為基礎的轉譯材質
description: 說明如何在 3DSMax 中設定以實體為基礎的轉譯材質，並將其匯出為 FBX 格式。
author: muxanickms
ms.author: misams
ms.date: 06/16/2020
ms.topic: tutorial
ms.openlocfilehash: df4be8963c93199f9fad23ab3f709f691e1da768
ms.sourcegitcommit: 9b5c20fb5e904684dc6dd9059d62429b52cb39bc
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "85857518"
---
# <a name="tutorial-set-up-physically-based-rendering-materials-in-3d-studio-max"></a>教學課程：在 3D Studio Max 中設定以實體為基礎的轉譯材質

## <a name="overview"></a>概觀
在本教學課程中，您將了解如何：

>[!div class="checklist"]
>
> * 將具有進階光源的材質指派給場景中的物件。
> * 處理物件和材質的執行個體。
> * 將場景匯出為 FBX 格式，並選取的重要選項。

在 3D Studio Max (3DSMax) 中建立[以實體為基礎的轉譯 (PBR) 材質](../../overview/features/pbr-materials.md)，這是相當簡單的工作。 在許多方式中，這類似於在其他內容建立應用程式 (例如 Maya) 中進行 PBR 設定。 本教學課程會指引您如何設定 PBR 著色器，以及以 FBX 匯出 Azure 遠端轉譯專案。

本教學課程中的範例場景包含多個多邊形 Box 物件。 這些專案會獲指派不同的材質，例如木材、金屬、繪製金屬、塑膠和橡膠。 大致來說，每個材質都包含下列所有或大部分紋理：

* **Albedo** 是材質的色階配對，也稱為**漫射**或 **BaseColor**。
* **金屬度** 可判定材質是否為金屬，以及哪些零件是金屬。 
* **粗糙度** 可判定表面的粗糙或平滑程度。
其也會影響表面上反射和反白顯示的清晰度或模糊度。
* **法線**會將詳細資料新增至介面，而不需要新增更多多邊形。 詳細資料範例可能是金屬表面上的凹陷和凹痕，或木材中的顆粒。
* **環境遮蔽**，用來將軟陰影和接觸陰影新增至模型。 其是一個灰階圖，指出模型的哪些區域會收到完整光源 (白色) 或完整陰影 (黑色)。

## <a name="prepare-the-scene"></a>準備場景
在 **3D Studio Max** 中，設定 PBR 材質的程序如下所示。

首先，如您在範例場景中所看到的，我們建立了許多 Box 物件，每個物件代表一種不同類型的材質：

>[!TIP]
>值得注意的是，在開始建立 ARR 的資產之前，其會使用**公尺**來測量。  
>因此，建議您將 [系統單元] 場景設定為 [公尺]。 此外，建議匯出時，在 [FBX 匯出] 設定中將單位設定為公尺。

下圖說明在 3D Studio Max 中將系統單位設定為公尺的步驟。 在主功能表中，移至 [自訂] > [單位設定] > [系統單位設定]，然後在 [系統單位比例] 下拉式清單中選取 [公尺]。 
![系統單位](media/3dsmax/system-units.jpg)

當系統單位設定為公尺時，就可以開始建立我們的模型。 在我們的範例場景中，我們會建立數個 Box 物件，每個都代表不同的材質類型，例如，金屬、橡膠、塑膠等。 

>[!TIP]
>建立資產隨時以適當的方式命名時，是很好的做法。 如果場景有許多物件，這將可讓您更容易找到

![rename-objects](media/3dsmax/rename-objects.jpg)

## <a name="assign-materials"></a>指派材質

我們可以在場景中建立一些物件 (在此案例中為一些立方體)，開始進行 PBR 設定：

* 在主要工具列中，按一下 [材質編輯器] 圖示，如下圖中所示。 您也可以在鍵盤上點擊 **M** 以開啟編輯器。 [材質編輯器] 有兩種模式可在 [模式] 下拉式清單中選取 - [精簡材質編輯器] 模式和 [岩板材質] 模式。 因為這個場景相當簡單，所以我們將使用**精簡模式**。

* 在材質編輯器內，您會看到一些球體，這些是我們的材質。 我們會將其中一個材質指派給我們場景中的每個物件 - Box。 若要執行這項指派，請先選取主要檢視區中的其中一個物件。 選取此選取項目後，請按一下 [材質編輯器] 視窗中的第一個球體。 一旦指派給物件之後，您選取的材質就會反白顯示，如下一個映像中所示。

* 按一下 [將材質指派給選取項目] 按鈕，如下所示。 選取的材質現在已指派給選取的物件。
![assign-material](media/3dsmax/assign-material.jpg)

在材質編輯器中，您可以根據您的使用案例，從廣泛的選取項目中選取材質的類型。 通常，材質類型預設會設定為 [標準]。 此材質是不適合進行 PBR 設定的基本材質，因此我們必須將材質類型變更為 PBR 材質。 Azure 遠端轉譯專案的慣用 **3DSMax** 材質是 [實體材質]。

* 在材質編輯器中，按一下 [標準] 索引標籤，然後在開啟的 [材質/貼圖] 瀏覽器中，選取 [實體材質]。 此動作會將指派的 [標準] 材質轉換成 PBR [實體材質]。
![physical-material](media/3dsmax/physical-material.jpg)

* 在材質編輯器中，您現在會看到實體材質的屬性 (如下所示)，而我們可以開始將紋理指派給資產。
![textures-list](media/3dsmax/textures-list.jpg)

如同您在上圖中所見，有各式各樣的貼圖和紋理可新增至材質。 但基於我們的目的，我們只會在材質中使用五個紋理位置。

>[!TIP]
>請務必適當地命名您的材質，如上圖所示。

我們現在可以開始考慮將紋理指派給我們的材質。 您產生紋理的方式可能會根據喜好設定，或甚至是根據使用方式而有所不同。 例如，您可能很樂意使用可套用至任何資產的拼貼紋理，或需要專案/資產的特定部分，才能擁有自己的自訂紋理集。 您可能會想要使用線上取得的一般拼貼紋理，或自行在應用程式 (例如 **Photoshop**、**Quixel Suite**、**Substance 套件** 等) 中加以建立。 

但在我們開始指派紋理之前，必須先考慮我們的資產紋理座標 (UVW)。 雖然最佳做法是將任何紋理套用至模型，以確保模型已解除包裝 (若無適當的 UV 解除包裝，則無法正確地顯示紋理)，但如果我們想要在模型上使用 [環境遮蔽] 貼圖，這點很重要。 不同於 **Maya** 中的 **Stingray 著色器**，**3DSMax** 中的 [實體材質] 沒有專用的 [環境遮蔽] 紋理位置。 因此，我們會將 AO 貼圖套用至另一個位置，並允許其與另一個紋理分開使用 (例如，並排拼貼紋理)，我們會為其指派自己的 UVW 貼圖通道。 

首先，我們會將 [解除包裝 UVW 修飾元] 指派給我們的模型，如下所示：

* 在選取的物件屬性編輯器中，按一下 [修飾元清單]，然後在開啟的下拉式清單中，選取 [解除包裝 UVW]。 此動作會將解除包裝 UVW 修飾元套用至我們的資產。
![unwrap-modifier](media/3dsmax/unwrap-modifier.jpg)

* 貼圖通道已設定為一。 其位於您主要解除包裝通常會完成的貼圖通道一中。 在我們的案例中，物件已解除包裝，且沒有重疊的紋理座標 (UV)。
![unwrapped-uvw](media/3dsmax/unwrapped-uvw.jpg)

下一個步驟是建立第二個 UV 貼圖通道。

* 關閉 [UV 編輯器] (如果已開啟)，然後在 [編輯 UV] 功能表的通道區段中，將通道數變更為兩個。 貼圖通道 2 是環境遮蔽貼圖的預期通道。 

* 在開啟的 [通道變更警告] 對話方塊中，您可以選擇將通道 1 中現有的 UV [移動] 至新的通道 2，或 [放棄] 現有的 UV，隨即將會自動建立新的 [UV 解除包裝]。 僅在您想要為環境遮蔽對應 (這與在對應通道 1 中的 UV 不同，例如，如果您要在通道 1 中使用拼貼紋理) 建立新的 **UV 解除包裝**時，才選取 [放棄]。 基於我們的目的，我們會將 UV 從通道 1 [移動] 到通道 2，因為我們不需要編輯新的 UV 通道。

>[!NOTE]
>即使您已將 UV 解除包裝從貼圖通道 1 複製 - [移動] - 到貼圖通道 2，仍可以對新的通道 UV 進行任何必要編輯，而不會影響原始的貼圖通道。

![channel-change](media/3dsmax/channel-change.jpg)

建立新的貼圖通道之後，我們就可以回到材質編輯器中的實體材質，然後開始在其中新增我們的紋理。 我們會先新增環境遮蔽 (**AO**) 貼圖，因為我們會採取進一步的步驟，讓其能夠正常運作。 一旦將 AO 貼圖插入我們的材質之後，我們需要指示其使用貼圖通道 2。

* 如先前所述，**3DSMax 實體材質**中沒有適用於 AO 貼圖的專用位置。 我們會改為將 AO 貼圖套用到 [漫射粗糙度] 位置。

* 在實體材質的 [一般貼圖] 清單中，按一下 [漫射粗糙度] 的 [沒有貼圖] 位置並載入您的 AO 貼圖。

* 在 [AO 紋理屬性] 中，您會看到 [貼圖頻道] 預設設定為 **1**。 將此值變更為 **2**。 此動作會完成新增環境遮蔽貼圖所需的步驟。

>[!IMPORTANT]
>這是很重要的步驟，特別是您通道 2 中的 UV 與通道 1 中的 UV 不同時，因為若選取的通道錯誤，AO 將無法正確對應。

![assign-ao-map](media/3dsmax/assign-ao-map.jpg)

我們現在會解決將法線貼圖指派給我們的 PBR 材質。 此動作與 **Maya** 有些不同，因為法線貼圖不會直接套用至凹凸貼圖位置 (**3DSMax 實體材質**中沒有法線貼圖位置)，而是改為新增至法線貼圖修飾元，其本身會插入 [法線] 位置。

* 在實體材質屬性的 [特殊貼圖] 區段 (在 [材質編輯器] 中) 中，按一下 [凹凸貼圖] 的 [沒有貼圖] 位置。 

* 在 [材質/貼圖] 瀏覽器中，找出並按一下 [法線凹凸]。 此動作會將 [法線凹凸] 修飾元新增至我們的材料。

* 在 [法線凹凸] 修飾元中，按一下 [法線] 的 [沒有貼圖]，然後找出並載入您的法線貼圖。

* 檢查方法是否設定為 [正切函數] (應為預設值)，並視需要切換 [翻轉綠色 (Y)]。

![normal-bump](media/3dsmax/normal-bump.jpg)
![load-normal-map](media/3dsmax/load-normal-map.jpg)

如果已正確指派法線貼圖，我們可以繼續指派其餘材質，以完成我們的實體材質設定。 此程序是簡單的程序，不需要考慮任何特殊設定。 下圖顯示指派給我們材質的完整紋理集：![all-textures](media/3dsmax/all-textures.jpg)

建立並設定您的 PBR 材質後，值得考慮在您的場景中將物件執行個體化。 將場景中類似的物件 (例如螺母、螺栓、螺絲墊圈) 執行個體化 - 基本上，任何相同的物件都可以大幅節省檔案大小。 主要物件的執行個體可以有自己的縮放、旋轉和轉換，因此可以視需要放置在場景中。 在 **3D Studio Max** 中，**執行個體化**的程序很簡單。

* 在主要檢視區中，選取您想要匯出的一或多個物件。

* 按住 **Shift**，然後使用轉換 (移動) 工具將資產向上拖曳 

* 在開啟的 [複製選項] 對話方塊中，將 [物件] 設定為 [執行個體]，然後按一下 [確定]。 
![instance-object](media/3dsmax/instance-object.jpg)

這個動作會建立物件的執行個體，而此物件在移動時可以進行旋轉或縮放，與其父系和該父系的其他執行個體無關。

>[!IMPORTANT]
>不過，在子物件模式下對執行個體進行的任何變更都會傳輸到物件的所有執行個體，因此，如果您要使用執行個體物件元件 (頂點、多邊形面等等)，則會先確定您想要任何所做的變更影響所有這些執行個體。 請記住，隨時都可以在唯一物件中建立任何執行個體化物件。 

>[!TIP]
>關於場景中執行個體化的最佳做法是在進行過程中建立執行個體，因為將「副本」取代為執行個體化的物件非常困難。 

在繼續進行匯出程序之前，最後一件必須先考慮的事，就是您可能想要封裝場景/資產以供分享。 在理想情況下，如果您將資產傳遞給用戶端或小組成員，您會希望他們能夠開啟並檢視資產，因為其應該會以最不複雜的方式顯示。 因此，請務必讓您的資產紋理路徑相對於場景檔案。 當資產的紋理路徑指向本機磁碟或絕對路徑/位置時，如果在不同的電腦上開啟，就不會載入場景中，即使是 **.max** 檔案也會放在與紋理相同的資料夾中。 使紋理路徑相對於 3D Studio Max 可解決此問題，而且相當簡單。

* 在主要工具列中，移至 [檔案] > [參考] > [資產追蹤切換]。 

* 在開啟的資產追蹤瀏覽器中，您會看到已套用至您 PBR 材質的所有或大部分紋理列在 [貼圖/著色器] 資料行底下。

* 在其旁邊的 [完整路徑] 資料行中，您會看到紋理位置的檔案路徑，最有可能是其在您本機電腦上的位置。

* 最後，您會看到名為 [狀態] 的資料行。 此資料行會指出指定的紋理是否已找出並套用至您的場景，並使用下列其中一個詞彙來標示此紋理 [確定]、[找到]，或 [檔案遺漏]。 前兩個指出已找到並載入檔案，而最後一個清楚表示追蹤程式找不到檔案。
![texture-paths](media/3dsmax/texture-paths.jpg)

您可能會注意到，當您第一次開啟資產追蹤器時，並不會列出所有紋理。 您不需要擔心，因為透過路徑尋找程序執行一次或兩次，通常會找到所有場景紋理。 path-finding 程序如下所示： 

* 在 [資產追蹤器] 視窗中，**Shift**+**按一下** [貼圖/著色器] 清單中頂端紋理，然後繼續按住 Shift 並按一下清單中的最後一個紋理。 這個動作會選取清單中的所有紋理。 所選取的紋理現在會以藍色反白顯示 (請參閱上圖)。

* 以滑鼠右鍵按一下選取項目，然後在開啟的快顯功能表中選取 [設定路徑]。

* 在開啟的 [指定資產路徑] 方塊中，選取所顯示紋理的本機路徑，並將其取代為下列 `.\`，然後按一下 [確定]。 

* 在一段時間之後 (依場景中有多少紋理以及場景大小而定)，資產追蹤器應自行解析，如下所示 (請參閱映像)。
![resolve-textures](media/3dsmax/resolve-textures.jpg)

請注意，[完整路徑] 資料行現在為空白。 這表示場景不會再尋找特定 (絕對) 位置中的相關紋理，但只要檔案上限或相關的 FBX 檔案位於與紋理相同的資料夾中，就一定會找到紋理。 

>[!NOTE]
>有時候您必須重複此程序幾次，以尋找並解決所有紋理和路徑。 這並不是我們所要關心的，只要重複進行，直到所有相關資產都列入考慮為止。 這也可能是因為找不到某些檔案的情況。 在此情況下，只需選取清單中的所有資產，然後按一下 [移除遺漏的路徑] (請參閱上方映像)

## <a name="fbx-export"></a>FBX 匯出

完成資產追蹤之後，我們現在可以繼續進行 FBX 匯出。 同樣地，程序很簡單，且可以透過幾種方式來完成。 

>[!TIP]
>最好的做法是，除非您想要匯出整個場景，否則請選擇只匯出所需的資產。 在特別耗費資源的場景中，匯出可能需要很長的時間，因此只會匯出您需要的內容
>
>如果您已使用 **Turbosmooth** 或 **Open SubDiv** 等修飾元，則建議您在匯出之前摺疊這些修飾元，因為其會在匯出期間發生問題。 在執行此動作之前，請務必先儲存場景！ 

* 在場景中，選取您想要匯出的資產，然後在主要工具列中，移至 [檔案] > [匯出] > [選取的匯出]

* 在 [選取要匯出的檔案] 對話方塊中，輸入或選取輸出檔案名稱，然後在 [另存新檔類型] 選項中選取 [Autodesk (*.fbx)]。 此動作會開啟 [FBX 匯出] 功能表。 

* 請記住，如果您已在場景中建立執行個體，請務必在 FBX 匯出設定中將 [保留執行個體] 切換為開啟。 
![fbx-export](media/3dsmax/fbx-export.jpg)

請記住，先前提到，有幾種方式可以匯出檔案。 如果匯出的目的是要讓 FBX 在資料夾/目錄中與其紋理檔案進行共用，則下圖中顯示的設定應該適用且正常運作。 選取您的設定後，按一下 [確定]。
![fbx-settings](media/3dsmax/fbx-settings.jpg)

不過，如果您不想要與 FBX 共用大型的紋理資料夾/目錄，則可以選擇在 FBX 中 [內嵌] 紋理。 這表示整個資產 (包含的紋理) 將會新增至單一 FBX。 不過，請注意，其會將您的匯出結合成單一資產，因此 FBX 檔案會大幅增加。

>[!IMPORTANT]
>如果您的結果 FBX 檔案大於 2.4 GB，則 FBX 匯出設定的最低版本 (請參閱上文) 應為 2016 或更新版本。 因為較新的版本具有 64 位支援，因此支援更大的檔案。

* 在 FBX 匯出設定中，切換開啟 **[內嵌媒體]，然後按一下 [確定] 以使用所包含的紋理進行匯出。 

當您在使用實體材質時匯出至 FBX，在匯出對話方塊中按一下 [確定] 後，您可能會看到下列警告快顯視窗：![export-warnings](media/3dsmax/export-warnings.jpg)

這個警告只會通知使用者，匯出的材質可能與其他軟體套件不相容。 因為實體材質與 Azure 遠端轉譯相容，所以不需要擔心。 只要按一下 [確定] 即可完成程序並關閉視窗。

## <a name="conclusion"></a>結論

通常，這種類型的材質看起來更逼真，因為這是以真實世界的光線物理學為依據。 其會建立一個額外的沉浸式效果，讓場景好像存在於現實世界中。

## <a name="next-steps"></a>後續步驟

您現在已經知道如何為場景中的物件設定具有進階光源的材質。 也知道如何將物件匯出為 Azure 遠端轉譯所支援的 FBX 格式。 下一個步驟是轉換 FBX 檔案，並在 Azure 遠端轉譯中將其視覺化。

>[!div class="nextstepaction"]
>[快速入門：轉換模型以進行轉譯](../../quickstarts\convert-model.md)