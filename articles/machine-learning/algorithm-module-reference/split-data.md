---
title: 拆分資料：模組引用
titleSuffix: Azure Machine Learning
description: 瞭解如何在 Azure 機器學習中使用拆分資料模組將資料集劃分為兩個不同的集。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/22/2019
ms.openlocfilehash: 9eba6f2c47629b708dde4a5a2888b76dbd24b4e4
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/28/2020
ms.locfileid: "79455888"
---
# <a name="split-data-module"></a>拆分資料模組

本文介紹 Azure 機器學習設計器（預覽）中的模組。

使用拆分資料模組將資料集劃分為兩個不同的集。

當您需要將資料分離到定型和測試集中時，此模組非常有用。 您還可以自訂資料的劃分方式。 某些選項支援資料隨機化。 其他類型是針對特定資料類型或型號定制的。

## <a name="configure-the-module"></a>配置模組

> [!TIP]
> 在選擇拆分模式之前，請閱讀所有選項以確定所需的拆分類型。
> 如果更改拆分模式，可能會重置所有其他選項。

1. 將**拆分資料**模組添加到設計器中的管道中。 您可以在 **"資料轉換**"""**示例和拆分**"類別中找到此模組。

1. **拆分模式**：根據您擁有的資料類型和如何劃分資料，選擇以下模式之一。 每個拆分模式都有不同的選項。

   - **拆分行**：如果只想將資料分成兩部分，請使用此選項。 您可以指定要放入每個拆分中的資料百分比。 預設情況下，資料被除以 50/50。

     您還可以隨機化每個組中的行選擇，並使用分層採樣。 在分層採樣中，必須選擇一列資料，希望兩個結果資料集中的值平均分配。  

   - **正則運算式拆分**：如果要通過測試值的單個列來劃分資料集，請選擇此選項。

     例如，如果要分析情緒，可以檢查文字欄位中是否存在特定產品名稱。 然後，可以將資料集劃分為具有目標產品名稱的行和行，而不帶目標產品名稱。

   - **相對運算式拆分**：每當要將條件應用於數位列時，請使用此選項。 該數位可以是日期/時間欄位、包含年齡或美元金額的列，甚至一個百分比。 例如，您可能希望根據專案的成本、按年齡範圍對人員進行分組或按日曆日期劃分資料來劃分資料集。

### <a name="split-rows"></a>拆分行

1. 將[拆分資料](./split-data.md)模組添加到設計器中的管道中，並連接要拆分的資料集。
  
1. 對於**拆分模式**，選擇**拆分行**。 

1. **第一個輸出資料集中的行數：** 使用此選項確定將進入第一個（左側）輸出中的行數。 所有其他行將進入第二個（右側）輸出。

   比率表示發送到第一個輸出資料集的行的百分比，因此必須輸入介於 0 和 1 之間的小數。
     
   例如，如果輸入**0.75**作為值，資料集將拆分為 75/25。 在此拆分中，75% 的行將發送到第一個輸出資料集。 剩餘的 25% 將發送到第二個輸出資料集。
  
1. 如果要將所選資料隨機化為兩個組，請選擇 **"隨機拆分**"選項。 在創建訓練和測試資料集時，這是首選選項。

1. **隨機種子**：輸入非負整數值以啟動要使用的實例的偽隨機序列。 所有會產生隨機數字的模組中都使用此預設種子。 

   指定種子使結果可重現。 如果需要重複拆分操作的結果，則應為亂數產生器指定種子。 否則，預設情況下隨機種子設置為**0**，這意味著初始種子值是從系統時鐘獲取的。 如此一來，每次執行分割時，資料分佈可能稍有不同。 

1. **分層拆分**：將此選項設置為**True，** 以確保兩個輸出資料集包含*地層列*或*分層鍵列*中值的代表性樣本。 

   通過分層採樣，將資料分開，以便每個輸出資料集獲取每個目標值的百分比大致相同。 例如，您可能希望確保培訓和測試集在結果或其他列（如性別）方面大致平衡。

1. 提交管道。


## <a name="select-a-regular-expression"></a>選擇正則運算式

1. 將[拆分資料](./split-data.md)模組添加到管道中，並將其作為輸入連接到要拆分的資料集。  
  
1. 對於**拆分模式**，選擇**正則運算式拆分**。

1. 在 **"正則運算式"** 框中，輸入有效的正則運算式。 
  
   正則運算式應遵循正則運算式的 Python 語法。

1. 提交管道。

   基於提供的正則運算式，資料集分為兩組行：具有與運算式匹配的值的行和所有剩餘行。 

以下示例演示如何使用**正則運算式**選項劃分資料集。 

### <a name="single-whole-word"></a>單個整字 

本示例將包含列`Gryphon``Text`中文本的所有行放入第一個資料集。 它將其他行放入**拆分資料**的第二個輸出中。

```text
    \"Text" Gryphon  
```

### <a name="substring"></a>Substring

本示例查找資料集第二列中的任何位置的指定字串。 此處的索引值 1 表示該位置。 該比對會區分大小寫。

```text
(\1) ^[a-f]
```

第一個結果資料集包含索引列以以下字元之一`a`開頭的所有行： `b`、 `c`、 `d`、 `e` `f`、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 所有其他行都定向到第二個輸出。

## <a name="select-a-relative-expression"></a>選擇相對運算式

1. 將[拆分資料](./split-data.md)模組添加到管道中，並將其作為輸入連接到要拆分的資料集。
  
1. 對於**拆分模式**，選擇**相對運算式**。
  
1. 在 **"關係"運算式**框中，輸入對單個列執行比較操作的運算式。

   對於**數位列**：
   - 該列包含任何數位資料類型的數位，包括日期和時間資料類型。
   - 運算式最多可以引用一個列名稱。
   - 使用 ampersand 字元`&`， FOR 操作。 將管道字元 、`|`用於 OR 操作。
   - 支援以下運算子： `<`、 `>` `<=`、 `>=`、 `==` `!=`、 、 、 、 、 、 、 、 、 、 、 、 、 、 、 、
   - 不能通過使用 對`(``)`操作進行分組。
   
   對於**字串列**：
   - 支援以下運算子： `==`. `!=`

1. 提交管道。

   運算式將資料集劃分為兩組行：具有滿足條件的值的行和所有剩餘行。

以下示例演示如何使用**拆分資料**模組中的 **"相對運算式"** 選項來劃分資料集。  

### <a name="calendar-year"></a>日曆年度

常見的案例是依年份分割資料集。 以下運算式選擇列`Year`中的值大於`2010`的所有行。

```text
\"Year" > 2010
```

日期運算式必須考慮資料列中包含的所有日期部分。 資料列中的日期格式必須一致。 

例如，在使用格式`mmddyyyy`的日期列中，運算式應如下所示：

```text
\"Date" > 1/1/2010
```

### <a name="column-index"></a>列索引

下列運算式示範如何使用資料行索引，在資料集的第一個資料行中選取所含的值小於或等於為 30、但不等於 20 的所有資料列。

```text
(\0)<=30 & !=20
```


## <a name="next-steps"></a>後續步驟

請參閱 Azure 機器學習[可用的模組集](module-reference.md)。 
